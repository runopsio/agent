shadow$provide.module$node_modules$$sentry$hub$dist$hub=function(global,require,module,exports){function getMainCarrier(){var carrier=utils_1.getGlobalObject();carrier.__SENTRY__=carrier.__SENTRY__||{extensions:{},hub:void 0};return carrier}function makeMain(hub){var registry=getMainCarrier(),oldHub=getHubFromCarrier(registry);setHubOnCarrier(registry,hub);return oldHub}function getHubFromCarrier(carrier){if(carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub)return carrier.__SENTRY__.hub;carrier.__SENTRY__=
carrier.__SENTRY__||{};carrier.__SENTRY__.hub=new Hub;return carrier.__SENTRY__.hub}function setHubOnCarrier(carrier,hub){if(!carrier)return!1;carrier.__SENTRY__=carrier.__SENTRY__||{};carrier.__SENTRY__.hub=hub;return!0}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$tslib$tslib"),types_1=require("module$node_modules$$sentry$types$dist$index"),utils_1=require("module$node_modules$$sentry$utils$dist$index"),scope_1=require("module$node_modules$$sentry$hub$dist$scope"),
session_1=require("module$node_modules$$sentry$hub$dist$session");exports.API_VERSION=4;var Hub=function(){function Hub(client,scope,_version){void 0===scope&&(scope=new scope_1.Scope);void 0===_version&&(_version=exports.API_VERSION);this._version=_version;this._stack=[{}];this.getStackTop().scope=scope;client&&this.bindClient(client)}Hub.prototype.isOlderThan=function(version){return this._version<version};Hub.prototype.bindClient=function(client){(this.getStackTop().client=client)&&client.setupIntegrations&&
client.setupIntegrations()};Hub.prototype.pushScope=function(){var scope=scope_1.Scope.clone(this.getScope());this.getStack().push({client:this.getClient(),scope});return scope};Hub.prototype.popScope=function(){return 1>=this.getStack().length?!1:!!this.getStack().pop()};Hub.prototype.withScope=function(callback){var scope=this.pushScope();try{callback(scope)}finally{this.popScope()}};Hub.prototype.getClient=function(){return this.getStackTop().client};Hub.prototype.getScope=function(){return this.getStackTop().scope};
Hub.prototype.getStack=function(){return this._stack};Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]};Hub.prototype.captureException=function(exception$jscomp$0,hint){var eventId=this._lastEventId=utils_1.uuid4(),finalHint=hint;if(!hint){try{throw Error("Sentry syntheticException");}catch(exception){hint=exception}finalHint={originalException:exception$jscomp$0,syntheticException:hint}}this._invokeClient("captureException",exception$jscomp$0,tslib_1.__assign(tslib_1.__assign({},
finalHint),{event_id:eventId}));return eventId};Hub.prototype.captureMessage=function(message,level,hint){var eventId=this._lastEventId=utils_1.uuid4(),finalHint=hint;if(!hint){try{throw Error(message);}catch(exception){hint=exception}finalHint={originalException:message,syntheticException:hint}}this._invokeClient("captureMessage",message,level,tslib_1.__assign(tslib_1.__assign({},finalHint),{event_id:eventId}));return eventId};Hub.prototype.captureEvent=function(event,hint){var eventId=utils_1.uuid4();
"transaction"!==event.type&&(this._lastEventId=eventId);this._invokeClient("captureEvent",event,tslib_1.__assign(tslib_1.__assign({},hint),{event_id:eventId}));return eventId};Hub.prototype.lastEventId=function(){return this._lastEventId};Hub.prototype.addBreadcrumb=function(breadcrumb,hint){var _a=this.getStackTop(),scope=_a.scope;_a=_a.client;if(scope&&_a){_a=_a.getOptions&&_a.getOptions()||{};var _c=_a.beforeBreadcrumb,beforeBreadcrumb=void 0===_c?null:_c;_a=_a.maxBreadcrumbs;_a=void 0===_a?100:
_a;if(!(0>=_a)){_c=utils_1.dateTimestampInSeconds();var mergedBreadcrumb=tslib_1.__assign({timestamp:_c},breadcrumb);breadcrumb=beforeBreadcrumb?utils_1.consoleSandbox(function(){return beforeBreadcrumb(mergedBreadcrumb,hint)}):mergedBreadcrumb;null!==breadcrumb&&scope.addBreadcrumb(breadcrumb,_a)}}};Hub.prototype.setUser=function(user){var scope=this.getScope();scope&&scope.setUser(user)};Hub.prototype.setTags=function(tags){var scope=this.getScope();scope&&scope.setTags(tags)};Hub.prototype.setExtras=
function(extras){var scope=this.getScope();scope&&scope.setExtras(extras)};Hub.prototype.setTag=function(key,value){var scope=this.getScope();scope&&scope.setTag(key,value)};Hub.prototype.setExtra=function(key,extra){var scope=this.getScope();scope&&scope.setExtra(key,extra)};Hub.prototype.setContext=function(name,context){var scope=this.getScope();scope&&scope.setContext(name,context)};Hub.prototype.configureScope=function(callback){var _a=this.getStackTop(),scope=_a.scope;_a=_a.client;scope&&_a&&
callback(scope)};Hub.prototype.run=function(callback){var oldHub=makeMain(this);try{callback(this)}finally{makeMain(oldHub)}};Hub.prototype.getIntegration=function(integration){var client=this.getClient();if(!client)return null;try{return client.getIntegration(integration)}catch(_oO){return utils_1.logger.warn("Cannot retrieve integration "+integration.id+" from the current Hub"),null}};Hub.prototype.startSpan=function(context){return this._callExtensionMethod("startSpan",context)};Hub.prototype.startTransaction=
function(context,customSamplingContext){return this._callExtensionMethod("startTransaction",context,customSamplingContext)};Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")};Hub.prototype.captureSession=function(endSession){void 0===endSession&&(endSession=!1);if(endSession)return this.endSession();this._sendSessionUpdate()};Hub.prototype.endSession=function(){var _a,_b,_c,_d,_e;null===(_c=null===(_b=null===(_a=this.getStackTop())||void 0===_a?void 0:_a.scope)||
void 0===_b?void 0:_b.getSession())||void 0===_c?void 0:_c.close();this._sendSessionUpdate();null===(_e=null===(_d=this.getStackTop())||void 0===_d?void 0:_d.scope)||void 0===_e?void 0:_e.setSession()};Hub.prototype.startSession=function(context){var _a=this.getStackTop(),scope=_a.scope,_b=(_a=_a.client)&&_a.getOptions()||{};_a=_b.release;_b=_b.environment;var userAgent=(utils_1.getGlobalObject().navigator||{}).userAgent;context=new session_1.Session(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({release:_a,
environment:_b},scope&&{user:scope.getUser()}),userAgent&&{userAgent}),context));scope&&((_a=scope.getSession&&scope.getSession())&&_a.status===types_1.SessionStatus.Ok&&_a.update({status:types_1.SessionStatus.Exited}),this.endSession(),scope.setSession(context));return context};Hub.prototype._sendSessionUpdate=function(){var _a=this.getStackTop(),scope=_a.scope;_a=_a.client;scope&&(scope=scope.getSession&&scope.getSession())&&_a&&_a.captureSession&&_a.captureSession(scope)};Hub.prototype._invokeClient=
function(method){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var _b=this.getStackTop();_i=_b.scope;(_b=_b.client)&&_b[method]&&_b[method].apply(_b,tslib_1.__spread(args,[_i]))};Hub.prototype._callExtensionMethod=function(method){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if((_i=getMainCarrier().__SENTRY__)&&_i.extensions&&"function"===typeof _i.extensions[method])return _i.extensions[method].apply(this,args);utils_1.logger.warn("Extension method "+
method+" couldn't be found, doing nothing.")};return Hub}();exports.Hub=Hub;exports.getMainCarrier=getMainCarrier;exports.makeMain=makeMain;exports.getCurrentHub=function(){var registry=getMainCarrier();registry&&registry.__SENTRY__&&registry.__SENTRY__.hub&&!getHubFromCarrier(registry).isOlderThan(exports.API_VERSION)||setHubOnCarrier(registry,new Hub);if(utils_1.isNodeEnv()){var _a,_b,_c;try{var activeDomain=null===(_c=null===(_b=null===(_a=getMainCarrier().__SENTRY__)||void 0===_a?void 0:_a.extensions)||
void 0===_b?void 0:_b.domain)||void 0===_c?void 0:_c.active;if(activeDomain){if(!(activeDomain&&activeDomain.__SENTRY__&&activeDomain.__SENTRY__.hub)||getHubFromCarrier(activeDomain).isOlderThan(exports.API_VERSION)){var registryHubTopStack=getHubFromCarrier(registry).getStackTop();setHubOnCarrier(activeDomain,new Hub(registryHubTopStack.client,scope_1.Scope.clone(registryHubTopStack.scope)))}var JSCompiler_inline_result=getHubFromCarrier(activeDomain)}else JSCompiler_inline_result=getHubFromCarrier(registry)}catch(_Oo){JSCompiler_inline_result=
getHubFromCarrier(registry)}return JSCompiler_inline_result}return getHubFromCarrier(registry)};exports.getActiveDomain=function(){utils_1.logger.warn("Function `getActiveDomain` is deprecated and will be removed in a future version.");var sentry=getMainCarrier().__SENTRY__;return sentry&&sentry.extensions&&sentry.extensions.domain&&sentry.extensions.domain.active};exports.getHubFromCarrier=getHubFromCarrier;exports.setHubOnCarrier=setHubOnCarrier}
//# sourceMappingURL=module$node_modules$$sentry$hub$dist$hub.js.map
