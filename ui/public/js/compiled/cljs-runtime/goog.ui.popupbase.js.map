{
"version":3,
"file":"goog.ui.popupbase.js",
"lineCount":300,
"mappings":"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",
"sources":["goog/ui/popupbase.js"],
"sourcesContent":["// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Definition of the PopupBase class.\n *\n */\n\ngoog.provide('goog.ui.PopupBase');\ngoog.provide('goog.ui.PopupBase.EventType');\ngoog.provide('goog.ui.PopupBase.Type');\n\ngoog.require('goog.Timer');\ngoog.require('goog.array');\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.events');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.KeyCodes');\ngoog.require('goog.fx.Transition');\ngoog.require('goog.style');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * The PopupBase class provides functionality for showing and hiding a generic\n * container element. It also provides the option for hiding the popup element\n * if the user clicks outside the popup or the popup loses focus.\n *\n * @constructor\n * @extends {goog.events.EventTarget}\n * @param {Element=} opt_element A DOM element for the popup.\n * @param {goog.ui.PopupBase.Type=} opt_type Type of popup.\n */\ngoog.ui.PopupBase = function(opt_element, opt_type) {\n  goog.events.EventTarget.call(this);\n\n  /**\n   * An event handler to manage the events easily\n   * @type {goog.events.EventHandler<!goog.ui.PopupBase>}\n   * @private\n   */\n  this.handler_ = new goog.events.EventHandler(this);\n\n  this.setElement(opt_element || null);\n  if (opt_type) {\n    this.setType(opt_type);\n  }\n};\ngoog.inherits(goog.ui.PopupBase, goog.events.EventTarget);\ngoog.tagUnsealableClass(goog.ui.PopupBase);\n\n\n/**\n * Constants for type of Popup\n * @enum {string}\n */\ngoog.ui.PopupBase.Type = {\n  TOGGLE_DISPLAY: 'toggle_display',\n  MOVE_OFFSCREEN: 'move_offscreen'\n};\n\n\n/**\n * The popup dom element that this Popup wraps.\n * @type {?Element}\n * @private\n */\ngoog.ui.PopupBase.prototype.element_ = null;\n\n\n/**\n * Whether the Popup dismisses itself it the user clicks outside of it or the\n * popup loses focus\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.autoHide_ = true;\n\n\n/**\n * Mouse events without auto hide partner elements will not dismiss the popup.\n * @type {?Array<?Element>}\n * @private\n */\ngoog.ui.PopupBase.prototype.autoHidePartners_ = null;\n\n\n/**\n * Clicks outside the popup but inside this element will cause the popup to\n * hide if autoHide_ is true. If this is null, then the entire document is used.\n * For example, you can use a body-size div so that clicks on the browser\n * scrollbar do not dismiss the popup.\n * @type {?Element}\n * @private\n */\ngoog.ui.PopupBase.prototype.autoHideRegion_ = null;\n\n\n/**\n * Whether the popup is currently being shown.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.isVisible_ = false;\n\n\n/**\n * Whether the popup should hide itself asynchrously. This was added because\n * there are cases where hiding the element in mouse down handler in IE can\n * cause textinputs to get into a bad state if the element that had focus is\n * hidden.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.shouldHideAsync_ = false;\n\n\n/**\n * The time when the popup was last shown.\n * @type {number}\n * @private\n */\ngoog.ui.PopupBase.prototype.lastShowTime_ = -1;\n\n\n/**\n * The time when the popup was last hidden.\n * @type {number}\n * @private\n */\ngoog.ui.PopupBase.prototype.lastHideTime_ = -1;\n\n\n/**\n * Whether to hide when the escape key is pressed.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.hideOnEscape_ = false;\n\n\n/**\n * Whether to enable cross-iframe dismissal.\n * @type {boolean}\n * @private\n */\ngoog.ui.PopupBase.prototype.enableCrossIframeDismissal_ = true;\n\n\n/**\n * The type of popup\n * @type {goog.ui.PopupBase.Type}\n * @private\n */\ngoog.ui.PopupBase.prototype.type_ = goog.ui.PopupBase.Type.TOGGLE_DISPLAY;\n\n\n/**\n * Transition to play on showing the popup.\n * @type {goog.fx.Transition|undefined}\n * @private\n */\ngoog.ui.PopupBase.prototype.showTransition_;\n\n\n/**\n * Transition to play on hiding the popup.\n * @type {goog.fx.Transition|undefined}\n * @private\n */\ngoog.ui.PopupBase.prototype.hideTransition_;\n\n\n/**\n * Constants for event type fired by Popup\n *\n * @enum {string}\n */\ngoog.ui.PopupBase.EventType = {\n  BEFORE_SHOW: 'beforeshow',\n  SHOW: 'show',\n  BEFORE_HIDE: 'beforehide',\n  HIDE: 'hide'\n};\n\n\n/**\n * A time in ms used to debounce events that happen right after each other.\n *\n * A note about why this is necessary. There are two cases to consider.\n * First case, a popup will usually see a focus event right after it's launched\n * because it's typical for it to be launched in a mouse-down event which will\n * then move focus to the launching button. We don't want to think this is a\n * separate user action moving focus. Second case, a user clicks on the\n * launcher button to close the menu. In that case, we'll close the menu in the\n * focus event and then show it again because of the mouse down event, even\n * though the intention is to just close the menu. This workaround appears to\n * be the least intrusive fix.\n *\n * @type {number}\n */\ngoog.ui.PopupBase.DEBOUNCE_DELAY_MS = 150;\n\n\n/**\n * @return {goog.ui.PopupBase.Type} The type of popup this is.\n */\ngoog.ui.PopupBase.prototype.getType = function() {\n  return this.type_;\n};\n\n\n/**\n * Specifies the type of popup to use.\n *\n * @param {goog.ui.PopupBase.Type} type Type of popup.\n */\ngoog.ui.PopupBase.prototype.setType = function(type) {\n  this.type_ = type;\n};\n\n\n/**\n * Returns whether the popup should hide itself asynchronously using a timeout\n * instead of synchronously.\n * @return {boolean} Whether to hide async.\n */\ngoog.ui.PopupBase.prototype.shouldHideAsync = function() {\n  return this.shouldHideAsync_;\n};\n\n\n/**\n * Sets whether the popup should hide itself asynchronously using a timeout\n * instead of synchronously.\n * @param {boolean} b Whether to hide async.\n */\ngoog.ui.PopupBase.prototype.setShouldHideAsync = function(b) {\n  this.shouldHideAsync_ = b;\n};\n\n\n/**\n * Returns the dom element that should be used for the popup.\n *\n * @return {Element} The popup element.\n */\ngoog.ui.PopupBase.prototype.getElement = function() {\n  return this.element_;\n};\n\n\n/**\n * Specifies the dom element that should be used for the popup.\n *\n * @param {Element} elt A DOM element for the popup.\n */\ngoog.ui.PopupBase.prototype.setElement = function(elt) {\n  this.ensureNotVisible_();\n  this.element_ = elt;\n};\n\n\n/**\n * Returns whether the Popup dismisses itself when the user clicks outside of\n * it.\n * @return {boolean} Whether the Popup autohides on an external click.\n */\ngoog.ui.PopupBase.prototype.getAutoHide = function() {\n  return this.autoHide_;\n};\n\n\n/**\n * Sets whether the Popup dismisses itself when the user clicks outside of it.\n * @param {boolean} autoHide Whether to autohide on an external click.\n */\ngoog.ui.PopupBase.prototype.setAutoHide = function(autoHide) {\n  this.ensureNotVisible_();\n  this.autoHide_ = autoHide;\n};\n\n\n/**\n * Mouse events that occur within an autoHide partner will not hide a popup\n * set to autoHide.\n * @param {!Element} partner The auto hide partner element.\n */\ngoog.ui.PopupBase.prototype.addAutoHidePartner = function(partner) {\n  if (!this.autoHidePartners_) {\n    this.autoHidePartners_ = [];\n  }\n\n  goog.array.insert(this.autoHidePartners_, partner);\n};\n\n\n/**\n * Removes a previously registered auto hide partner.\n * @param {!Element} partner The auto hide partner element.\n */\ngoog.ui.PopupBase.prototype.removeAutoHidePartner = function(partner) {\n  if (this.autoHidePartners_) {\n    goog.array.remove(this.autoHidePartners_, partner);\n  }\n};\n\n\n/**\n * @return {boolean} Whether the Popup autohides on the escape key.\n */\ngoog.ui.PopupBase.prototype.getHideOnEscape = function() {\n  return this.hideOnEscape_;\n};\n\n\n/**\n * Sets whether the Popup dismisses itself on the escape key.\n * @param {boolean} hideOnEscape Whether to autohide on the escape key.\n */\ngoog.ui.PopupBase.prototype.setHideOnEscape = function(hideOnEscape) {\n  this.ensureNotVisible_();\n  this.hideOnEscape_ = hideOnEscape;\n};\n\n\n/**\n * @return {boolean} Whether cross iframe dismissal is enabled.\n */\ngoog.ui.PopupBase.prototype.getEnableCrossIframeDismissal = function() {\n  return this.enableCrossIframeDismissal_;\n};\n\n\n/**\n * Sets whether clicks in other iframes should dismiss this popup.  In some\n * cases it should be disabled, because it can cause spurious\n * @param {boolean} enable Whether to enable cross iframe dismissal.\n */\ngoog.ui.PopupBase.prototype.setEnableCrossIframeDismissal = function(enable) {\n  this.enableCrossIframeDismissal_ = enable;\n};\n\n\n/**\n * Returns the region inside which the Popup dismisses itself when the user\n * clicks, or null if it's the entire document.\n * @return {Element} The DOM element for autohide, or null if it hasn't been\n *     set.\n */\ngoog.ui.PopupBase.prototype.getAutoHideRegion = function() {\n  return this.autoHideRegion_;\n};\n\n\n/**\n * Sets the region inside which the Popup dismisses itself when the user\n * clicks.\n * @param {Element} element The DOM element for autohide.\n */\ngoog.ui.PopupBase.prototype.setAutoHideRegion = function(element) {\n  this.autoHideRegion_ = element;\n};\n\n\n/**\n * Sets transition animation on showing and hiding the popup.\n * @param {goog.fx.Transition=} opt_showTransition Transition to play on\n *     showing the popup.\n * @param {goog.fx.Transition=} opt_hideTransition Transition to play on\n *     hiding the popup.\n */\ngoog.ui.PopupBase.prototype.setTransition = function(\n    opt_showTransition, opt_hideTransition) {\n  this.showTransition_ = opt_showTransition;\n  this.hideTransition_ = opt_hideTransition;\n};\n\n\n/**\n * Returns the time when the popup was last shown.\n *\n * @return {number} time in ms since epoch when the popup was last shown, or\n * -1 if the popup was never shown.\n */\ngoog.ui.PopupBase.prototype.getLastShowTime = function() {\n  return this.lastShowTime_;\n};\n\n\n/**\n * Returns the time when the popup was last hidden.\n *\n * @return {number} time in ms since epoch when the popup was last hidden, or\n * -1 if the popup was never hidden or is currently showing.\n */\ngoog.ui.PopupBase.prototype.getLastHideTime = function() {\n  return this.lastHideTime_;\n};\n\n\n/**\n * Returns the event handler for the popup. All event listeners belonging to\n * this handler are removed when the tooltip is hidden. Therefore,\n * the recommended usage of this handler is to listen on events in\n * {@link #onShow}.\n * @return {goog.events.EventHandler<T>} Event handler for this popup.\n * @protected\n * @this {T}\n * @template T\n */\ngoog.ui.PopupBase.prototype.getHandler = function() {\n  // As the template type is unbounded, narrow the \"this\" type\n  var self = /** @type {!goog.ui.PopupBase} */ (this);\n\n  return self.handler_;\n};\n\n\n/**\n * Helper to throw exception if the popup is showing.\n * @private\n */\ngoog.ui.PopupBase.prototype.ensureNotVisible_ = function() {\n  if (this.isVisible_) {\n    throw new Error('Can not change this state of the popup while showing.');\n  }\n};\n\n\n/**\n * Returns whether the popup is currently visible.\n *\n * @return {boolean} whether the popup is currently visible.\n */\ngoog.ui.PopupBase.prototype.isVisible = function() {\n  return this.isVisible_;\n};\n\n\n/**\n * Returns whether the popup is currently visible or was visible within about\n * 150 ms ago. This is used by clients to handle a very specific, but common,\n * popup scenario. The button that launches the popup should close the popup\n * on mouse down if the popup is alrady open. The problem is that the popup\n * closes itself during the capture phase of the mouse down and thus the button\n * thinks it's hidden and this should show it again. This method provides a\n * good heuristic for clients. Typically in their event handler they will have\n * code that is:\n *\n * if (menu.isOrWasRecentlyVisible()) {\n *   menu.setVisible(false);\n * } else {\n *   ... // code to position menu and initialize other state\n *   menu.setVisible(true);\n * }\n * @return {boolean} Whether the popup is currently visible or was visible\n *     within about 150 ms ago.\n */\ngoog.ui.PopupBase.prototype.isOrWasRecentlyVisible = function() {\n  return this.isVisible_ ||\n      (goog.now() - this.lastHideTime_ < goog.ui.PopupBase.DEBOUNCE_DELAY_MS);\n};\n\n\n/**\n * Sets whether the popup should be visible. After this method\n * returns, isVisible() will always return the new state, even if\n * there is a transition.\n *\n * @param {boolean} visible Desired visibility state.\n */\ngoog.ui.PopupBase.prototype.setVisible = function(visible) {\n  // Make sure that any currently running transition is stopped.\n  if (this.showTransition_) this.showTransition_.stop();\n  if (this.hideTransition_) this.hideTransition_.stop();\n\n  if (visible) {\n    this.show_();\n  } else {\n    this.hide_();\n  }\n};\n\n\n/**\n * Repositions the popup according to the current state.\n * Should be overriden by subclases.\n */\ngoog.ui.PopupBase.prototype.reposition = goog.nullFunction;\n\n\n/**\n * Does the work to show the popup.\n * @private\n */\ngoog.ui.PopupBase.prototype.show_ = function() {\n  // Ignore call if we are already showing.\n  if (this.isVisible_) {\n    return;\n  }\n\n  // Give derived classes and handlers a chance to customize popup.\n  if (!this.onBeforeShow()) {\n    return;\n  }\n\n  // Allow callers to set the element in the BEFORE_SHOW event.\n  if (!this.element_) {\n    throw new Error(\n        'Caller must call setElement before trying to show the popup');\n  }\n\n  // Call reposition after onBeforeShow, as it may change the style and/or\n  // content of the popup and thereby affecting the size which is used for the\n  // viewport calculation.\n  this.reposition();\n\n  var doc = goog.dom.getOwnerDocument(this.element_);\n\n  if (this.hideOnEscape_) {\n    // Handle the escape keys.  Listen in the capture phase so that we can\n    // stop the escape key from propagating to other elements.  For example,\n    // if there is a popup within a dialog box, we want the popup to be\n    // dismissed first, rather than the dialog.\n    this.handler_.listen(\n        doc, goog.events.EventType.KEYDOWN, this.onDocumentKeyDown_, true);\n  }\n\n  // Set up event handlers.\n  if (this.autoHide_) {\n    // Even if the popup is not in the focused document, we want to\n    // close it on mousedowns in the document it's in.\n    this.handler_.listen(\n        doc, goog.events.EventType.MOUSEDOWN, this.onDocumentMouseDown_, true);\n\n    if (goog.userAgent.IE) {\n      // We want to know about deactivates/mousedowns on the document with focus\n      // The top-level document won't get a deactivate event if the focus is\n      // in an iframe and the deactivate fires within that iframe.\n      // The active element in the top-level document will remain the iframe\n      // itself.\n      var activeElement;\n\n      try {\n        activeElement = doc.activeElement;\n      } catch (e) {\n        // There is an IE browser bug which can cause just the reading of\n        // document.activeElement to throw an Unspecified Error.  This\n        // may have to do with loading a popup within a hidden iframe.\n      }\n      while (activeElement &&\n             activeElement.nodeName == goog.dom.TagName.IFRAME) {\n\n        try {\n          var tempDoc = goog.dom.getFrameContentDocument(activeElement);\n        } catch (e) {\n          // The frame is on a different domain that its parent document\n          // This way, we grab the lowest-level document object we can get\n          // a handle on given cross-domain security.\n          break;\n        }\n        doc = tempDoc;\n        activeElement = doc.activeElement;\n      }\n\n      // Handle mousedowns in the focused document in case the user clicks\n      // on the activeElement (in which case the popup should hide).\n      this.handler_.listen(\n          doc, goog.events.EventType.MOUSEDOWN, this.onDocumentMouseDown_,\n          true);\n\n      // If the active element inside the focused document changes, then\n      // we probably need to hide the popup.\n      this.handler_.listen(\n          doc, goog.events.EventType.DEACTIVATE, this.onDocumentBlur_);\n\n    } else {\n      this.handler_.listen(\n          doc, goog.events.EventType.BLUR, this.onDocumentBlur_);\n    }\n  }\n\n  // Make the popup visible.\n  if (this.type_ == goog.ui.PopupBase.Type.TOGGLE_DISPLAY) {\n    this.showPopupElement();\n  } else if (this.type_ == goog.ui.PopupBase.Type.MOVE_OFFSCREEN) {\n    this.reposition();\n  }\n  this.isVisible_ = true;\n\n  this.lastShowTime_ = goog.now();\n  this.lastHideTime_ = -1;\n\n  // If there is transition to play, we play it and fire SHOW event after\n  // the transition is over.\n  if (this.showTransition_) {\n    goog.events.listenOnce(\n        /** @type {!goog.events.EventTarget} */ (this.showTransition_),\n        goog.fx.Transition.EventType.END, this.onShow, false, this);\n    this.showTransition_.play();\n  } else {\n    // Notify derived classes and handlers.\n    this.onShow();\n  }\n};\n\n\n/**\n * Hides the popup. This call is idempotent.\n *\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @return {boolean} Whether the popup was hidden and not cancelled.\n * @private\n */\ngoog.ui.PopupBase.prototype.hide_ = function(opt_target) {\n  // Give derived classes and handlers a chance to cancel hiding.\n  if (!this.isVisible_ || !this.onBeforeHide(opt_target)) {\n    return false;\n  }\n\n  // Remove any listeners we attached when showing the popup.\n  if (this.handler_) {\n    this.handler_.removeAll();\n  }\n\n  // Set visibility to hidden even if there is a transition.\n  this.isVisible_ = false;\n  this.lastHideTime_ = goog.now();\n\n  // If there is transition to play, we play it and only hide the element\n  // (and fire HIDE event) after the transition is over.\n  if (this.hideTransition_) {\n    goog.events.listenOnce(\n        /** @type {!goog.events.EventTarget} */ (this.hideTransition_),\n        goog.fx.Transition.EventType.END,\n        goog.partial(this.continueHidingPopup_, opt_target), false, this);\n    this.hideTransition_.play();\n  } else {\n    this.continueHidingPopup_(opt_target);\n  }\n\n  return true;\n};\n\n\n/**\n * Continues hiding the popup. This is a continuation from hide_. It is\n * a separate method so that we can add a transition before hiding.\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @private\n */\ngoog.ui.PopupBase.prototype.continueHidingPopup_ = function(opt_target) {\n  // Hide the popup.\n  if (this.type_ == goog.ui.PopupBase.Type.TOGGLE_DISPLAY) {\n    if (this.shouldHideAsync_) {\n      goog.Timer.callOnce(this.hidePopupElement, 0, this);\n    } else {\n      this.hidePopupElement();\n    }\n  } else if (this.type_ == goog.ui.PopupBase.Type.MOVE_OFFSCREEN) {\n    this.moveOffscreen_();\n  }\n\n  // Notify derived classes and handlers.\n  this.onHide(opt_target);\n};\n\n\n/**\n * Shows the popup element.\n * @protected\n */\ngoog.ui.PopupBase.prototype.showPopupElement = function() {\n  this.element_.style.visibility = 'visible';\n  goog.style.setElementShown(this.element_, true);\n};\n\n\n/**\n * Hides the popup element.\n * @protected\n */\ngoog.ui.PopupBase.prototype.hidePopupElement = function() {\n  this.element_.style.visibility = 'hidden';\n  goog.style.setElementShown(this.element_, false);\n};\n\n\n/**\n * Hides the popup by moving it offscreen.\n *\n * @private\n */\ngoog.ui.PopupBase.prototype.moveOffscreen_ = function() {\n  this.element_.style.top = '-10000px';\n};\n\n\n/**\n * Called before the popup is shown. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n *\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the handlers returns false this will also return false.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onBeforeShow = function() {\n  return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW);\n};\n\n\n/**\n * Called after the popup is shown. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onShow = function() {\n  this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW);\n};\n\n\n/**\n * Called before the popup is hidden. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n *\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the handlers returns false this will also return false.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onBeforeHide = function(opt_target) {\n  return this.dispatchEvent(\n      {type: goog.ui.PopupBase.EventType.BEFORE_HIDE, target: opt_target});\n};\n\n\n/**\n * Called after the popup is hidden. Derived classes can override to hook this\n * event but should make sure to call the parent class method.\n * @param {?Node=} opt_target Target of the event causing the hide.\n * @protected\n */\ngoog.ui.PopupBase.prototype.onHide = function(opt_target) {\n  this.dispatchEvent(\n      {type: goog.ui.PopupBase.EventType.HIDE, target: opt_target});\n};\n\n\n/**\n * Mouse down handler for the document on capture phase. Used to hide the\n * popup for auto-hide mode.\n *\n * @param {goog.events.BrowserEvent} e The event object.\n * @private\n */\ngoog.ui.PopupBase.prototype.onDocumentMouseDown_ = function(e) {\n  var target = e.target;\n\n  if (!goog.dom.contains(this.element_, target) &&\n      !this.isOrWithinAutoHidePartner_(target) &&\n      this.isWithinAutoHideRegion_(target) && !this.shouldDebounce_()) {\n    // Mouse click was outside popup and partners, so hide.\n    this.hide_(target);\n  }\n};\n\n\n/**\n * Handles key-downs on the document to handle the escape key.\n *\n * @param {goog.events.BrowserEvent} e The event object.\n * @private\n */\ngoog.ui.PopupBase.prototype.onDocumentKeyDown_ = function(e) {\n  if (e.keyCode == goog.events.KeyCodes.ESC) {\n    if (this.hide_(e.target)) {\n      // Eat the escape key, but only if this popup was actually closed.\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n};\n\n\n/**\n * Deactivate handler(IE) and blur handler (other browsers) for document.\n * Used to hide the popup for auto-hide mode.\n *\n * @param {goog.events.BrowserEvent} e The event object.\n * @private\n */\ngoog.ui.PopupBase.prototype.onDocumentBlur_ = function(e) {\n  if (!this.enableCrossIframeDismissal_) {\n    return;\n  }\n\n  var doc = goog.dom.getOwnerDocument(this.element_);\n\n  // Ignore blur events if the active element is still inside the popup or if\n  // there is no longer an active element.  For example, a widget like a\n  // goog.ui.Button might programatically blur itself before losing tabIndex.\n  if (typeof document.activeElement != 'undefined') {\n    var activeElement = doc.activeElement;\n    if (!activeElement || goog.dom.contains(this.element_, activeElement) ||\n        activeElement.tagName == goog.dom.TagName.BODY) {\n      return;\n    }\n\n    // Ignore blur events not for the document itself in non-IE browsers.\n  } else if (e.target != doc) {\n    return;\n  }\n\n  // Debounce the initial focus move.\n  if (this.shouldDebounce_()) {\n    return;\n  }\n\n  this.hide_();\n};\n\n\n/**\n * @param {Node} element The element to inspect.\n * @return {boolean} Returns true if the given element is one of the auto hide\n *     partners or is a child of an auto hide partner.\n * @private\n */\ngoog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_ = function(element) {\n  return goog.array.some(this.autoHidePartners_ || [], function(partner) {\n    return element === partner || goog.dom.contains(partner, element);\n  });\n};\n\n\n/**\n * @param {Node} element The element to inspect.\n * @return {boolean} Returns true if the element is contained within\n *     the autohide region. If unset, the autohide region is the entire\n *     entire document.\n * @private\n */\ngoog.ui.PopupBase.prototype.isWithinAutoHideRegion_ = function(element) {\n  return this.autoHideRegion_ ?\n      goog.dom.contains(this.autoHideRegion_, element) :\n      true;\n};\n\n\n/**\n * @return {boolean} Whether the time since last show is less than the debounce\n *     delay.\n * @private\n */\ngoog.ui.PopupBase.prototype.shouldDebounce_ = function() {\n  return goog.now() - this.lastShowTime_ < goog.ui.PopupBase.DEBOUNCE_DELAY_MS;\n};\n\n\n/** @override */\ngoog.ui.PopupBase.prototype.disposeInternal = function() {\n  goog.ui.PopupBase.base(this, 'disposeInternal');\n  this.handler_.dispose();\n  goog.dispose(this.showTransition_);\n  goog.dispose(this.hideTransition_);\n  delete this.element_;\n  delete this.handler_;\n  delete this.autoHidePartners_;\n};\n"],
"names":["goog","provide","require","ui","PopupBase","goog.ui.PopupBase","opt_element","opt_type","events","EventTarget","call","handler_","EventHandler","setElement","setType","inherits","tagUnsealableClass","Type","TOGGLE_DISPLAY","MOVE_OFFSCREEN","prototype","element_","autoHide_","autoHidePartners_","autoHideRegion_","isVisible_","shouldHideAsync_","lastShowTime_","lastHideTime_","hideOnEscape_","enableCrossIframeDismissal_","type_","showTransition_","hideTransition_","EventType","BEFORE_SHOW","SHOW","BEFORE_HIDE","HIDE","DEBOUNCE_DELAY_MS","getType","goog.ui.PopupBase.prototype.getType","goog.ui.PopupBase.prototype.setType","type","shouldHideAsync","goog.ui.PopupBase.prototype.shouldHideAsync","setShouldHideAsync","goog.ui.PopupBase.prototype.setShouldHideAsync","b","getElement","goog.ui.PopupBase.prototype.getElement","goog.ui.PopupBase.prototype.setElement","elt","ensureNotVisible_","getAutoHide","goog.ui.PopupBase.prototype.getAutoHide","setAutoHide","goog.ui.PopupBase.prototype.setAutoHide","autoHide","addAutoHidePartner","goog.ui.PopupBase.prototype.addAutoHidePartner","partner","array","insert","removeAutoHidePartner","goog.ui.PopupBase.prototype.removeAutoHidePartner","remove","getHideOnEscape","goog.ui.PopupBase.prototype.getHideOnEscape","setHideOnEscape","goog.ui.PopupBase.prototype.setHideOnEscape","hideOnEscape","getEnableCrossIframeDismissal","goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal","setEnableCrossIframeDismissal","goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal","enable","getAutoHideRegion","goog.ui.PopupBase.prototype.getAutoHideRegion","setAutoHideRegion","goog.ui.PopupBase.prototype.setAutoHideRegion","element","setTransition","goog.ui.PopupBase.prototype.setTransition","opt_showTransition","opt_hideTransition","getLastShowTime","goog.ui.PopupBase.prototype.getLastShowTime","getLastHideTime","goog.ui.PopupBase.prototype.getLastHideTime","getHandler","goog.ui.PopupBase.prototype.getHandler","self","goog.ui.PopupBase.prototype.ensureNotVisible_","Error","isVisible","goog.ui.PopupBase.prototype.isVisible","isOrWasRecentlyVisible","goog.ui.PopupBase.prototype.isOrWasRecentlyVisible","now","setVisible","goog.ui.PopupBase.prototype.setVisible","visible","stop","show_","hide_","reposition","nullFunction","goog.ui.PopupBase.prototype.show_","onBeforeShow","doc","dom","getOwnerDocument","listen","KEYDOWN","onDocumentKeyDown_","MOUSEDOWN","onDocumentMouseDown_","userAgent","IE","activeElement","e","nodeName","TagName","IFRAME","tempDoc","getFrameContentDocument","DEACTIVATE","onDocumentBlur_","BLUR","showPopupElement","listenOnce","fx","Transition","END","onShow","play","goog.ui.PopupBase.prototype.hide_","opt_target","onBeforeHide","removeAll","partial","continueHidingPopup_","goog.ui.PopupBase.prototype.continueHidingPopup_","Timer","callOnce","hidePopupElement","moveOffscreen_","onHide","goog.ui.PopupBase.prototype.showPopupElement","style","visibility","setElementShown","goog.ui.PopupBase.prototype.hidePopupElement","goog.ui.PopupBase.prototype.moveOffscreen_","top","goog.ui.PopupBase.prototype.onBeforeShow","dispatchEvent","goog.ui.PopupBase.prototype.onShow","goog.ui.PopupBase.prototype.onBeforeHide","target","goog.ui.PopupBase.prototype.onHide","goog.ui.PopupBase.prototype.onDocumentMouseDown_","contains","isOrWithinAutoHidePartner_","isWithinAutoHideRegion_","shouldDebounce_","goog.ui.PopupBase.prototype.onDocumentKeyDown_","keyCode","KeyCodes","ESC","preventDefault","stopPropagation","goog.ui.PopupBase.prototype.onDocumentBlur_","document","tagName","BODY","goog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_","some","goog.ui.PopupBase.prototype.isWithinAutoHideRegion_","goog.ui.PopupBase.prototype.shouldDebounce_","disposeInternal","goog.ui.PopupBase.prototype.disposeInternal","base","dispose"]
}
