{"version":3,"sources":["webapp/shared_ui/header.cljs"],"mappings":"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","names":["webapp.shared-ui.header/dropdown-list","re-frame.core/dispatch","webapp.shared-ui.header/resources","webapp.shared-ui.header/toggle-dropdown","status","cljs.core/not","js/webapp","js/webapp.shared-ui","js/webapp.shared-ui.header","js/webapp.shared-ui.header.dropdown-status","webapp.shared-ui.header/dropdown-status","reagent.core.atom","webapp.shared-ui.header/dropdown","cljs.core/deref","webapp.components.popover/right","webapp.shared-ui.header/navigation","user","p1__30186#","cljs.core/some","cljs.core._EQ_","active-page","js/window","_","re_frame.core.subscribe","iter__4652__auto__","s__30190","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__30193","cljs.core/chunk-buffer","i__30191","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__30187","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","item","js/webapp.shared-ui.header.quickstart-link","method-table__4747__auto__","cljs.core.atom","prefer-table__4748__auto__","method-cache__4749__auto__","cached-hierarchy__4750__auto__","hierarchy__4751__auto__","cljs.core.get","fexpr__30202","cljs.core/MultiFn","cljs.core.symbol","webapp.shared-ui.header/quickstart-link","cljs.core/identity","webapp.shared-ui.header/header","admin?","cljs.core.partial","cljs.core/=","cljs.core/reset!","cljs.core/chunk-first"],"sourcesContent":["(ns webapp.shared-ui.header\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [webapp.components.popover :as popover]\n            [webapp.events :as events]\n            [webapp.subs :as subs]))\n\n(defn dropdown-list []\n  [:ul.w-36\n   [:li.py-small.px-regular.border-b\n    [:a.text-gray-700.text-sm\n     {:href \"/settings\"\n      :on-click #(rf/dispatch [:navigate :settings])}\n     :Settings]]\n   [:li.py-small.px-regular\n    [:a.text-red-600.text-sm\n     {:href \"#\"\n      :on-click #(rf/dispatch [:logout])}\n     \"Log out\"]]])\n\n(def ^:private resources\n  [{:text \"tasks\" :uri \"/tasks\"}\n   {:text \"targets\" :uri \"/targets\"}\n   {:text \"users\" :uri \"/users\"}\n   {:text \"agents\" :uri \"/agents\"}])\n\n(defn toggle-dropdown [status] (not status))\n\n(defonce dropdown-status (r/atom false))\n(defn- dropdown []\n  [:div.relative.flex.items-center\n   (popover/right {:open @dropdown-status :component (dropdown-list)})\n   [:figure.w-5\n    [:img {:src \"/icons/icon-cheveron-down.svg\"}]]])\n\n(defn- navigation [user]\n  (when (some #(= \"admin\" %) (:groups user))\n    (let [active-page (.. js/window -location -pathname)\n          _ @(rf/subscribe [::subs/active-panel])]\n      [:nav.antialiased\n       (for [item resources]\n         [:a.text-sm.pr-regular.transition.hover:text-magenta\n          {:href (:uri item)\n           :key (:text item)\n           :class (if (= active-page (:uri item)) \"text-black underline\" \"text-gray-500\")}\n          (:text item)])])))\n\n(defmulti quickstart-link identity)\n(defmethod quickstart-link :not-admin [_]\n  nil)\n(defmethod quickstart-link :admin [_]\n  [:a.text-xs.font-semibold.pr-regular.transition.hover:text-black\n   {:href \"/quickstarts\"\n    :key \"Quickstarts\"\n    :class \"text-gray-500\"}\n   \"quickstarts\"])\n\n(defn header []\n  (let [user @(rf/subscribe [::subs/user])\n        admin? (some (partial = \"admin\") (:groups user))]\n    (when (not user) (rf/dispatch [::events/get-user]))\n    [:header\n     {:class (str \"w-full min-w-app__container \"\n                  \"bg-white shadow \"\n                  \"py-small px-large mb-regular \")}\n     [:div.flex.flex-cols-2.items-center\n      [:div.flex.flex-grow.gap-regular.items-center\n       [:figure\n        {:class \"w-24 px-small cursor-pointer\"}\n        [:img\n         {:src \"/images/Runops_Logo_Runops_Logo_Preto.png\"\n          :on-click #(rf/dispatch [:navigate :home])}]]\n       [navigation user]]\n      (if admin?\n        (quickstart-link :admin)\n        (quickstart-link :not-admin))\n      [:div.flex.flex-shrink.flex-row-reverse.items-center.cursor-pointer\n       {:on-click #(reset! dropdown-status (not @dropdown-status))}\n       (dropdown)\n       [:span.text-xs.font-semibold.text-black (:name user)]]]]))\n"]}