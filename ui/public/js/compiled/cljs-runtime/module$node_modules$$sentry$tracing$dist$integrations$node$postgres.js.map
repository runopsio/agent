{
"version":3,
"file":"module$node_modules$$sentry$tracing$dist$integrations$node$postgres.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/@sentry/tracing/dist/integrations/node/postgres.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$tracing$dist$integrations$node$postgres\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"@sentry/utils\");\n/** Tracing integration for node-postgres package */\nvar Postgres = /** @class */ (function () {\n    function Postgres(options) {\n        if (options === void 0) { options = {}; }\n        /**\n         * @inheritDoc\n         */\n        this.name = Postgres.id;\n        this._usePgNative = !!options.usePgNative;\n    }\n    /**\n     * @inheritDoc\n     */\n    Postgres.prototype.setupOnce = function (_, getCurrentHub) {\n        var _a;\n        var pkg = utils_1.loadModule('pg');\n        if (!pkg) {\n            utils_1.logger.error('Postgres Integration was unable to require `pg` package.');\n            return;\n        }\n        if (this._usePgNative && !((_a = pkg.native) === null || _a === void 0 ? void 0 : _a.Client)) {\n            utils_1.logger.error(\"Postgres Integration was unable to access 'pg-native' bindings.\");\n            return;\n        }\n        var Client = (this._usePgNative ? pkg.native : pkg).Client;\n        /**\n         * function (query, callback) => void\n         * function (query, params, callback) => void\n         * function (query) => Promise\n         * function (query, params) => Promise\n         * function (pg.Cursor) => pg.Cursor\n         */\n        utils_1.fill(Client.prototype, 'query', function (orig) {\n            return function (config, values, callback) {\n                var _a, _b, _c;\n                var scope = getCurrentHub().getScope();\n                var parentSpan = (_a = scope) === null || _a === void 0 ? void 0 : _a.getSpan();\n                var span = (_b = parentSpan) === null || _b === void 0 ? void 0 : _b.startChild({\n                    description: typeof config === 'string' ? config : config.text,\n                    op: \"db\",\n                });\n                if (typeof callback === 'function') {\n                    return orig.call(this, config, values, function (err, result) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        callback(err, result);\n                    });\n                }\n                if (typeof values === 'function') {\n                    return orig.call(this, config, function (err, result) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        values(err, result);\n                    });\n                }\n                var rv = typeof values !== 'undefined' ? orig.call(this, config, values) : orig.call(this, config);\n                if (utils_1.isThenable(rv)) {\n                    return rv.then(function (res) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        return res;\n                    });\n                }\n                (_c = span) === null || _c === void 0 ? void 0 : _c.finish();\n                return rv;\n            };\n        });\n    };\n    /**\n     * @inheritDoc\n     */\n    Postgres.id = 'Postgres';\n    return Postgres;\n}());\nexports.Postgres = Postgres;\n//# sourceMappingURL=postgres.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","utils_1","Postgres","options","name","id","_usePgNative","usePgNative","prototype","setupOnce","Postgres.prototype.setupOnce","_","getCurrentHub","_a","pkg","loadModule","native","Client","fill","orig","config","values","callback","_b","span","parentSpan","getScope","scope","getSpan","startChild","description","text","op","call","err","result","finish","rv","isThenable","then","res","logger","error"]
}
