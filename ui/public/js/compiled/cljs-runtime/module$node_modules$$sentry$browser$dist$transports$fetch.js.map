{
"version":3,
"file":"module$node_modules$$sentry$browser$dist$transports$fetch.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@sentry/browser/dist/transports/fetch.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$browser$dist$transports$fetch\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"@sentry/core\");\nvar types_1 = require(\"@sentry/types\");\nvar utils_1 = require(\"@sentry/utils\");\nvar base_1 = require(\"./base\");\nvar utils_2 = require(\"./utils\");\n/** `fetch` based transport */\nvar FetchTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(FetchTransport, _super);\n    function FetchTransport(options, fetchImpl) {\n        if (fetchImpl === void 0) { fetchImpl = utils_2.getNativeFetchImplementation(); }\n        var _this = _super.call(this, options) || this;\n        _this._fetch = fetchImpl;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    FetchTransport.prototype.sendEvent = function (event) {\n        return this._sendRequest(core_1.eventToSentryRequest(event, this._api), event);\n    };\n    /**\n     * @inheritDoc\n     */\n    FetchTransport.prototype.sendSession = function (session) {\n        return this._sendRequest(core_1.sessionToSentryRequest(session, this._api), session);\n    };\n    /**\n     * @param sentryRequest Prepared SentryRequest to be delivered\n     * @param originalPayload Original payload used to create SentryRequest\n     */\n    FetchTransport.prototype._sendRequest = function (sentryRequest, originalPayload) {\n        var _this = this;\n        if (this._isRateLimited(sentryRequest.type)) {\n            this.recordLostEvent(types_1.Outcome.RateLimitBackoff, sentryRequest.type);\n            return Promise.reject({\n                event: originalPayload,\n                type: sentryRequest.type,\n                reason: \"Transport for \" + sentryRequest.type + \" requests locked till \" + this._disabledUntil(sentryRequest.type) + \" due to too many requests.\",\n                status: 429,\n            });\n        }\n        var options = {\n            body: sentryRequest.body,\n            method: 'POST',\n            // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default\n            // https://caniuse.com/#feat=referrer-policy\n            // It doesn't. And it throw exception instead of ignoring this parameter...\n            // REF: https://github.com/getsentry/raven-js/issues/1233\n            referrerPolicy: (utils_1.supportsReferrerPolicy() ? 'origin' : ''),\n        };\n        if (this.options.fetchParameters !== undefined) {\n            Object.assign(options, this.options.fetchParameters);\n        }\n        if (this.options.headers !== undefined) {\n            options.headers = this.options.headers;\n        }\n        return this._buffer\n            .add(function () {\n            return new utils_1.SyncPromise(function (resolve, reject) {\n                void _this._fetch(sentryRequest.url, options)\n                    .then(function (response) {\n                    var headers = {\n                        'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n                        'retry-after': response.headers.get('Retry-After'),\n                    };\n                    _this._handleResponse({\n                        requestType: sentryRequest.type,\n                        response: response,\n                        headers: headers,\n                        resolve: resolve,\n                        reject: reject,\n                    });\n                })\n                    .catch(reject);\n            });\n        })\n            .then(undefined, function (reason) {\n            // It's either buffer rejection or any other xhr/fetch error, which are treated as NetworkError.\n            if (reason instanceof utils_1.SentryError) {\n                _this.recordLostEvent(types_1.Outcome.QueueOverflow, sentryRequest.type);\n            }\n            else {\n                _this.recordLostEvent(types_1.Outcome.NetworkError, sentryRequest.type);\n            }\n            throw reason;\n        });\n    };\n    return FetchTransport;\n}(base_1.BaseTransport));\nexports.FetchTransport = FetchTransport;\n//# sourceMappingURL=fetch.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","core_1","types_1","utils_1","base_1","utils_2","FetchTransport","_super","options","fetchImpl","getNativeFetchImplementation","_this","call","_fetch","__extends","prototype","sendEvent","FetchTransport.prototype.sendEvent","event","_sendRequest","eventToSentryRequest","_api","sendSession","FetchTransport.prototype.sendSession","session","sessionToSentryRequest","FetchTransport.prototype._sendRequest","sentryRequest","originalPayload","_isRateLimited","type","recordLostEvent","Outcome","RateLimitBackoff","Promise","reject","reason","_disabledUntil","status","body","method","referrerPolicy","supportsReferrerPolicy","undefined","fetchParameters","assign","headers","_buffer","add","SyncPromise","resolve","url","then","response","get","_handleResponse","requestType","catch","SentryError","QueueOverflow","NetworkError","BaseTransport"]
}
