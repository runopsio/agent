shadow$provide.module$node_modules$$sentry$hub$dist$session=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var types_1=require("module$node_modules$$sentry$types$dist$index"),utils_1=require("module$node_modules$$sentry$utils$dist$index");global=function(){function Session(context){this.errors=0;this.sid=utils_1.uuid4();this.duration=0;this.status=types_1.SessionStatus.Ok;this.init=!0;this.ignoreDuration=!1;var startingTime=utils_1.timestampInSeconds();
this.started=this.timestamp=startingTime;context&&this.update(context)}Session.prototype.update=function(context){void 0===context&&(context={});context.user&&(!this.ipAddress&&context.user.ip_address&&(this.ipAddress=context.user.ip_address),this.did||context.did||(this.did=context.user.id||context.user.email||context.user.username));this.timestamp=context.timestamp||utils_1.timestampInSeconds();context.ignoreDuration&&(this.ignoreDuration=context.ignoreDuration);context.sid&&(this.sid=32===context.sid.length?
context.sid:utils_1.uuid4());void 0!==context.init&&(this.init=context.init);!this.did&&context.did&&(this.did=""+context.did);"number"===typeof context.started&&(this.started=context.started);if(this.ignoreDuration)this.duration=void 0;else if("number"===typeof context.duration)this.duration=context.duration;else{var duration=this.timestamp-this.started;this.duration=0<=duration?duration:0}context.release&&(this.release=context.release);context.environment&&(this.environment=context.environment);
!this.ipAddress&&context.ipAddress&&(this.ipAddress=context.ipAddress);!this.userAgent&&context.userAgent&&(this.userAgent=context.userAgent);"number"===typeof context.errors&&(this.errors=context.errors);context.status&&(this.status=context.status)};Session.prototype.close=function(status){status?this.update({status}):this.status===types_1.SessionStatus.Ok?this.update({status:types_1.SessionStatus.Exited}):this.update()};Session.prototype.toJSON=function(){return utils_1.dropUndefinedKeys({sid:""+
this.sid,init:this.init,started:(new Date(1E3*this.started)).toISOString(),timestamp:(new Date(1E3*this.timestamp)).toISOString(),status:this.status,errors:this.errors,did:"number"===typeof this.did||"string"===typeof this.did?""+this.did:void 0,duration:this.duration,attrs:utils_1.dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})};return Session}();exports.Session=global}
//# sourceMappingURL=module$node_modules$$sentry$hub$dist$session.js.map
