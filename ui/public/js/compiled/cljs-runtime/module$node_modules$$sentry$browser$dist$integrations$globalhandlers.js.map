{
"version":3,
"file":"module$node_modules$$sentry$browser$dist$integrations$globalhandlers.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@sentry/browser/dist/integrations/globalhandlers.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$browser$dist$integrations$globalhandlers\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nvar core_1 = require(\"@sentry/core\");\nvar types_1 = require(\"@sentry/types\");\nvar utils_1 = require(\"@sentry/utils\");\nvar eventbuilder_1 = require(\"../eventbuilder\");\nvar helpers_1 = require(\"../helpers\");\n/** Global handlers */\nvar GlobalHandlers = /** @class */ (function () {\n    /** JSDoc */\n    function GlobalHandlers(options) {\n        /**\n         * @inheritDoc\n         */\n        this.name = GlobalHandlers.id;\n        /** JSDoc */\n        this._onErrorHandlerInstalled = false;\n        /** JSDoc */\n        this._onUnhandledRejectionHandlerInstalled = false;\n        this._options = tslib_1.__assign({ onerror: true, onunhandledrejection: true }, options);\n    }\n    /**\n     * @inheritDoc\n     */\n    GlobalHandlers.prototype.setupOnce = function () {\n        Error.stackTraceLimit = 50;\n        if (this._options.onerror) {\n            utils_1.logger.log('Global Handler attached: onerror');\n            this._installGlobalOnErrorHandler();\n        }\n        if (this._options.onunhandledrejection) {\n            utils_1.logger.log('Global Handler attached: onunhandledrejection');\n            this._installGlobalOnUnhandledRejectionHandler();\n        }\n    };\n    /** JSDoc */\n    GlobalHandlers.prototype._installGlobalOnErrorHandler = function () {\n        var _this = this;\n        if (this._onErrorHandlerInstalled) {\n            return;\n        }\n        utils_1.addInstrumentationHandler({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            callback: function (data) {\n                var error = data.error;\n                var currentHub = core_1.getCurrentHub();\n                var hasIntegration = currentHub.getIntegration(GlobalHandlers);\n                var isFailedOwnDelivery = error && error.__sentry_own_request__ === true;\n                if (!hasIntegration || helpers_1.shouldIgnoreOnError() || isFailedOwnDelivery) {\n                    return;\n                }\n                var client = currentHub.getClient();\n                var event = error === undefined && utils_1.isString(data.msg)\n                    ? _this._eventFromIncompleteOnError(data.msg, data.url, data.line, data.column)\n                    : _this._enhanceEventWithInitialFrame(eventbuilder_1.eventFromUnknownInput(error || data.msg, undefined, {\n                        attachStacktrace: client && client.getOptions().attachStacktrace,\n                        rejection: false,\n                    }), data.url, data.line, data.column);\n                utils_1.addExceptionMechanism(event, {\n                    handled: false,\n                    type: 'onerror',\n                });\n                currentHub.captureEvent(event, {\n                    originalException: error,\n                });\n            },\n            type: 'error',\n        });\n        this._onErrorHandlerInstalled = true;\n    };\n    /** JSDoc */\n    GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler = function () {\n        var _this = this;\n        if (this._onUnhandledRejectionHandlerInstalled) {\n            return;\n        }\n        utils_1.addInstrumentationHandler({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            callback: function (e) {\n                var error = e;\n                // dig the object of the rejection out of known event types\n                try {\n                    // PromiseRejectionEvents store the object of the rejection under 'reason'\n                    // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n                    if ('reason' in e) {\n                        error = e.reason;\n                    }\n                    // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents\n                    // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into\n                    // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec\n                    // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and\n                    // https://github.com/getsentry/sentry-javascript/issues/2380\n                    else if ('detail' in e && 'reason' in e.detail) {\n                        error = e.detail.reason;\n                    }\n                }\n                catch (_oO) {\n                    // no-empty\n                }\n                var currentHub = core_1.getCurrentHub();\n                var hasIntegration = currentHub.getIntegration(GlobalHandlers);\n                var isFailedOwnDelivery = error && error.__sentry_own_request__ === true;\n                if (!hasIntegration || helpers_1.shouldIgnoreOnError() || isFailedOwnDelivery) {\n                    return true;\n                }\n                var client = currentHub.getClient();\n                var event = utils_1.isPrimitive(error)\n                    ? _this._eventFromRejectionWithPrimitive(error)\n                    : eventbuilder_1.eventFromUnknownInput(error, undefined, {\n                        attachStacktrace: client && client.getOptions().attachStacktrace,\n                        rejection: true,\n                    });\n                event.level = types_1.Severity.Error;\n                utils_1.addExceptionMechanism(event, {\n                    handled: false,\n                    type: 'onunhandledrejection',\n                });\n                currentHub.captureEvent(event, {\n                    originalException: error,\n                });\n                return;\n            },\n            type: 'unhandledrejection',\n        });\n        this._onUnhandledRejectionHandlerInstalled = true;\n    };\n    /**\n     * This function creates a stack from an old, error-less onerror handler.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    GlobalHandlers.prototype._eventFromIncompleteOnError = function (msg, url, line, column) {\n        var ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n        // If 'message' is ErrorEvent, get real message from inside\n        var message = utils_1.isErrorEvent(msg) ? msg.message : msg;\n        var name;\n        var groups = message.match(ERROR_TYPES_RE);\n        if (groups) {\n            name = groups[1];\n            message = groups[2];\n        }\n        var event = {\n            exception: {\n                values: [\n                    {\n                        type: name || 'Error',\n                        value: message,\n                    },\n                ],\n            },\n        };\n        return this._enhanceEventWithInitialFrame(event, url, line, column);\n    };\n    /**\n     * Create an event from a promise rejection where the `reason` is a primitive.\n     *\n     * @param reason: The `reason` property of the promise rejection\n     * @returns An Event object with an appropriate `exception` value\n     */\n    GlobalHandlers.prototype._eventFromRejectionWithPrimitive = function (reason) {\n        return {\n            exception: {\n                values: [\n                    {\n                        type: 'UnhandledRejection',\n                        // String() is needed because the Primitive type includes symbols (which can't be automatically stringified)\n                        value: \"Non-Error promise rejection captured with value: \" + String(reason),\n                    },\n                ],\n            },\n        };\n    };\n    /** JSDoc */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    GlobalHandlers.prototype._enhanceEventWithInitialFrame = function (event, url, line, column) {\n        event.exception = event.exception || {};\n        event.exception.values = event.exception.values || [];\n        event.exception.values[0] = event.exception.values[0] || {};\n        event.exception.values[0].stacktrace = event.exception.values[0].stacktrace || {};\n        event.exception.values[0].stacktrace.frames = event.exception.values[0].stacktrace.frames || [];\n        var colno = isNaN(parseInt(column, 10)) ? undefined : column;\n        var lineno = isNaN(parseInt(line, 10)) ? undefined : line;\n        var filename = utils_1.isString(url) && url.length > 0 ? url : utils_1.getLocationHref();\n        if (event.exception.values[0].stacktrace.frames.length === 0) {\n            event.exception.values[0].stacktrace.frames.push({\n                colno: colno,\n                filename: filename,\n                function: '?',\n                in_app: true,\n                lineno: lineno,\n            });\n        }\n        return event;\n    };\n    /**\n     * @inheritDoc\n     */\n    GlobalHandlers.id = 'GlobalHandlers';\n    return GlobalHandlers;\n}());\nexports.GlobalHandlers = GlobalHandlers;\n//# sourceMappingURL=globalhandlers.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","core_1","types_1","utils_1","eventbuilder_1","helpers_1","GlobalHandlers","options","name","id","_onUnhandledRejectionHandlerInstalled","_onErrorHandlerInstalled","_options","__assign","onerror","onunhandledrejection","prototype","setupOnce","GlobalHandlers.prototype.setupOnce","Error","stackTraceLimit","logger","log","_installGlobalOnErrorHandler","_installGlobalOnUnhandledRejectionHandler","GlobalHandlers.prototype._installGlobalOnErrorHandler","_this","addInstrumentationHandler","callback","data","error","currentHub","getCurrentHub","hasIntegration","getIntegration","isFailedOwnDelivery","__sentry_own_request__","shouldIgnoreOnError","client","getClient","event","undefined","isString","msg","_eventFromIncompleteOnError","url","line","column","_enhanceEventWithInitialFrame","eventFromUnknownInput","attachStacktrace","getOptions","rejection","addExceptionMechanism","handled","type","captureEvent","originalException","GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler","e","reason","detail","_oO","isPrimitive","_eventFromRejectionWithPrimitive","level","Severity","GlobalHandlers.prototype._eventFromIncompleteOnError","message","isErrorEvent","groups","match","ERROR_TYPES_RE","exception","values","GlobalHandlers.prototype._eventFromRejectionWithPrimitive","String","GlobalHandlers.prototype._enhanceEventWithInitialFrame","stacktrace","frames","colno","isNaN","parseInt","lineno","filename","length","getLocationHref","push","function","in_app"]
}
