{
"version":3,
"file":"goog.ui.registry.js",
"lineCount":60,
"mappings":"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",
"sources":["goog/ui/registry.js"],
"sourcesContent":["// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Global renderer and decorator registry.\n * @author attila@google.com (Attila Bodis)\n */\n\ngoog.provide('goog.ui.registry');\n\ngoog.forwardDeclare('goog.ui.Component');\ngoog.forwardDeclare('goog.ui.ControlRenderer');\ngoog.require('goog.asserts');\ngoog.require('goog.dom.classlist');\n\n\n/**\n * Given a {@link goog.ui.Component} constructor, returns an instance of its\n * default renderer.  If the default renderer is a singleton, returns the\n * singleton instance; otherwise returns a new instance of the renderer class.\n * @param {Function} componentCtor Component constructor function (for example\n *     `goog.ui.Button`).\n * @return {goog.ui.ControlRenderer?} Renderer instance (for example the\n *     singleton instance of `goog.ui.ButtonRenderer`), or null if\n *     no default renderer was found.\n */\ngoog.ui.registry.getDefaultRenderer = function(componentCtor) {\n  // TODO(b/141512323): This should probably be implemented with a `WeakMap`.\n  // Locate the default renderer based on the constructor's unique ID.  If no\n  // renderer is registered for this class, walk up the superClass_ chain.\n  var key;\n  /** @type {Function|undefined} */ var rendererCtor;\n  while (componentCtor) {\n    key = goog.getUid(componentCtor);\n    if ((rendererCtor = goog.ui.registry.defaultRenderers_[key])) {\n      break;\n    }\n    componentCtor = componentCtor.superClass_ ?\n        componentCtor.superClass_.constructor :\n        null;\n  }\n\n  // If the renderer has a static getInstance method, return the singleton\n  // instance; otherwise create and return a new instance.\n  if (rendererCtor) {\n    return goog.isFunction(rendererCtor.getInstance) ?\n        rendererCtor.getInstance() :\n        new rendererCtor();\n  }\n\n  return null;\n};\n\n\n/**\n * Sets the default renderer for the given {@link goog.ui.Component}\n * constructor.\n * @param {Function} componentCtor Component constructor function (for example\n *     `goog.ui.Button`).\n * @param {Function} rendererCtor Renderer constructor function (for example\n *     `goog.ui.ButtonRenderer`).\n * @throws {Error} If the arguments aren't functions.\n */\ngoog.ui.registry.setDefaultRenderer = function(componentCtor, rendererCtor) {\n  // In this case, explicit validation has negligible overhead (since each\n  // renderer is only registered once), and helps catch subtle bugs.\n  if (!goog.isFunction(componentCtor)) {\n    throw new Error('Invalid component class ' + componentCtor);\n  }\n  if (!goog.isFunction(rendererCtor)) {\n    throw new Error('Invalid renderer class ' + rendererCtor);\n  }\n\n  // Map the component constructor's unique ID to the renderer constructor.\n  var key = goog.getUid(componentCtor);\n  goog.ui.registry.defaultRenderers_[key] = rendererCtor;\n};\n\n\n/**\n * Returns the {@link goog.ui.Component} instance created by the decorator\n * factory function registered for the given CSS class name, or null if no\n * decorator factory function was found.\n * @param {string} className CSS class name.\n * @return {goog.ui.Component?} Component instance.\n */\ngoog.ui.registry.getDecoratorByClassName = function(className) {\n  return className in goog.ui.registry.decoratorFunctions_ ?\n      goog.ui.registry.decoratorFunctions_[className]() :\n      null;\n};\n\n\n/**\n * Maps a CSS class name to a function that returns a new instance of\n * {@link goog.ui.Component} or a subclass, suitable to decorate an element\n * that has the specified CSS class.\n * @param {string} className CSS class name.\n * @param {Function} decoratorFn No-argument function that returns a new\n *     instance of a {@link goog.ui.Component} to decorate an element.\n * @throws {Error} If the class name or the decorator function is invalid.\n */\ngoog.ui.registry.setDecoratorByClassName = function(className, decoratorFn) {\n  // In this case, explicit validation has negligible overhead (since each\n  // decorator  is only registered once), and helps catch subtle bugs.\n  if (!className) {\n    throw new Error('Invalid class name ' + className);\n  }\n  if (!goog.isFunction(decoratorFn)) {\n    throw new Error('Invalid decorator function ' + decoratorFn);\n  }\n\n  goog.ui.registry.decoratorFunctions_[className] = decoratorFn;\n};\n\n\n/**\n * Returns an instance of {@link goog.ui.Component} or a subclass suitable to\n * decorate the given element, based on its CSS class.\n *\n * TODO(nnaze): Type of element should be {!Element}.\n *\n * @param {Element} element Element to decorate.\n * @return {goog.ui.Component?} Component to decorate the element (null if\n *     none).\n */\ngoog.ui.registry.getDecorator = function(element) {\n  var decorator;\n  goog.asserts.assert(element);\n  var classNames = goog.dom.classlist.get(element);\n  for (var i = 0, len = classNames.length; i < len; i++) {\n    if ((decorator = goog.ui.registry.getDecoratorByClassName(classNames[i]))) {\n      return decorator;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Resets the global renderer and decorator registry.\n */\ngoog.ui.registry.reset = function() {\n  goog.ui.registry.defaultRenderers_ = {};\n  goog.ui.registry.decoratorFunctions_ = {};\n};\n\n\n/**\n * Map of {@link goog.ui.Component} constructor unique IDs to the constructors\n * of their default {@link goog.ui.Renderer}s.\n * @type {Object}\n * @private\n */\ngoog.ui.registry.defaultRenderers_ = {};\n\n\n/**\n * Map of CSS class names to registry factory functions.  The keys are\n * class names.  The values are function objects that return new instances\n * of {@link goog.ui.registry} or one of its subclasses, suitable to\n * decorate elements marked with the corresponding CSS class.  Used by\n * containers while decorating their children.\n * @type {Object}\n * @private\n */\ngoog.ui.registry.decoratorFunctions_ = {};\n"],
"names":["goog","provide","forwardDeclare","require","ui","registry","getDefaultRenderer","goog.ui.registry.getDefaultRenderer","componentCtor","key","rendererCtor","getUid","defaultRenderers_","superClass_","constructor","isFunction","getInstance","setDefaultRenderer","goog.ui.registry.setDefaultRenderer","Error","getDecoratorByClassName","goog.ui.registry.getDecoratorByClassName","className","decoratorFunctions_","setDecoratorByClassName","goog.ui.registry.setDecoratorByClassName","decoratorFn","getDecorator","goog.ui.registry.getDecorator","element","decorator","asserts","assert","classNames","dom","classlist","get","i","len","length","reset","goog.ui.registry.reset"]
}
