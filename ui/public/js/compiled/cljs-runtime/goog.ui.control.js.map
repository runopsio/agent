{
"version":3,
"file":"goog.ui.control.js",
"lineCount":541,
"mappings":"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",
"sources":["goog/ui/control.js"],
"sourcesContent":["// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Base class for UI controls such as buttons, menus, menu items,\n * toolbar buttons, etc.  The implementation is based on a generalized version\n * of {@link goog.ui.MenuItem}.\n * TODO(attila):  If the renderer framework works well, pull it into Component.\n *\n * @author attila@google.com (Attila Bodis)\n * @see ../demos/control.html\n * @see http://code.google.com/p/closure-library/wiki/IntroToControls\n */\n\ngoog.provide('goog.ui.Control');\n\ngoog.require('goog.Disposable');\ngoog.require('goog.array');\ngoog.require('goog.dom');\ngoog.require('goog.events.BrowserEvent');\ngoog.require('goog.events.Event');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.KeyCodes');\ngoog.require('goog.events.KeyHandler');\ngoog.require('goog.string');\ngoog.require('goog.ui.Component');\ngoog.require('goog.ui.ComponentUtil');\n/** @suppress {extraRequire} */\ngoog.require('goog.ui.ControlContent');\ngoog.require('goog.ui.ControlRenderer');\ngoog.require('goog.ui.registry');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * Base class for UI controls.  Extends {@link goog.ui.Component} by adding\n * the following:\n *  <ul>\n *    <li>a {@link goog.events.KeyHandler}, to simplify keyboard handling,\n *    <li>a pluggable <em>renderer</em> framework, to simplify the creation of\n *        simple controls without the need to subclass this class,\n *    <li>the notion of component <em>content</em>, like a text caption or DOM\n *        structure displayed in the component (e.g. a button label),\n *    <li>getter and setter for component content, as well as a getter and\n *        setter specifically for caption text (for convenience),\n *    <li>support for hiding/showing the component,\n      <li>fine-grained control over supported states and state transition\n          events, and\n *    <li>default mouse and keyboard event handling.\n *  </ul>\n * This class has sufficient built-in functionality for most simple UI controls.\n * All controls dispatch SHOW, HIDE, ENTER, LEAVE, and ACTION events on show,\n * hide, mouseover, mouseout, and user action, respectively.  Additional states\n * are also supported.  See closure/demos/control.html\n * for example usage.\n * @param {goog.ui.ControlContent=} opt_content Text caption or DOM structure\n *     to display as the content of the control (if any).\n * @param {goog.ui.ControlRenderer=} opt_renderer Renderer used to render or\n *     decorate the component; defaults to {@link goog.ui.ControlRenderer}.\n * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM helper, used for\n *     document interaction.\n * @constructor\n * @extends {goog.ui.Component}\n */\ngoog.ui.Control = function(opt_content, opt_renderer, opt_domHelper) {\n  goog.ui.Component.call(this, opt_domHelper);\n  this.renderer_ =\n      opt_renderer || goog.ui.registry.getDefaultRenderer(this.constructor);\n  this.setContentInternal(opt_content !== undefined ? opt_content : null);\n\n  /** @private {?string} The control's aria-label. */\n  this.ariaLabel_ = null;\n\n  /** @private {goog.ui.Control.IeMouseEventSequenceSimulator_} */\n  this.ieMouseEventSequenceSimulator_;\n};\ngoog.inherits(goog.ui.Control, goog.ui.Component);\ngoog.tagUnsealableClass(goog.ui.Control);\n\n\n// Renderer registry.\n// TODO(attila): Refactor existing usages inside Google in a follow-up CL.\n\n\n/**\n * Maps a CSS class name to a function that returns a new instance of\n * {@link goog.ui.Control} or a subclass thereof, suitable to decorate\n * an element that has the specified CSS class.  UI components that extend\n * {@link goog.ui.Control} and want {@link goog.ui.Container}s to be able\n * to discover and decorate elements using them should register a factory\n * function via this API.\n * @param {string} className CSS class name.\n * @param {Function} decoratorFunction Function that takes no arguments and\n *     returns a new instance of a control to decorate an element with the\n *     given class.\n * @deprecated Use {@link goog.ui.registry.setDecoratorByClassName} instead.\n */\ngoog.ui.Control.registerDecorator = goog.ui.registry.setDecoratorByClassName;\n\n\n/**\n * Takes an element and returns a new instance of {@link goog.ui.Control}\n * or a subclass, suitable to decorate it (based on the element's CSS class).\n * @param {Element} element Element to decorate.\n * @return {goog.ui.Control?} New control instance to decorate the element\n *     (null if none).\n * @deprecated Use {@link goog.ui.registry.getDecorator} instead.\n */\ngoog.ui.Control.getDecorator =\n    /** @type {function(Element): goog.ui.Control} */ (\n        goog.ui.registry.getDecorator);\n\n\n/**\n * Renderer associated with the component.\n * @type {goog.ui.ControlRenderer|undefined}\n * @private\n */\ngoog.ui.Control.prototype.renderer_;\n\n\n/**\n * Text caption or DOM structure displayed in the component.\n * @type {?goog.ui.ControlContent}\n * @private\n */\ngoog.ui.Control.prototype.content_ = null;\n\n\n/**\n * Current component state; a bit mask of {@link goog.ui.Component.State}s.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.state_ = 0x00;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s this component supports.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.supportedStates_ = goog.ui.Component.State.DISABLED |\n    goog.ui.Component.State.HOVER | goog.ui.Component.State.ACTIVE |\n    goog.ui.Component.State.FOCUSED;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s for which this component\n * provides default event handling.  For example, a component that handles\n * the HOVER state automatically will highlight itself on mouseover, whereas\n * a component that doesn't handle HOVER automatically will only dispatch\n * ENTER and LEAVE events but not call {@link setHighlighted} on itself.\n * By default, components provide default event handling for all states.\n * Controls hosted in containers (e.g. menu items in a menu, or buttons in a\n * toolbar) will typically want to have their container manage their highlight\n * state.  Selectable controls managed by a selection model will also typically\n * want their selection state to be managed by the model.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.autoStates_ = goog.ui.Component.State.ALL;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s for which this component\n * dispatches state transition events.  Because events are expensive, the\n * default behavior is to not dispatch any state transition events at all.\n * Use the {@link #setDispatchTransitionEvents} API to request transition\n * events  as needed.  Subclasses may enable transition events by default.\n * Controls hosted in containers or managed by a selection model will typically\n * want to dispatch transition events.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.statesWithTransitionEvents_ = 0x00;\n\n\n/**\n * Component visibility.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.visible_ = true;\n\n\n/**\n * Keyboard event handler.\n * @type {goog.events.KeyHandler}\n * @private\n */\ngoog.ui.Control.prototype.keyHandler_;\n\n\n/**\n * Additional class name(s) to apply to the control's root element, if any.\n * @type {Array<string>?}\n * @private\n */\ngoog.ui.Control.prototype.extraClassNames_ = null;\n\n\n/**\n * Whether the control should listen for and handle mouse events; defaults to\n * true.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.handleMouseEvents_ = true;\n\n\n/**\n * Whether the control allows text selection within its DOM.  Defaults to false.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.allowTextSelection_ = false;\n\n\n/**\n * The control's preferred ARIA role.\n * @type {?goog.a11y.aria.Role}\n * @private\n */\ngoog.ui.Control.prototype.preferredAriaRole_ = null;\n\n\n// Event handler and renderer management.\n\n\n/**\n * Returns true if the control is configured to handle its own mouse events,\n * false otherwise.  Controls not hosted in {@link goog.ui.Container}s have\n * to handle their own mouse events, but controls hosted in containers may\n * allow their parent to handle mouse events on their behalf.  Considered\n * protected; should only be used within this package and by subclasses.\n * @return {boolean} Whether the control handles its own mouse events.\n */\ngoog.ui.Control.prototype.isHandleMouseEvents = function() {\n  return this.handleMouseEvents_;\n};\n\n\n/**\n * Enables or disables mouse event handling for the control.  Containers may\n * use this method to disable mouse event handling in their child controls.\n * Considered protected; should only be used within this package and by\n * subclasses.\n * @param {boolean} enable Whether to enable or disable mouse event handling.\n */\ngoog.ui.Control.prototype.setHandleMouseEvents = function(enable) {\n  if (this.isInDocument() && enable != this.handleMouseEvents_) {\n    // Already in the document; need to update event handler.\n    this.enableMouseEventHandling_(enable);\n  }\n  this.handleMouseEvents_ = enable;\n};\n\n\n/**\n * Returns the DOM element on which the control is listening for keyboard\n * events (null if none).\n * @return {Element} Element on which the control is listening for key\n *     events.\n */\ngoog.ui.Control.prototype.getKeyEventTarget = function() {\n  // Delegate to renderer.\n  return this.renderer_.getKeyEventTarget(this);\n};\n\n\n/**\n * Returns the keyboard event handler for this component, lazily created the\n * first time this method is called.  Considered protected; should only be\n * used within this package and by subclasses.\n * @return {!goog.events.KeyHandler} Keyboard event handler for this component.\n * @protected\n */\ngoog.ui.Control.prototype.getKeyHandler = function() {\n  return this.keyHandler_ || (this.keyHandler_ = new goog.events.KeyHandler());\n};\n\n\n/**\n * Returns the renderer used by this component to render itself or to decorate\n * an existing element.\n * @return {goog.ui.ControlRenderer|undefined} Renderer used by the component\n *     (undefined if none).\n */\ngoog.ui.Control.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Registers the given renderer with the component.  Changing renderers after\n * the component has entered the document is an error.\n * @param {goog.ui.ControlRenderer} renderer Renderer used by the component.\n * @throws {Error} If the control is already in the document.\n */\ngoog.ui.Control.prototype.setRenderer = function(renderer) {\n  if (this.isInDocument()) {\n    // Too late.\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (this.getElement()) {\n    // The component has already been rendered, but isn't yet in the document.\n    // Replace the renderer and delete the current DOM, so it can be re-rendered\n    // using the new renderer the next time someone calls render().\n    this.setElementInternal(null);\n  }\n\n  this.renderer_ = renderer;\n};\n\n\n// Support for additional styling.\n\n\n/**\n * Returns any additional class name(s) to be applied to the component's\n * root element, or null if no extra class names are needed.\n * @return {Array<string>?} Additional class names to be applied to\n *     the component's root element (null if none).\n */\ngoog.ui.Control.prototype.getExtraClassNames = function() {\n  return this.extraClassNames_;\n};\n\n\n/**\n * Adds the given class name to the list of classes to be applied to the\n * component's root element.\n * @param {string} className Additional class name to be applied to the\n *     component's root element.\n */\ngoog.ui.Control.prototype.addClassName = function(className) {\n  if (className) {\n    if (this.extraClassNames_) {\n      if (!goog.array.contains(this.extraClassNames_, className)) {\n        this.extraClassNames_.push(className);\n      }\n    } else {\n      this.extraClassNames_ = [className];\n    }\n    this.renderer_.enableExtraClassName(this, className, true);\n  }\n};\n\n\n/**\n * Removes the given class name from the list of classes to be applied to\n * the component's root element.\n * @param {string} className Class name to be removed from the component's root\n *     element.\n */\ngoog.ui.Control.prototype.removeClassName = function(className) {\n  if (className && this.extraClassNames_ &&\n      goog.array.remove(this.extraClassNames_, className)) {\n    if (this.extraClassNames_.length == 0) {\n      this.extraClassNames_ = null;\n    }\n    this.renderer_.enableExtraClassName(this, className, false);\n  }\n};\n\n\n/**\n * Adds or removes the given class name to/from the list of classes to be\n * applied to the component's root element.\n * @param {string} className CSS class name to add or remove.\n * @param {boolean} enable Whether to add or remove the class name.\n */\ngoog.ui.Control.prototype.enableClassName = function(className, enable) {\n  if (enable) {\n    this.addClassName(className);\n  } else {\n    this.removeClassName(className);\n  }\n};\n\n\n// Standard goog.ui.Component implementation.\n\n\n/**\n * Creates the control's DOM.  Overrides {@link goog.ui.Component#createDom} by\n * delegating DOM manipulation to the control's renderer.\n * @override\n */\ngoog.ui.Control.prototype.createDom = function() {\n  var element = this.renderer_.createDom(this);\n  this.setElementInternal(element);\n\n  // Initialize ARIA role.\n  this.renderer_.setAriaRole(element, this.getPreferredAriaRole());\n\n  // Initialize text selection.\n  if (!this.isAllowTextSelection()) {\n    // The renderer is assumed to create selectable elements.  Since making\n    // elements unselectable is expensive, only do it if needed (bug 1037090).\n    this.renderer_.setAllowTextSelection(element, false);\n  }\n\n  // Initialize visibility.\n  if (!this.isVisible()) {\n    // The renderer is assumed to create visible elements. Since hiding\n    // elements can be expensive, only do it if needed (bug 1037105).\n    this.renderer_.setVisible(element, false);\n  }\n};\n\n\n/**\n * Returns the control's preferred ARIA role. This can be used by a control to\n * override the role that would be assigned by the renderer.  This is useful in\n * cases where a different ARIA role is appropriate for a control because of the\n * context in which it's used.  E.g., a {@link goog.ui.MenuButton} added to a\n * {@link goog.ui.Select} should have an ARIA role of LISTBOX and not MENUITEM.\n * @return {?goog.a11y.aria.Role} This control's preferred ARIA role or null if\n *     no preferred ARIA role is set.\n */\ngoog.ui.Control.prototype.getPreferredAriaRole = function() {\n  return this.preferredAriaRole_;\n};\n\n\n/**\n * Sets the control's preferred ARIA role. This can be used to override the role\n * that would be assigned by the renderer.  This is useful in cases where a\n * different ARIA role is appropriate for a control because of the\n * context in which it's used.  E.g., a {@link goog.ui.MenuButton} added to a\n * {@link goog.ui.Select} should have an ARIA role of LISTBOX and not MENUITEM.\n * @param {goog.a11y.aria.Role} role This control's preferred ARIA role.\n */\ngoog.ui.Control.prototype.setPreferredAriaRole = function(role) {\n  this.preferredAriaRole_ = role;\n};\n\n\n/**\n * Gets the control's aria label.\n * @return {?string} This control's aria label.\n */\ngoog.ui.Control.prototype.getAriaLabel = function() {\n  return this.ariaLabel_;\n};\n\n\n/**\n * Sets the control's aria label. This can be used to assign aria label to the\n * element after it is rendered.\n * @param {string} label The string to set as the aria label for this control.\n *     No escaping is done on this value.\n */\ngoog.ui.Control.prototype.setAriaLabel = function(label) {\n  this.ariaLabel_ = label;\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setAriaLabel(element, label);\n  }\n};\n\n\n/**\n * Returns the DOM element into which child components are to be rendered,\n * or null if the control itself hasn't been rendered yet.  Overrides\n * {@link goog.ui.Component#getContentElement} by delegating to the renderer.\n * @return {Element} Element to contain child elements (null if none).\n * @override\n */\ngoog.ui.Control.prototype.getContentElement = function() {\n  // Delegate to renderer.\n  return this.renderer_.getContentElement(this.getElement());\n};\n\n\n/**\n * Returns true if the given element can be decorated by this component.\n * Overrides {@link goog.ui.Component#canDecorate}.\n * @param {Element} element Element to decorate.\n * @return {boolean} Whether the element can be decorated by this component.\n * @override\n */\ngoog.ui.Control.prototype.canDecorate = function(element) {\n  // Controls support pluggable renderers; delegate to the renderer.\n  return this.renderer_.canDecorate(element);\n};\n\n\n/**\n * Decorates the given element with this component. Overrides {@link\n * goog.ui.Component#decorateInternal} by delegating DOM manipulation\n * to the control's renderer.\n * @param {Element} element Element to decorate.\n * @protected\n * @override\n */\ngoog.ui.Control.prototype.decorateInternal = function(element) {\n  element = this.renderer_.decorate(this, element);\n  this.setElementInternal(element);\n\n  // Initialize ARIA role.\n  this.renderer_.setAriaRole(element, this.getPreferredAriaRole());\n\n  // Initialize text selection.\n  if (!this.isAllowTextSelection()) {\n    // Decorated elements are assumed to be selectable.  Since making elements\n    // unselectable is expensive, only do it if needed (bug 1037090).\n    this.renderer_.setAllowTextSelection(element, false);\n  }\n\n  // Initialize visibility based on the decorated element's styling.\n  this.visible_ = element.style.display != 'none';\n};\n\n\n/**\n * Configures the component after its DOM has been rendered, and sets up event\n * handling.  Overrides {@link goog.ui.Component#enterDocument}.\n * @override\n */\ngoog.ui.Control.prototype.enterDocument = function() {\n  goog.ui.Control.superClass_.enterDocument.call(this);\n\n  // Call the renderer's setAriaStates method to set element's aria attributes.\n  this.renderer_.setAriaStates(this, this.getElementStrict());\n\n  // Call the renderer's initializeDom method to configure properties of the\n  // control's DOM that can only be done once it's in the document.\n  this.renderer_.initializeDom(this);\n\n  // Initialize event handling if at least one state other than DISABLED is\n  // supported.\n  if (this.supportedStates_ & ~goog.ui.Component.State.DISABLED) {\n    // Initialize mouse event handling if the control is configured to handle\n    // its own mouse events.  (Controls hosted in containers don't need to\n    // handle their own mouse events.)\n    if (this.isHandleMouseEvents()) {\n      this.enableMouseEventHandling_(true);\n    }\n\n    // Initialize keyboard event handling if the control is focusable and has\n    // a key event target.  (Controls hosted in containers typically aren't\n    // focusable, allowing their container to handle keyboard events for them.)\n    if (this.isSupportedState(goog.ui.Component.State.FOCUSED)) {\n      var keyTarget = this.getKeyEventTarget();\n      if (keyTarget) {\n        var keyHandler = this.getKeyHandler();\n        keyHandler.attach(keyTarget);\n        this.getHandler()\n            .listen(\n                keyHandler, goog.events.KeyHandler.EventType.KEY,\n                this.handleKeyEvent)\n            .listen(keyTarget, goog.events.EventType.FOCUS, this.handleFocus)\n            .listen(keyTarget, goog.events.EventType.BLUR, this.handleBlur);\n      }\n    }\n  }\n};\n\n\n/**\n * Enables or disables mouse event handling on the control.\n * @param {boolean} enable Whether to enable mouse event handling.\n * @private\n */\ngoog.ui.Control.prototype.enableMouseEventHandling_ = function(enable) {\n  var MouseEventType = goog.ui.ComponentUtil.getMouseEventType(this);\n\n  var handler = this.getHandler();\n  var element = this.getElement();\n  if (enable) {\n    handler.listen(element, MouseEventType.MOUSEDOWN, this.handleMouseDown)\n        .listen(\n            element, [MouseEventType.MOUSEUP, MouseEventType.MOUSECANCEL],\n            this.handleMouseUp)\n        .listen(element, goog.events.EventType.MOUSEOVER, this.handleMouseOver)\n        .listen(element, goog.events.EventType.MOUSEOUT, this.handleMouseOut);\n    if (this.pointerEventsEnabled()) {\n      // Prevent pointer events from capturing the target element so they behave\n      // more like mouse events.\n      handler.listen(\n          element, goog.events.EventType.GOTPOINTERCAPTURE,\n          this.preventPointerCapture_);\n    }\n    if (this.handleContextMenu != goog.nullFunction) {\n      handler.listen(\n          element, goog.events.EventType.CONTEXTMENU, this.handleContextMenu);\n    }\n    if (goog.userAgent.IE) {\n      // Versions of IE before 9 send only one click event followed by a\n      // dblclick, so we must explicitly listen for these. In later versions,\n      // two click events are fired  and so a dblclick listener is unnecessary.\n      if (!goog.userAgent.isVersionOrHigher(9)) {\n        handler.listen(\n            element, goog.events.EventType.DBLCLICK, this.handleDblClick);\n      }\n      if (!this.ieMouseEventSequenceSimulator_) {\n        this.ieMouseEventSequenceSimulator_ =\n            new goog.ui.Control.IeMouseEventSequenceSimulator_(this);\n        this.registerDisposable(this.ieMouseEventSequenceSimulator_);\n      }\n    }\n  } else {\n    handler.unlisten(element, MouseEventType.MOUSEDOWN, this.handleMouseDown)\n        .unlisten(\n            element, [MouseEventType.MOUSEUP, MouseEventType.MOUSECANCEL],\n            this.handleMouseUp)\n        .unlisten(\n            element, goog.events.EventType.MOUSEOVER, this.handleMouseOver)\n        .unlisten(element, goog.events.EventType.MOUSEOUT, this.handleMouseOut);\n    if (this.pointerEventsEnabled()) {\n      handler.unlisten(\n          element, goog.events.EventType.GOTPOINTERCAPTURE,\n          this.preventPointerCapture_);\n    }\n    if (this.handleContextMenu != goog.nullFunction) {\n      handler.unlisten(\n          element, goog.events.EventType.CONTEXTMENU, this.handleContextMenu);\n    }\n    if (goog.userAgent.IE) {\n      if (!goog.userAgent.isVersionOrHigher(9)) {\n        handler.unlisten(\n            element, goog.events.EventType.DBLCLICK, this.handleDblClick);\n      }\n      goog.dispose(this.ieMouseEventSequenceSimulator_);\n      this.ieMouseEventSequenceSimulator_ = null;\n    }\n  }\n};\n\n\n/**\n * Cleans up the component before its DOM is removed from the document, and\n * removes event handlers.  Overrides {@link goog.ui.Component#exitDocument}\n * by making sure that components that are removed from the document aren't\n * focusable (i.e. have no tab index).\n * @override\n */\ngoog.ui.Control.prototype.exitDocument = function() {\n  goog.ui.Control.superClass_.exitDocument.call(this);\n  if (this.keyHandler_) {\n    this.keyHandler_.detach();\n  }\n  if (this.isVisible() && this.isEnabled()) {\n    this.renderer_.setFocusable(this, false);\n  }\n};\n\n\n/** @override */\ngoog.ui.Control.prototype.disposeInternal = function() {\n  goog.ui.Control.superClass_.disposeInternal.call(this);\n  if (this.keyHandler_) {\n    this.keyHandler_.dispose();\n    delete this.keyHandler_;\n  }\n  delete this.renderer_;\n  this.content_ = null;\n  this.extraClassNames_ = null;\n  this.ieMouseEventSequenceSimulator_ = null;\n};\n\n\n// Component content management.\n\n\n/**\n * Returns the text caption or DOM structure displayed in the component.\n * @return {goog.ui.ControlContent} Text caption or DOM structure\n *     comprising the component's contents.\n */\ngoog.ui.Control.prototype.getContent = function() {\n  return this.content_;\n};\n\n\n/**\n * Sets the component's content to the given text caption, element, or array of\n * nodes.  (If the argument is an array of nodes, it must be an actual array,\n * not an array-like object.)\n * @param {goog.ui.ControlContent} content Text caption or DOM\n *     structure to set as the component's contents.\n */\ngoog.ui.Control.prototype.setContent = function(content) {\n  // Controls support pluggable renderers; delegate to the renderer.\n  this.renderer_.setContent(this.getElement(), content);\n\n  // setContentInternal needs to be after the renderer, since the implementation\n  // may depend on the content being in the DOM.\n  this.setContentInternal(content);\n};\n\n\n/**\n * Sets the component's content to the given text caption, element, or array\n * of nodes.  Unlike {@link #setContent}, doesn't modify the component's DOM.\n * Called by renderers during element decoration.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {goog.ui.ControlContent} content Text caption or DOM structure\n *     to set as the component's contents.\n */\ngoog.ui.Control.prototype.setContentInternal = function(content) {\n  this.content_ = content;\n};\n\n\n/**\n * @return {string} Text caption of the control or empty string if none.\n */\ngoog.ui.Control.prototype.getCaption = function() {\n  var content = this.getContent();\n  if (!content) {\n    return '';\n  }\n  var caption = (typeof content === 'string') ?\n      content :\n      goog.isArray(content) ?\n      goog.array.map(content, goog.dom.getRawTextContent).join('') :\n      goog.dom.getTextContent(/** @type {!Node} */ (content));\n  return goog.string.collapseBreakingSpaces(caption);\n};\n\n\n/**\n * Sets the text caption of the component.\n * @param {string} caption Text caption of the component.\n */\ngoog.ui.Control.prototype.setCaption = function(caption) {\n  this.setContent(caption);\n};\n\n\n// Component state management.\n\n\n/** @override */\ngoog.ui.Control.prototype.setRightToLeft = function(rightToLeft) {\n  // The superclass implementation ensures the control isn't in the document.\n  goog.ui.Control.superClass_.setRightToLeft.call(this, rightToLeft);\n\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setRightToLeft(element, rightToLeft);\n  }\n};\n\n\n/**\n * Returns true if the control allows text selection within its DOM, false\n * otherwise.  Controls that disallow text selection have the appropriate\n * unselectable styling applied to their elements.  Note that controls hosted\n * in containers will report that they allow text selection even if their\n * container disallows text selection.\n * @return {boolean} Whether the control allows text selection.\n */\ngoog.ui.Control.prototype.isAllowTextSelection = function() {\n  return this.allowTextSelection_;\n};\n\n\n/**\n * Allows or disallows text selection within the control's DOM.\n * @param {boolean} allow Whether the control should allow text selection.\n */\ngoog.ui.Control.prototype.setAllowTextSelection = function(allow) {\n  this.allowTextSelection_ = allow;\n\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setAllowTextSelection(element, allow);\n  }\n};\n\n\n/**\n * Returns true if the component's visibility is set to visible, false if\n * it is set to hidden.  A component that is set to hidden is guaranteed\n * to be hidden from the user, but the reverse isn't necessarily true.\n * A component may be set to visible but can otherwise be obscured by another\n * element, rendered off-screen, or hidden using direct CSS manipulation.\n * @return {boolean} Whether the component is visible.\n */\ngoog.ui.Control.prototype.isVisible = function() {\n  return this.visible_;\n};\n\n\n/**\n * Shows or hides the component.  Does nothing if the component already has\n * the requested visibility.  Otherwise, dispatches a SHOW or HIDE event as\n * appropriate, giving listeners a chance to prevent the visibility change.\n * When showing a component that is both enabled and focusable, ensures that\n * its key target has a tab index.  When hiding a component that is enabled\n * and focusable, blurs its key target and removes its tab index.\n * @param {boolean} visible Whether to show or hide the component.\n * @param {boolean=} opt_force If true, doesn't check whether the component\n *     already has the requested visibility, and doesn't dispatch any events.\n * @return {boolean} Whether the visibility was changed.\n */\ngoog.ui.Control.prototype.setVisible = function(visible, opt_force) {\n  if (opt_force || (this.visible_ != visible &&\n                    this.dispatchEvent(\n                        visible ? goog.ui.Component.EventType.SHOW :\n                                  goog.ui.Component.EventType.HIDE))) {\n    var element = this.getElement();\n    if (element) {\n      this.renderer_.setVisible(element, visible);\n    }\n    if (this.isEnabled()) {\n      this.renderer_.setFocusable(this, visible);\n    }\n    this.visible_ = visible;\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Returns true if the component is enabled, false otherwise.\n * @return {boolean} Whether the component is enabled.\n */\ngoog.ui.Control.prototype.isEnabled = function() {\n  return !this.hasState(goog.ui.Component.State.DISABLED);\n};\n\n\n/**\n * Returns true if the control has a parent that is itself disabled, false\n * otherwise.\n * @return {boolean} Whether the component is hosted in a disabled container.\n * @private\n */\ngoog.ui.Control.prototype.isParentDisabled_ = function() {\n  var parent = this.getParent();\n  return !!parent && typeof parent.isEnabled == 'function' &&\n      !parent.isEnabled();\n};\n\n\n/**\n * Enables or disables the component.  Does nothing if this state transition\n * is disallowed.  If the component is both visible and focusable, updates its\n * focused state and tab index as needed.  If the component is being disabled,\n * ensures that it is also deactivated and un-highlighted first.  Note that the\n * component's enabled/disabled state is \"locked\" as long as it is hosted in a\n * {@link goog.ui.Container} that is itself disabled; this is to prevent clients\n * from accidentally re-enabling a control that is in a disabled container.\n * @param {boolean} enable Whether to enable or disable the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setEnabled = function(enable) {\n  if (!this.isParentDisabled_() &&\n      this.isTransitionAllowed(goog.ui.Component.State.DISABLED, !enable)) {\n    if (!enable) {\n      this.setActive(false);\n      this.setHighlighted(false);\n    }\n    if (this.isVisible()) {\n      this.renderer_.setFocusable(this, enable);\n    }\n    this.setState(goog.ui.Component.State.DISABLED, !enable, true);\n  }\n};\n\n\n/**\n * Returns true if the component is currently highlighted, false otherwise.\n * @return {boolean} Whether the component is highlighted.\n */\ngoog.ui.Control.prototype.isHighlighted = function() {\n  return this.hasState(goog.ui.Component.State.HOVER);\n};\n\n\n/**\n * Highlights or unhighlights the component.  Does nothing if this state\n * transition is disallowed.\n * @param {boolean} highlight Whether to highlight or unhighlight the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setHighlighted = function(highlight) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.HOVER, highlight)) {\n    this.setState(goog.ui.Component.State.HOVER, highlight);\n  }\n};\n\n\n/**\n * Returns true if the component is active (pressed), false otherwise.\n * @return {boolean} Whether the component is active.\n */\ngoog.ui.Control.prototype.isActive = function() {\n  return this.hasState(goog.ui.Component.State.ACTIVE);\n};\n\n\n/**\n * Activates or deactivates the component.  Does nothing if this state\n * transition is disallowed.\n * @param {boolean} active Whether to activate or deactivate the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setActive = function(active) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.ACTIVE, active)) {\n    this.setState(goog.ui.Component.State.ACTIVE, active);\n  }\n};\n\n\n/**\n * Returns true if the component is selected, false otherwise.\n * @return {boolean} Whether the component is selected.\n */\ngoog.ui.Control.prototype.isSelected = function() {\n  return this.hasState(goog.ui.Component.State.SELECTED);\n};\n\n\n/**\n * Selects or unselects the component.  Does nothing if this state transition\n * is disallowed.\n * @param {boolean} select Whether to select or unselect the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setSelected = function(select) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.SELECTED, select)) {\n    this.setState(goog.ui.Component.State.SELECTED, select);\n  }\n};\n\n\n/**\n * Returns true if the component is checked, false otherwise.\n * @return {boolean} Whether the component is checked.\n */\ngoog.ui.Control.prototype.isChecked = function() {\n  return this.hasState(goog.ui.Component.State.CHECKED);\n};\n\n\n/**\n * Checks or unchecks the component.  Does nothing if this state transition\n * is disallowed.\n * @param {boolean} check Whether to check or uncheck the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setChecked = function(check) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.CHECKED, check)) {\n    this.setState(goog.ui.Component.State.CHECKED, check);\n  }\n};\n\n\n/**\n * Returns true if the component is styled to indicate that it has keyboard\n * focus, false otherwise.  Note that `isFocused()` returning true\n * doesn't guarantee that the component's key event target has keyboard focus,\n * only that it is styled as such.\n * @return {boolean} Whether the component is styled to indicate as having\n *     keyboard focus.\n */\ngoog.ui.Control.prototype.isFocused = function() {\n  return this.hasState(goog.ui.Component.State.FOCUSED);\n};\n\n\n/**\n * Applies or removes styling indicating that the component has keyboard focus.\n * Note that unlike the other \"set\" methods, this method is called as a result\n * of the component's element having received or lost keyboard focus, not the\n * other way around, so calling `setFocused(true)` doesn't guarantee that\n * the component's key event target has keyboard focus, only that it is styled\n * as such.\n * @param {boolean} focused Whether to apply or remove styling to indicate that\n *     the component's element has keyboard focus.\n */\ngoog.ui.Control.prototype.setFocused = function(focused) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.FOCUSED, focused)) {\n    this.setState(goog.ui.Component.State.FOCUSED, focused);\n  }\n};\n\n\n/**\n * Returns true if the component is open (expanded), false otherwise.\n * @return {boolean} Whether the component is open.\n */\ngoog.ui.Control.prototype.isOpen = function() {\n  return this.hasState(goog.ui.Component.State.OPENED);\n};\n\n\n/**\n * Opens (expands) or closes (collapses) the component.  Does nothing if this\n * state transition is disallowed.\n * @param {boolean} open Whether to open or close the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setOpen = function(open) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.OPENED, open)) {\n    this.setState(goog.ui.Component.State.OPENED, open);\n  }\n};\n\n\n/**\n * Returns the component's state as a bit mask of {@link\n * goog.ui.Component.State}s.\n * @return {number} Bit mask representing component state.\n */\ngoog.ui.Control.prototype.getState = function() {\n  return this.state_;\n};\n\n\n/**\n * Returns true if the component is in the specified state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component is in the given state.\n */\ngoog.ui.Control.prototype.hasState = function(state) {\n  return !!(this.state_ & state);\n};\n\n\n/**\n * Sets or clears the given state on the component, and updates its styling\n * accordingly.  Does nothing if the component is already in the correct state\n * or if it doesn't support the specified state.  Doesn't dispatch any state\n * transition events; use advisedly.\n * @param {goog.ui.Component.State} state State to set or clear.\n * @param {boolean} enable Whether to set or clear the state (if supported).\n * @param {boolean=} opt_calledFrom Prevents looping with setEnabled.\n */\ngoog.ui.Control.prototype.setState = function(state, enable, opt_calledFrom) {\n  if (!opt_calledFrom && state == goog.ui.Component.State.DISABLED) {\n    this.setEnabled(!enable);\n    return;\n  }\n  if (this.isSupportedState(state) && enable != this.hasState(state)) {\n    // Delegate actual styling to the renderer, since it is DOM-specific.\n    this.renderer_.setState(this, state, enable);\n    this.state_ = enable ? this.state_ | state : this.state_ & ~state;\n  }\n};\n\n\n/**\n * Sets the component's state to the state represented by a bit mask of\n * {@link goog.ui.Component.State}s.  Unlike {@link #setState}, doesn't\n * update the component's styling, and doesn't reject unsupported states.\n * Called by renderers during element decoration.  Considered protected;\n * should only be used within this package and by subclasses.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {number} state Bit mask representing component state.\n */\ngoog.ui.Control.prototype.setStateInternal = function(state) {\n  this.state_ = state;\n};\n\n\n/**\n * Returns true if the component supports the specified state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component supports the given state.\n */\ngoog.ui.Control.prototype.isSupportedState = function(state) {\n  return !!(this.supportedStates_ & state);\n};\n\n\n/**\n * Enables or disables support for the given state. Disabling support\n * for a state while the component is in that state is an error.\n * @param {goog.ui.Component.State} state State to support or de-support.\n * @param {boolean} support Whether the component should support the state.\n * @throws {Error} If disabling support for a state the control is currently in.\n */\ngoog.ui.Control.prototype.setSupportedState = function(state, support) {\n  if (this.isInDocument() && this.hasState(state) && !support) {\n    // Since we hook up event handlers in enterDocument(), this is an error.\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (!support && this.hasState(state)) {\n    // We are removing support for a state that the component is currently in.\n    this.setState(state, false);\n  }\n\n  this.supportedStates_ =\n      support ? this.supportedStates_ | state : this.supportedStates_ & ~state;\n};\n\n\n/**\n * Returns true if the component provides default event handling for the state,\n * false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component provides default event handling for\n *     the state.\n */\ngoog.ui.Control.prototype.isAutoState = function(state) {\n  return !!(this.autoStates_ & state) && this.isSupportedState(state);\n};\n\n\n/**\n * Enables or disables automatic event handling for the given state(s).\n * @param {number} states Bit mask of {@link goog.ui.Component.State}s for which\n *     default event handling is to be enabled or disabled.\n * @param {boolean} enable Whether the component should provide default event\n *     handling for the state(s).\n */\ngoog.ui.Control.prototype.setAutoStates = function(states, enable) {\n  this.autoStates_ =\n      enable ? this.autoStates_ | states : this.autoStates_ & ~states;\n};\n\n\n/**\n * Returns true if the component is set to dispatch transition events for the\n * given state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component dispatches transition events for\n *     the state.\n */\ngoog.ui.Control.prototype.isDispatchTransitionEvents = function(state) {\n  return !!(this.statesWithTransitionEvents_ & state) &&\n      this.isSupportedState(state);\n};\n\n\n/**\n * Enables or disables transition events for the given state(s).  Controls\n * handle state transitions internally by default, and only dispatch state\n * transition events if explicitly requested to do so by calling this method.\n * @param {number} states Bit mask of {@link goog.ui.Component.State}s for\n *     which transition events should be enabled or disabled.\n * @param {boolean} enable Whether transition events should be enabled.\n */\ngoog.ui.Control.prototype.setDispatchTransitionEvents = function(\n    states, enable) {\n  this.statesWithTransitionEvents_ = enable ?\n      this.statesWithTransitionEvents_ | states :\n      this.statesWithTransitionEvents_ & ~states;\n};\n\n\n/**\n * Returns true if the transition into or out of the given state is allowed to\n * proceed, false otherwise.  A state transition is allowed under the following\n * conditions:\n * <ul>\n *   <li>the component supports the state,\n *   <li>the component isn't already in the target state,\n *   <li>either the component is configured not to dispatch events for this\n *       state transition, or a transition event was dispatched and wasn't\n *       canceled by any event listener, and\n *   <li>the component hasn't been disposed of\n * </ul>\n * Considered protected; should only be used within this package and by\n * subclasses.\n * @param {goog.ui.Component.State} state State to/from which the control is\n *     transitioning.\n * @param {boolean} enable Whether the control is entering or leaving the state.\n * @return {boolean} Whether the state transition is allowed to proceed.\n * @protected\n */\ngoog.ui.Control.prototype.isTransitionAllowed = function(state, enable) {\n  return this.isSupportedState(state) && this.hasState(state) != enable &&\n      (!(this.statesWithTransitionEvents_ & state) ||\n       this.dispatchEvent(\n           goog.ui.Component.getStateTransitionEvent(state, enable))) &&\n      !this.isDisposed();\n};\n\n\n// Default event handlers, to be overridden in subclasses.\n\n\n/**\n * Handles mouseover events.  Dispatches an ENTER event; if the event isn't\n * canceled, the component is enabled, and it supports auto-highlighting,\n * highlights the component.  Considered protected; should only be used\n * within this package and by subclasses.\n * @param {goog.events.BrowserEvent} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseOver = function(e) {\n  // Ignore mouse moves between descendants.\n  if (!goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) &&\n      this.dispatchEvent(goog.ui.Component.EventType.ENTER) &&\n      this.isEnabled() && this.isAutoState(goog.ui.Component.State.HOVER)) {\n    this.setHighlighted(true);\n  }\n};\n\n\n/**\n * Handles mouseout events.  Dispatches a LEAVE event; if the event isn't\n * canceled, and the component supports auto-highlighting, deactivates and\n * un-highlights the component.  Considered protected; should only be used\n * within this package and by subclasses.\n * @param {goog.events.BrowserEvent} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseOut = function(e) {\n  if (!goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) &&\n      this.dispatchEvent(goog.ui.Component.EventType.LEAVE)) {\n    if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n      // Deactivate on mouseout; otherwise we lose track of the mouse button.\n      this.setActive(false);\n    }\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(false);\n    }\n  }\n};\n\n\n/**\n * @param {!goog.events.BrowserEvent} e Event to handle.\n * @private\n */\ngoog.ui.Control.prototype.preventPointerCapture_ = function(e) {\n  var elem = /** @type {!Element} */ (e.target);\n  if (!!elem.releasePointerCapture) {\n    elem.releasePointerCapture(e.pointerId);\n  }\n};\n\n\n/**\n * Handles contextmenu events.\n * @param {goog.events.BrowserEvent} e Event to handle.\n */\ngoog.ui.Control.prototype.handleContextMenu = goog.nullFunction;\n\n\n/**\n * Checks if a mouse event (mouseover or mouseout) occurred below an element.\n * @param {goog.events.BrowserEvent} e Mouse event (should be mouseover or\n *     mouseout).\n * @param {Element} elem The ancestor element.\n * @return {boolean} Whether the event has a relatedTarget (the element the\n *     mouse is coming from) and it's a descendant of elem.\n * @private\n */\ngoog.ui.Control.isMouseEventWithinElement_ = function(e, elem) {\n  // If relatedTarget is null, it means there was no previous element (e.g.\n  // the mouse moved out of the window).  Assume this means that the mouse\n  // event was not within the element.\n  return !!e.relatedTarget && goog.dom.contains(elem, e.relatedTarget);\n};\n\n\n/**\n * Handles mousedown events.  If the component is enabled, highlights and\n * activates it.  If the component isn't configured for keyboard access,\n * prevents it from receiving keyboard focus.  Considered protected; should\n * only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseDown = function(e) {\n  if (this.isEnabled()) {\n    // Highlight enabled control on mousedown, regardless of the mouse button.\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(true);\n    }\n\n    // For the left button only, activate the control, and focus its key event\n    // target (if supported).\n    if (e.isMouseActionButton()) {\n      if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n        this.setActive(true);\n      }\n      if (this.renderer_ && this.renderer_.isFocusable(this)) {\n        this.getKeyEventTarget().focus();\n      }\n    }\n  }\n\n  // Cancel the default action unless the control allows text selection.\n  if (!this.isAllowTextSelection() && e.isMouseActionButton()) {\n    e.preventDefault();\n  }\n};\n\n\n/**\n * Handles mouseup events.  If the component is enabled, highlights it.  If\n * the component has previously been activated, performs its associated action\n * by calling {@link performActionInternal}, then deactivates it.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseUp = function(e) {\n  if (this.isEnabled()) {\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(true);\n    }\n    if (this.isActive() && this.performActionInternal(e) &&\n        this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n      this.setActive(false);\n    }\n  }\n};\n\n\n/**\n * Handles dblclick events.  Should only be registered if the user agent is\n * IE.  If the component is enabled, performs its associated action by calling\n * {@link performActionInternal}.  This is used to allow more performant\n * buttons in IE.  In IE, no mousedown event is fired when that mousedown will\n * trigger a dblclick event.  Because of this, a user clicking quickly will\n * only cause ACTION events to fire on every other click.  This is a workaround\n * to generate ACTION events for every click.  Unfortunately, this workaround\n * won't ever trigger the ACTIVE state.  This is roughly the same behaviour as\n * if this were a 'button' element with a listener on mouseup.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleDblClick = function(e) {\n  if (this.isEnabled()) {\n    this.performActionInternal(e);\n  }\n};\n\n\n/**\n * Performs the appropriate action when the control is activated by the user.\n * The default implementation first updates the checked and selected state of\n * controls that support them, then dispatches an ACTION event.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Event that triggered the action.\n * @return {boolean} Whether the action is allowed to proceed.\n * @protected\n */\ngoog.ui.Control.prototype.performActionInternal = function(e) {\n  if (this.isAutoState(goog.ui.Component.State.CHECKED)) {\n    this.setChecked(!this.isChecked());\n  }\n  if (this.isAutoState(goog.ui.Component.State.SELECTED)) {\n    this.setSelected(true);\n  }\n  if (this.isAutoState(goog.ui.Component.State.OPENED)) {\n    this.setOpen(!this.isOpen());\n  }\n\n  var actionEvent =\n      new goog.events.Event(goog.ui.Component.EventType.ACTION, this);\n  if (e) {\n    actionEvent.altKey = e.altKey;\n    actionEvent.ctrlKey = e.ctrlKey;\n    actionEvent.metaKey = e.metaKey;\n    actionEvent.shiftKey = e.shiftKey;\n    actionEvent.platformModifierKey = e.platformModifierKey;\n  }\n  return this.dispatchEvent(actionEvent);\n};\n\n\n/**\n * Handles focus events on the component's key event target element.  If the\n * component is focusable, updates its state and styling to indicate that it\n * now has keyboard focus.  Considered protected; should only be used within\n * this package and by subclasses.  <b>Warning:</b> IE dispatches focus and\n * blur events asynchronously!\n * @param {goog.events.Event} e Focus event to handle.\n */\ngoog.ui.Control.prototype.handleFocus = function(e) {\n  if (this.isAutoState(goog.ui.Component.State.FOCUSED)) {\n    this.setFocused(true);\n  }\n};\n\n\n/**\n * Handles blur events on the component's key event target element.  Always\n * deactivates the component.  In addition, if the component is focusable,\n * updates its state and styling to indicate that it no longer has keyboard\n * focus.  Considered protected; should only be used within this package and\n * by subclasses.  <b>Warning:</b> IE dispatches focus and blur events\n * asynchronously!\n * @param {goog.events.Event} e Blur event to handle.\n */\ngoog.ui.Control.prototype.handleBlur = function(e) {\n  if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n    this.setActive(false);\n  }\n  if (this.isAutoState(goog.ui.Component.State.FOCUSED)) {\n    this.setFocused(false);\n  }\n};\n\n\n/**\n * Attempts to handle a keyboard event, if the component is enabled and visible,\n * by calling {@link handleKeyEventInternal}.  Considered protected; should only\n * be used within this package and by subclasses.\n * @param {goog.events.KeyEvent} e Key event to handle.\n * @return {boolean} Whether the key event was handled.\n */\ngoog.ui.Control.prototype.handleKeyEvent = function(e) {\n  if (this.isVisible() && this.isEnabled() && this.handleKeyEventInternal(e)) {\n    e.preventDefault();\n    e.stopPropagation();\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Attempts to handle a keyboard event; returns true if the event was handled,\n * false otherwise.  Considered protected; should only be used within this\n * package and by subclasses.\n * @param {goog.events.KeyEvent} e Key event to handle.\n * @return {boolean} Whether the key event was handled.\n * @protected\n */\ngoog.ui.Control.prototype.handleKeyEventInternal = function(e) {\n  return e.keyCode == goog.events.KeyCodes.ENTER &&\n      this.performActionInternal(e);\n};\n\n\n// Register the default renderer for goog.ui.Controls.\ngoog.ui.registry.setDefaultRenderer(goog.ui.Control, goog.ui.ControlRenderer);\n\n\n// Register a decorator factory function for goog.ui.Controls.\ngoog.ui.registry.setDecoratorByClassName(\n    goog.ui.ControlRenderer.CSS_CLASS,\n    function() { return new goog.ui.Control(null); });\n\n\n\n/**\n * A singleton that helps goog.ui.Control instances play well with screen\n * readers.  It necessitated by shortcomings in IE, and need not be\n * instantiated in any other browser.\n *\n * In most cases, a click on a goog.ui.Control results in a sequence of events:\n * MOUSEDOWN, MOUSEUP and CLICK.  UI controls rely on this sequence since most\n * behavior is trigged by MOUSEDOWN and MOUSEUP.  But when IE is used with some\n * traditional screen readers (JAWS, NVDA and perhaps others), IE only sends\n * the CLICK event, resulting in the control being unresponsive.  This class\n * monitors the sequence of these events, and if it detects a CLICK event not\n * not preceded by a MOUSEUP event, directly calls the control's event handlers\n * for MOUSEDOWN, then MOUSEUP.  While the resulting sequence is different from\n * the norm (the CLICK comes first instead of last), testing thus far shows\n * the resulting behavior to be correct.\n *\n * See http://goo.gl/qvQR4C for more details.\n *\n * @param {!goog.ui.Control} control\n * @constructor\n * @extends {goog.Disposable}\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_ = function(control) {\n  goog.ui.Control.IeMouseEventSequenceSimulator_.base(this, 'constructor');\n\n  /** @private {goog.ui.Control}*/\n  this.control_ = control;\n\n  /** @private {boolean} */\n  this.clickExpected_ = false;\n\n  /** @private @const {!goog.events.EventHandler<\n   *                       !goog.ui.Control.IeMouseEventSequenceSimulator_>}\n   */\n  this.handler_ = new goog.events.EventHandler(this);\n  this.registerDisposable(this.handler_);\n\n  var element = this.control_.getElementStrict();\n  var MouseEventType = goog.ui.ComponentUtil.getMouseEventType(control);\n\n  this.handler_.listen(element, MouseEventType.MOUSEDOWN, this.handleMouseDown_)\n      .listen(element, MouseEventType.MOUSEUP, this.handleMouseUp_)\n      .listen(element, goog.events.EventType.CLICK, this.handleClick_);\n};\ngoog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_, goog.Disposable);\n\n\n/**\n * Whether this browser supports synthetic MouseEvents.\n *\n * See https://msdn.microsoft.com/library/dn905219(v=vs.85).aspx for details.\n *\n * @private {boolean}\n * @const\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ =\n    !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9);\n\n\n/** @private */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_ =\n    function() {\n  this.clickExpected_ = false;\n};\n\n\n/** @private */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_ =\n    function() {\n  this.clickExpected_ = true;\n};\n\n\n/**\n * @param {!MouseEvent} e\n * @param {goog.events.EventType} typeArg\n * @return {!MouseEvent}\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_ = function(\n    e, typeArg) {\n  'use strict';\n\n  if (!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) {\n    // IE < 9 does not support synthetic mouse events. Therefore, reuse the\n    // existing MouseEvent by overwriting the read only button and type\n    // properties. As IE < 9 does not support ES5 strict mode this will not\n    // generate an exception even when the script specifies \"use strict\".\n    e.button = goog.events.BrowserEvent.MouseButton.LEFT;\n    e.type = typeArg;\n    return e;\n  }\n\n  var event = /** @type {!MouseEvent} */ (document.createEvent('MouseEvents'));\n  event.initMouseEvent(\n      typeArg, e.bubbles, e.cancelable,\n      e.view || null,  // IE9 errors if view is undefined\n      e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey,\n      e.shiftKey, e.metaKey, goog.events.BrowserEvent.MouseButton.LEFT,\n      e.relatedTarget || null);  // IE9 errors if relatedTarget is undefined\n  return event;\n};\n\n\n/**\n * @param {!goog.events.Event} e\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_ =\n    function(e) {\n  if (this.clickExpected_) {\n    // This is the end of a normal click sequence: mouse-down, mouse-up, click.\n    // Assume appropriate actions have already been performed.\n    this.clickExpected_ = false;\n    return;\n  }\n\n  // For click events not part of a normal sequence, similate the mouse-down and\n  // mouse-up events by creating synthetic events for each and directly invoke\n  // the corresponding event listeners in order.\n\n  var browserEvent = /** @type {goog.events.BrowserEvent} */ (e);\n\n  var event = /** @type {!MouseEvent} */ (browserEvent.getBrowserEvent());\n  var origEventButton = event.button;\n  var origEventType = event.type;\n\n  var down = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(\n      event, goog.events.EventType.MOUSEDOWN);\n  this.control_.handleMouseDown(\n      new goog.events.BrowserEvent(down, browserEvent.currentTarget));\n\n  var up = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(\n      event, goog.events.EventType.MOUSEUP);\n  this.control_.handleMouseUp(\n      new goog.events.BrowserEvent(up, browserEvent.currentTarget));\n\n  if (goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) {\n    // This browser supports synthetic events. Avoid resetting the read only\n    // properties (type, button) as they were not overwritten and writing them\n    // results in an exception when running in ES5 strict mode.\n    return;\n  }\n\n  // Restore original values for click handlers that have not yet been invoked.\n  event.button = origEventButton;\n  event.type = origEventType;\n};\n\n\n/** @override */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal =\n    function() {\n  this.control_ = null;\n  goog.ui.Control.IeMouseEventSequenceSimulator_.base(this, 'disposeInternal');\n};\n"],
"names":["goog","provide","require","ui","Control","goog.ui.Control","opt_content","opt_renderer","opt_domHelper","Component","call","renderer_","registry","getDefaultRenderer","constructor","setContentInternal","undefined","ariaLabel_","ieMouseEventSequenceSimulator_","inherits","tagUnsealableClass","registerDecorator","setDecoratorByClassName","getDecorator","prototype","content_","state_","supportedStates_","State","DISABLED","HOVER","ACTIVE","FOCUSED","autoStates_","ALL","statesWithTransitionEvents_","visible_","keyHandler_","extraClassNames_","handleMouseEvents_","allowTextSelection_","preferredAriaRole_","isHandleMouseEvents","goog.ui.Control.prototype.isHandleMouseEvents","setHandleMouseEvents","goog.ui.Control.prototype.setHandleMouseEvents","enable","isInDocument","enableMouseEventHandling_","getKeyEventTarget","goog.ui.Control.prototype.getKeyEventTarget","getKeyHandler","goog.ui.Control.prototype.getKeyHandler","events","KeyHandler","getRenderer","goog.ui.Control.prototype.getRenderer","setRenderer","goog.ui.Control.prototype.setRenderer","renderer","Error","ALREADY_RENDERED","getElement","setElementInternal","getExtraClassNames","goog.ui.Control.prototype.getExtraClassNames","addClassName","goog.ui.Control.prototype.addClassName","className","array","contains","push","enableExtraClassName","removeClassName","goog.ui.Control.prototype.removeClassName","remove","length","enableClassName","goog.ui.Control.prototype.enableClassName","createDom","goog.ui.Control.prototype.createDom","element","setAriaRole","getPreferredAriaRole","isAllowTextSelection","setAllowTextSelection","isVisible","setVisible","goog.ui.Control.prototype.getPreferredAriaRole","setPreferredAriaRole","goog.ui.Control.prototype.setPreferredAriaRole","role","getAriaLabel","goog.ui.Control.prototype.getAriaLabel","setAriaLabel","goog.ui.Control.prototype.setAriaLabel","label","getContentElement","goog.ui.Control.prototype.getContentElement","canDecorate","goog.ui.Control.prototype.canDecorate","decorateInternal","goog.ui.Control.prototype.decorateInternal","decorate","style","display","enterDocument","goog.ui.Control.prototype.enterDocument","superClass_","setAriaStates","getElementStrict","initializeDom","isSupportedState","keyTarget","keyHandler","attach","getHandler","listen","EventType","KEY","handleKeyEvent","FOCUS","handleFocus","BLUR","handleBlur","goog.ui.Control.prototype.enableMouseEventHandling_","MouseEventType","ComponentUtil","getMouseEventType","handler","MOUSEDOWN","handleMouseDown","MOUSEUP","MOUSECANCEL","handleMouseUp","MOUSEOVER","handleMouseOver","MOUSEOUT","handleMouseOut","pointerEventsEnabled","GOTPOINTERCAPTURE","preventPointerCapture_","handleContextMenu","nullFunction","CONTEXTMENU","userAgent","IE","isVersionOrHigher","DBLCLICK","handleDblClick","IeMouseEventSequenceSimulator_","registerDisposable","unlisten","dispose","exitDocument","goog.ui.Control.prototype.exitDocument","detach","isEnabled","setFocusable","disposeInternal","goog.ui.Control.prototype.disposeInternal","getContent","goog.ui.Control.prototype.getContent","setContent","goog.ui.Control.prototype.setContent","content","goog.ui.Control.prototype.setContentInternal","getCaption","goog.ui.Control.prototype.getCaption","caption","isArray","map","dom","getRawTextContent","join","getTextContent","string","collapseBreakingSpaces","setCaption","goog.ui.Control.prototype.setCaption","setRightToLeft","goog.ui.Control.prototype.setRightToLeft","rightToLeft","goog.ui.Control.prototype.isAllowTextSelection","goog.ui.Control.prototype.setAllowTextSelection","allow","goog.ui.Control.prototype.isVisible","goog.ui.Control.prototype.setVisible","visible","opt_force","dispatchEvent","SHOW","HIDE","goog.ui.Control.prototype.isEnabled","hasState","isParentDisabled_","goog.ui.Control.prototype.isParentDisabled_","parent","getParent","setEnabled","goog.ui.Control.prototype.setEnabled","isTransitionAllowed","setActive","setHighlighted","setState","isHighlighted","goog.ui.Control.prototype.isHighlighted","goog.ui.Control.prototype.setHighlighted","highlight","isActive","goog.ui.Control.prototype.isActive","goog.ui.Control.prototype.setActive","active","isSelected","goog.ui.Control.prototype.isSelected","SELECTED","setSelected","goog.ui.Control.prototype.setSelected","select","isChecked","goog.ui.Control.prototype.isChecked","CHECKED","setChecked","goog.ui.Control.prototype.setChecked","check","isFocused","goog.ui.Control.prototype.isFocused","setFocused","goog.ui.Control.prototype.setFocused","focused","isOpen","goog.ui.Control.prototype.isOpen","OPENED","setOpen","goog.ui.Control.prototype.setOpen","open","getState","goog.ui.Control.prototype.getState","goog.ui.Control.prototype.hasState","state","goog.ui.Control.prototype.setState","opt_calledFrom","setStateInternal","goog.ui.Control.prototype.setStateInternal","goog.ui.Control.prototype.isSupportedState","setSupportedState","goog.ui.Control.prototype.setSupportedState","support","isAutoState","goog.ui.Control.prototype.isAutoState","setAutoStates","goog.ui.Control.prototype.setAutoStates","states","isDispatchTransitionEvents","goog.ui.Control.prototype.isDispatchTransitionEvents","setDispatchTransitionEvents","goog.ui.Control.prototype.setDispatchTransitionEvents","goog.ui.Control.prototype.isTransitionAllowed","getStateTransitionEvent","isDisposed","goog.ui.Control.prototype.handleMouseOver","e","isMouseEventWithinElement_","ENTER","goog.ui.Control.prototype.handleMouseOut","LEAVE","goog.ui.Control.prototype.preventPointerCapture_","elem","target","releasePointerCapture","pointerId","goog.ui.Control.isMouseEventWithinElement_","relatedTarget","goog.ui.Control.prototype.handleMouseDown","isMouseActionButton","isFocusable","focus","preventDefault","goog.ui.Control.prototype.handleMouseUp","performActionInternal","goog.ui.Control.prototype.handleDblClick","goog.ui.Control.prototype.performActionInternal","actionEvent","Event","ACTION","altKey","ctrlKey","metaKey","shiftKey","platformModifierKey","goog.ui.Control.prototype.handleFocus","goog.ui.Control.prototype.handleBlur","goog.ui.Control.prototype.handleKeyEvent","handleKeyEventInternal","stopPropagation","goog.ui.Control.prototype.handleKeyEventInternal","keyCode","KeyCodes","setDefaultRenderer","ControlRenderer","CSS_CLASS","goog.ui.Control.IeMouseEventSequenceSimulator_","control","base","control_","clickExpected_","handler_","EventHandler","handleMouseDown_","handleMouseUp_","CLICK","handleClick_","Disposable","SYNTHETIC_EVENTS_","isDocumentModeOrHigher","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_","makeLeftMouseEvent_","goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_","typeArg","button","BrowserEvent","MouseButton","LEFT","type","event","document","createEvent","initMouseEvent","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_","browserEvent","getBrowserEvent","origEventButton","origEventType","down","currentTarget","up","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal"]
}
