{"version":3,"sources":["webapp/shared_ui/side_menu.cljs"],"mappings":";AAMA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKA;AAGL,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKC;AAKL,AAAA,AAAMC;AAAN,AAEE,AAAA,AAAAC,AAAMC,AAAM,AAAA,AAAA,AAACC;AAAb,AAAAF,AACMG,AAAe,AAAA,AAAA,AAACD;AAChBE,AAAgB,AAAI,AAAA,AAAcD,AAChB,AAAA,AAASF,AACT,AAAA,AAAQA;AAJhC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAUiB,AAAA,AAAA,AAAA,AAACI;AAVlB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAeI,AAACC,AACA,AAAKC;AAAL,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAES,AAAA,AAAOA,AAGL,AAAA,AAAMA,AACb,AAAA,AAAOA;AAEXV,AACD,AAAM,AAAA,AAAAW,AAACC;AAAD,AAAO,AAAA,AAAAD,AAACE;AAAd,AAA2BN,AACzB,AAACE,AACA,AAAKC;AAAL,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAES,AAAA,AAAOA,AAGL,AAAA,AAAMA,AACb,AAAA,AAAOA;AARd,AAUGT","names":["webapp.shared-ui.side-menu/resources","webapp.shared-ui.side-menu/admin-resources","webapp.shared-ui.side-menu/aside","cljs.core/deref","user","re_frame.core.subscribe","feature-flags","roles-or-groups","re-frame.core/dispatch","cljs.core.map","i","p1__91926#","cljs.core/some","cljs.core._EQ_"],"sourcesContent":["(ns webapp.shared-ui.side-menu\n  (:require\n   [re-frame.core :as rf]\n   [webapp.subs :as subs]\n   [webapp.events :as events]))\n\n(def resources\n  [{:text \"Tasks\" :uri \"/tasks\"}])\n\n(def admin-resources\n  [{:text \"Targets\" :uri \"/targets\"}\n   {:text \"Users\" :uri \"/users\"}\n   {:text \"Agents\" :uri \"/agents\"}])\n\n(defn aside\n  []\n  (let [user @(rf/subscribe [::subs/user])\n        feature-flags @(rf/subscribe [::subs/feature-flags])\n        roles-or-groups (if (:groups-flag feature-flags)\n                          (:groups user)\n                          (:roles user))]\n    [:div.py-regular\n     [:figure\n      {:class \"w-2/3 mb-large px-small cursor-pointer\"}\n      [:img\n       {:src \"/images/runops-icon-white.svg\"\n        :on-click #(rf/dispatch [::events/navigate :home])}]]\n     [:header\n      {:class \"opacity-50 p-small text-xs font-bold\"}\n      \"MANAGE\"]\n     [:nav\n      (map\n       (fn [i]\n         [:div\n          {:key (:text i)\n           :class \"text-sm hover:bg-white hover:bg-opacity-5 transition\"}\n          [:a.block.p-small\n           {:href (:uri i)}\n           (:text i)]\n          ])\n       resources)\n      (when (some #(= \"admin\" %) roles-or-groups)\n        (map\n         (fn [i]\n           [:div\n            {:key (:text i)\n             :class \"text-sm hover:bg-white hover:bg-opacity-5 transition\"}\n            [:a.block.p-small\n             {:href (:uri i)}\n             (:text i)]\n            ])\n         admin-resources)\n        )\n      ]]))\n"]}