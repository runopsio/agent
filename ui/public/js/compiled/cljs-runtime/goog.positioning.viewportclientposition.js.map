{
"version":3,
"file":"goog.positioning.viewportclientposition.js",
"lineCount":40,
"mappings":"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",
"sources":["goog/positioning/viewportclientposition.js"],
"sourcesContent":["// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Client viewport positioning class.\n *\n * @author robbyw@google.com (Robert Walker)\n * @author eae@google.com (Emil A Eklund)\n */\n\ngoog.provide('goog.positioning.ViewportClientPosition');\n\ngoog.require('goog.dom');\ngoog.require('goog.math.Coordinate');\ngoog.require('goog.positioning');\ngoog.require('goog.positioning.ClientPosition');\ngoog.require('goog.positioning.Overflow');\ngoog.require('goog.positioning.OverflowStatus');\ngoog.require('goog.style');\n\n\n\n/**\n * Encapsulates a popup position where the popup is positioned relative to the\n * window (client) coordinates, and made to stay within the viewport.\n *\n * @param {number|goog.math.Coordinate} arg1 Left position or coordinate.\n * @param {number=} opt_arg2 Top position if arg1 is a number representing the\n *     left position, ignored otherwise.\n * @constructor\n * @extends {goog.positioning.ClientPosition}\n */\ngoog.positioning.ViewportClientPosition = function(arg1, opt_arg2) {\n  goog.positioning.ClientPosition.call(this, arg1, opt_arg2);\n};\ngoog.inherits(\n    goog.positioning.ViewportClientPosition, goog.positioning.ClientPosition);\n\n\n/**\n * The last-resort overflow strategy, if the popup fails to fit.\n * @type {number}\n * @private\n */\ngoog.positioning.ViewportClientPosition.prototype.lastResortOverflow_ = 0;\n\n\n/**\n * Set the last-resort overflow strategy, if the popup fails to fit.\n * @param {number} overflow A bitmask of goog.positioning.Overflow strategies.\n */\ngoog.positioning.ViewportClientPosition.prototype.setLastResortOverflow =\n    function(overflow) {\n  this.lastResortOverflow_ = overflow;\n};\n\n\n/**\n * Repositions the popup according to the current state.\n *\n * @param {Element} element The DOM element of the popup.\n * @param {goog.positioning.Corner} popupCorner The corner of the popup\n *     element that that should be positioned adjacent to the anchorElement.\n *     One of the goog.positioning.Corner constants.\n * @param {goog.math.Box=} opt_margin A margin specified in pixels.\n * @param {goog.math.Size=} opt_preferredSize Preferred size fo the element.\n * @override\n */\ngoog.positioning.ViewportClientPosition.prototype.reposition = function(\n    element, popupCorner, opt_margin, opt_preferredSize) {\n  var viewportElt = goog.style.getClientViewportElement(element);\n  var viewport = goog.style.getVisibleRectForElement(viewportElt);\n  var scrollEl = goog.dom.getDomHelper(element).getDocumentScrollElement();\n  var clientPos = new goog.math.Coordinate(\n      this.coordinate.x + scrollEl.scrollLeft,\n      this.coordinate.y + scrollEl.scrollTop);\n\n  var failXY =\n      goog.positioning.Overflow.FAIL_X | goog.positioning.Overflow.FAIL_Y;\n  var corner = popupCorner;\n\n  // Try the requested position.\n  var status = goog.positioning.positionAtCoordinate(\n      clientPos, element, corner, opt_margin, viewport, failXY,\n      opt_preferredSize);\n  if ((status & goog.positioning.OverflowStatus.FAILED) == 0) {\n    return;\n  }\n\n  // Outside left or right edge of viewport, try try to flip it horizontally.\n  if (status & goog.positioning.OverflowStatus.FAILED_LEFT ||\n      status & goog.positioning.OverflowStatus.FAILED_RIGHT) {\n    corner = goog.positioning.flipCornerHorizontal(corner);\n  }\n\n  // Outside top or bottom edge of viewport, try try to flip it vertically.\n  if (status & goog.positioning.OverflowStatus.FAILED_TOP ||\n      status & goog.positioning.OverflowStatus.FAILED_BOTTOM) {\n    corner = goog.positioning.flipCornerVertical(corner);\n  }\n\n  // Try flipped position.\n  status = goog.positioning.positionAtCoordinate(\n      clientPos, element, corner, opt_margin, viewport, failXY,\n      opt_preferredSize);\n  if ((status & goog.positioning.OverflowStatus.FAILED) == 0) {\n    return;\n  }\n\n  // If that failed, the viewport is simply too small to contain the popup.\n  // Revert to the original position.\n  goog.positioning.positionAtCoordinate(\n      clientPos, element, popupCorner, opt_margin, viewport,\n      this.lastResortOverflow_, opt_preferredSize);\n};\n"],
"names":["goog","provide","require","positioning","ViewportClientPosition","goog.positioning.ViewportClientPosition","arg1","opt_arg2","ClientPosition","call","inherits","prototype","lastResortOverflow_","setLastResortOverflow","goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow","overflow","reposition","goog.positioning.ViewportClientPosition.prototype.reposition","element","popupCorner","opt_margin","opt_preferredSize","viewportElt","style","getClientViewportElement","viewport","getVisibleRectForElement","scrollEl","dom","getDomHelper","getDocumentScrollElement","clientPos","math","Coordinate","coordinate","x","scrollLeft","y","scrollTop","failXY","Overflow","FAIL_X","FAIL_Y","corner","status","positionAtCoordinate","OverflowStatus","FAILED","FAILED_LEFT","FAILED_RIGHT","flipCornerHorizontal","FAILED_TOP","FAILED_BOTTOM","flipCornerVertical"]
}
