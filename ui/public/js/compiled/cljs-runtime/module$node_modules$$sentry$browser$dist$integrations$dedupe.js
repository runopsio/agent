shadow$provide.module$node_modules$$sentry$browser$dist$integrations$dedupe=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("module$node_modules$$sentry$utils$dist$index");global=function(){function Dedupe(){this.name=Dedupe.id}Dedupe.prototype.setupOnce=function(addGlobalEventProcessor,getCurrentHub){addGlobalEventProcessor(function(currentEvent){var self=getCurrentHub().getIntegration(Dedupe);if(self){try{if(self._shouldDropEvent(currentEvent,
self._previousEvent))return utils_1.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(_oO){}return self._previousEvent=currentEvent}return currentEvent})};Dedupe.prototype._shouldDropEvent=function(currentEvent,previousEvent){return previousEvent?this._isSameMessageEvent(currentEvent,previousEvent)||this._isSameExceptionEvent(currentEvent,previousEvent)?!0:!1:!1};Dedupe.prototype._isSameMessageEvent=function(currentEvent,previousEvent){var currentMessage=
currentEvent.message,previousMessage=previousEvent.message;return!currentMessage&&!previousMessage||currentMessage&&!previousMessage||!currentMessage&&previousMessage||currentMessage!==previousMessage||!this._isSameFingerprint(currentEvent,previousEvent)||!this._isSameStacktrace(currentEvent,previousEvent)?!1:!0};Dedupe.prototype._getFramesFromEvent=function(event){var exception=event.exception;if(exception)try{return exception.values[0].stacktrace.frames}catch(_oO){}else if(event.stacktrace)return event.stacktrace.frames};
Dedupe.prototype._isSameStacktrace=function(currentEvent,previousEvent){currentEvent=this._getFramesFromEvent(currentEvent);previousEvent=this._getFramesFromEvent(previousEvent);if(!currentEvent&&!previousEvent)return!0;if(currentEvent&&!previousEvent||!currentEvent&&previousEvent||previousEvent.length!==currentEvent.length)return!1;for(var i=0;i<previousEvent.length;i++){var frameA=previousEvent[i],frameB=currentEvent[i];if(frameA.filename!==frameB.filename||frameA.lineno!==frameB.lineno||frameA.colno!==
frameB.colno||frameA.function!==frameB.function)return!1}return!0};Dedupe.prototype._getExceptionFromEvent=function(event){return event.exception&&event.exception.values&&event.exception.values[0]};Dedupe.prototype._isSameExceptionEvent=function(currentEvent,previousEvent){var previousException=this._getExceptionFromEvent(previousEvent),currentException=this._getExceptionFromEvent(currentEvent);return previousException&&currentException&&previousException.type===currentException.type&&previousException.value===
currentException.value&&this._isSameFingerprint(currentEvent,previousEvent)&&this._isSameStacktrace(currentEvent,previousEvent)?!0:!1};Dedupe.prototype._isSameFingerprint=function(currentEvent,previousEvent){currentEvent=currentEvent.fingerprint;previousEvent=previousEvent.fingerprint;if(!currentEvent&&!previousEvent)return!0;if(currentEvent&&!previousEvent||!currentEvent&&previousEvent)return!1;try{return currentEvent.join("")===previousEvent.join("")}catch(_oO){return!1}};Dedupe.id="Dedupe";return Dedupe}();
exports.Dedupe=global}
//# sourceMappingURL=module$node_modules$$sentry$browser$dist$integrations$dedupe.js.map
