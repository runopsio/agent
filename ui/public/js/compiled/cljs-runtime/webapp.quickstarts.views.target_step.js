goog.provide('webapp.quickstarts.views.target_step');
webapp.quickstarts.views.target_step.section = (function webapp$quickstarts$views$target_step$section(head,text,child){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"section","section",-300141526),webapp.components.divider.main(),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [webapp.components.headings.h3,head,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"text-gray-800"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"small.block.mb-regular.text-gray-600","small.block.mb-regular.text-gray-600",-1767202159),text], null),child], null);
});
webapp.quickstarts.views.target_step.list_item = (function webapp$quickstarts$views$target_step$list_item(item){
return cljs.core.with_meta(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),["sm:col-span-",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"col-span","col-span",-232603210).cljs$core$IFn$_invoke$arity$1(item))].join('')], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",-368444759),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"text-sm font-medium text-gray-500"], null),new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(item)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",-1340437629),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"mt-1 text-sm text-gray-900"], null),new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(item)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(item)], null));
});
webapp.quickstarts.views.target_step.form = (function webapp$quickstarts$views$target_step$form(change_step,name,target_type,configs,secret_path_env,agent_tag){
var groups_flag = cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs.core.deref(re_frame.core.subscribe.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("webapp.subs","feature-flags","webapp.subs/feature-flags",-995610411)], null))),new cljs.core.Keyword(null,"groups-flag","groups-flag",-39991063));
var roles = reagent.core.atom.cljs$core$IFn$_invoke$arity$1("");
return (function (_){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [webapp.components.headings.h2,"Create a new target",new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"mb-4 col-span-2"], null)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"form.mb-regular","form.mb-regular",-864175662),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-submit","on-submit",1227871159),(function (e){
e.preventDefault();

(change_step.cljs$core$IFn$_invoke$arity$2 ? change_step.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"target","target",253001721),"complete") : change_step.call(null,new cljs.core.Keyword(null,"target","target",253001721),"complete"));

(change_step.cljs$core$IFn$_invoke$arity$2 ? change_step.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"task","task",-1476607993),"current") : change_step.call(null,new cljs.core.Keyword(null,"task","task",-1476607993),"current"));

var roles_list = webapp.formatters.comma_string_to_list(cljs.core.deref(roles));
return re_frame.core.dispatch(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("webapp.targets.events","create-target","webapp.targets.events/create-target",1595564906),cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"name","name",1843675177),cljs.core.deref(name),new cljs.core.Keyword(null,"type","type",1174270348),cljs.core.deref(target_type),new cljs.core.Keyword(null,"tags","tags",1771418977),agent_tag,new cljs.core.Keyword(null,"secret_provider","secret_provider",1310227596),"env-var",new cljs.core.Keyword(null,"secret_path","secret_path",-725814244),secret_path_env,new cljs.core.Keyword(null,"config","config",994861415),null], null),(cljs.core.truth_(groups_flag)?new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"groups","groups",-136896102),((cljs.core.empty_QMARK_(roles_list))?null:roles_list)], null):null),((cljs.core.not(groups_flag))?new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"roles","roles",143379530),((cljs.core.empty_QMARK_(roles_list))?null:roles_list)], null):null)], 0))], null));
})], null),webapp.quickstarts.views.target_step.section("Target information","",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.grid.grid-cols-2.gap-regular","div.grid.grid-cols-2.gap-regular",-1979651726),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [webapp.components.forms.input,new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"label","label",1718410804),"Name",new cljs.core.Keyword(null,"on-change","on-change",-732046149),(function (p1__32959_SHARP_){
return cljs.core.reset_BANG_(name,p1__32959_SHARP_.target.value);
}),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Target name",new cljs.core.Keyword(null,"required","required",1807647006),true,new cljs.core.Keyword(null,"value","value",305978217),cljs.core.deref(name)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [webapp.components.forms.select,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"label","label",1718410804),"Target type",new cljs.core.Keyword(null,"selected","selected",574897764),cljs.core.deref(target_type),new cljs.core.Keyword(null,"disabled","disabled",-1529784218),true,new cljs.core.Keyword(null,"options","options",99638489),webapp.targets.constants.targets_types_list], null)], null)], null)], null)),webapp.quickstarts.views.target_step.section("Your's secrets management details","",new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dl","dl",-2140151713),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"], null),cljs.core.map.cljs$core$IFn$_invoke$arity$2(webapp.quickstarts.views.target_step.list_item,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1843675177),"Hosted by",new cljs.core.Keyword(null,"value","value",305978217),"self hosted",new cljs.core.Keyword(null,"col-span","col-span",-232603210),(1)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1843675177),"Secret Provider",new cljs.core.Keyword(null,"value","value",305978217),"env-var",new cljs.core.Keyword(null,"col-span","col-span",-232603210),(1)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1843675177),"Secret Path",new cljs.core.Keyword(null,"value","value",305978217),secret_path_env,new cljs.core.Keyword(null,"col-span","col-span",-232603210),(1)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1843675177),"Agent tag",new cljs.core.Keyword(null,"value","value",305978217),((clojure.string.blank_QMARK_(agent_tag))?"(empty tag)":agent_tag),new cljs.core.Keyword(null,"col-span","col-span",-232603210),(1)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1843675177),"Environment's variables",new cljs.core.Keyword(null,"value","value",305978217),((cljs.core.empty_QMARK_(configs))?"There are no environment variables configured.":new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [webapp.components.logs_container.container,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"status","status",-1997798413),new cljs.core.Keyword(null,"success","success",1890645906),new cljs.core.Keyword(null,"logs","logs",1068148008),clojure.string.join.cljs$core$IFn$_invoke$arity$1(cljs.core.mapv.cljs$core$IFn$_invoke$arity$2((function (p1__32961_SHARP_){
return ["  \"",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"key","key",-1516042587).cljs$core$IFn$_invoke$arity$1(p1__32961_SHARP_)),"\": ","\"",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(p1__32961_SHARP_)),"\"\n"].join('');
}),configs))], null)], null)),new cljs.core.Keyword(null,"col-span","col-span",-232603210),(2)], null)], null))], null)),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.grid.grid-cols-2.gap-regular","div.grid.grid-cols-2.gap-regular",-1979651726),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"col-span-1"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"col-span-1 justify-self-end"], null),webapp.components.button.primary(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"text","text",-1790561697),"Create",new cljs.core.Keyword(null,"type","type",1174270348),"submit"], null))], null)], null)], null)], null);
});
});

//# sourceMappingURL=webapp.quickstarts.views.target_step.js.map
