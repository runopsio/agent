{"version":3,"sources":["webapp/quickstarts/views/environment_step.cljs"],"mappings":"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","names":["webapp.quickstarts.views.environment-step/tab-view","tab","configs","secret-path-env","agent-tag","agent-token","G__36212","js/Error","webapp.components.logs-container/container","webapp.utilities/script-agent","webapp.quickstarts.views.environment-step/main","component->config-inputs","request-agent-list","script-view","reagent.core.atom","p__36227","map__36228","cljs.core/--destructure-map","cljs.core.get","p1__36217#","cljs.core/deref","p1__36218#","p1__36219#","_","config-values","target-name","target-type","fx-get-current-step-infos","secrets-host","e","webapp.components.forms/input","cljs.core/reset!","webapp.formatters/replace-empty-space->dash","cljs.core/seq","fexpr__36230","cljs.core.keyword","webapp.targets.constants/target-config-help-link","webapp.components.radio-button/main","cljs.core._EQ_","p1__36220#","p1__36221#","p1__36222#","webapp.components.headings/h4","webapp.components.tabs/tabs","webapp.components.divider/main","webapp.components.button/primary"],"sourcesContent":["(ns webapp.quickstarts.views.environment-step\n  (:require [reagent.core :as r]\n            [webapp.components.button :as button]\n            [webapp.components.divider :as divider]\n            [webapp.components.forms :as forms]\n            [webapp.components.headings :as headings]\n            [webapp.components.logs-container :as logs]\n            [webapp.components.radio-button :as radio-button]\n            [webapp.components.tabs :as tabs]\n            [webapp.formatters :as f]\n            [webapp.targets.constants :as target-consts]\n            [webapp.utilities :as utilities]))\n\n(defn tab-view [tab configs secret-path-env agent-tag agent-token]\n  (case tab\n    \"Kubernets - Bash\" [:div\n                        [logs/container\n                         {:status :success\n                          :logs (utilities/script-agent :kubernets-bash configs secret-path-env agent-tag agent-token)} \"\"]]\n    \"Kubernets - Helm\" [:div\n                        [logs/container\n                         {:status :success\n                          :logs (utilities/script-agent :kubernets-heml configs secret-path-env agent-tag agent-token)} \"\"]]\n    \"Localhost - Docker/Bash\" [:div\n                               [logs/container\n                                {:status :success\n                                 :logs (utilities/script-agent :localhost-docker-bash configs secret-path-env agent-tag agent-token)} \"\"]]))\n\n(defn main\n  [component->config-inputs request-agent-list]\n  (let [script-view (r/atom \"Kubernets - Helm\")]\n    (fn [_ _ {:keys [config-values secret-path-env agent-tag target-name target-type fx-get-current-step-infos agent-token secrets-host]}]\n      [:form\n       {:on-submit (fn [e]\n                     (.preventDefault e)\n                     (request-agent-list))}\n       [:section {:class \"my-regular\"}\n        [:div {:class \"grid grid-cols-2 gap-x-regular\"}\n         [forms/input {:label \"Give a nickname for your connection\"\n                       :placeholder \"my-mysql-test\"\n                       :on-change #(reset! target-name (f/replace-empty-space->dash (-> % .-target .-value)))\n                       :required true\n                       :value @target-name}]]\n\n        (when (seq (component->config-inputs))\n          [:div {:class \"my-regular\"}\n           [:div {:class \"mb-small\"}\n            [:label {:class \"block text-sm font-medium text-gray-700\"}\n             \"Complete the configurations of your connection:\"]\n            [:label {:class \"text-xs text-gray-700\"}\n             \"For more details about this connection's configurations access \"]\n            [:a {:class \"text-xs text-gray-700 underline\"\n                 :href ((keyword @target-type) target-consts/target-config-help-link)\n                 :target \"_blank\"\n                 :rel \"noopener noreferrer\"}\n             \"this link.\"]]\n           [:div {:class \"grid grid-cols-2 gap-x-regular\"}\n            (component->config-inputs)]])\n\n        [:div {:class \"mb-large\"}\n         [:label {:class \"mb-small block text-sm font-medium text-gray-700\"}\n          \"Who will be the host of your configurations?\"]\n         [:div {:class \"grid grid-cols-2 gap-regular mb-regular\"}\n          [radio-button/main {:label \"runops-hosted\"\n                              :name :hosted\n                              :value :runops\n                              :on-change #(reset! secrets-host (-> % .-target .-value))\n                              :checked? (= @secrets-host \"runops\")}]\n          [radio-button/main {:label \"self-hosted\"\n                              :name :hosted\n                              :value :self\n                              :on-change #(reset! secrets-host (-> % .-target .-value))\n                              :checked? (= @secrets-host \"self\")}]]]]\n\n       (when (= @secrets-host \"self\")\n         [:section\n          [headings/h4 \"Environment's configurations\"]\n          [:small {:class \"block mb-regular text-gray-600\"}\n           \"Here we will configure the environment which will run your connection. We named this environment Agent.\"]\n\n          [:div {:class \"grid grid-cols-2 gap-x-regular\"}\n\n           [forms/input {:label \"Environment variable for your connection\"\n                         :on-change #(reset! secret-path-env (-> % .-target .-value))\n                         :required true\n                         :value @secret-path-env}]\n           [forms/input {:label \"Agent nickname\"\n                         :placeholder \"(empty allowed)\"\n                         :on-change #(reset! agent-tag (-> % .-target .-value))\n                         :required false\n                         :value @agent-tag}]]\n\n          [:div {:class \"my-regular\"}\n           [headings/h4 \"Run Script\"]\n           [:small {:class \"block text-gray-600\"}\n            \"Here's everything you need to get the environment (Agent) up and running.\"]\n\n           [tabs/tabs {:on-change #(reset! script-view %)\n                       :tabs [\"Kubernets - Helm\" \"Kubernets - Bash\" \"Localhost - Docker/Bash\"]}]\n           [tab-view @script-view config-values @secret-path-env @agent-tag agent-token]]])\n\n       (divider/main)\n       [:div {:class \"grid grid-cols-4 gap-regular items-center my-regular\"}\n        [:div.col-span-3\n         [:small {:class \"block text-gray-600\"}\n          \"After configuring your agent, verify here if everything is ok and go to the next step. If everything is ok it will create your connection (target) too!\"]]\n        [:div.col-span-1\n         (button/primary {:text \"Verify and Create\"\n                          :disabled (= (:status (fx-get-current-step-infos)) \"complete\")\n                          :type \"submit\"})]]])))\n"]}