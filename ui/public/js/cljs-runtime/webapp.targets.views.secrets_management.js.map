{"version":3,"sources":["webapp/targets/views/secrets_management.cljs"],"mappings":"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","names":["webapp.targets.views.secrets-management/radio","label","name","value","on-change","checked?","webapp.targets.views.secrets-management/tab-view","tab","configs","secret-path","agent-token","G__31306","js/Error","webapp.components.logs-container/container","webapp.utilities/script-agent","webapp.targets.views.secrets-management/main","_","script-view","reagent.core.atom","p__31320","map__31321","cljs.core/--destructure-map","cljs.core.get","p1__31307#","p1__31308#","on-change->secrets-host-ui","on-change->secret-provider","on-change->secret-path","on-change->config-key","on-change->config-value","on-click->add-more","secrets-host-ui","secret-provider","secret-provider-disabled?","secret-path-disabled?","config-key","config-value","component->config-inputs","G__31329","cljs.core._EQ_","G__31330","p1__31310#","p1__31312#","p1__31313#","p1__31309#","webapp.components.forms/select","G__31331","webapp.components.forms/input","G__31332","p1__31311#","cljs.core/deref","webapp.components.tabs/tabs","cljs.core/reset!","G__31333","G__31334","webapp.components.button/secondary"],"sourcesContent":["(ns webapp.targets.views.secrets-management\n  (:require\n   [reagent.core :as r]\n   [re-frame.core :as rf]\n   [webapp.components.button :as button]\n   [webapp.components.forms :as forms]\n   [webapp.components.logs-container :as logs]\n   [webapp.components.tabs :as tabs]\n   [webapp.utilities :as utilities]))\n\n(defn radio [label name value on-change checked?]\n  [:div\n   [:label.flex.items-center\n    [:input.mr-small {:type :radio :name name :value value :on-change on-change :default-checked checked?}]\n    label]])\n\n(defn tab-view [tab configs secret-path agent-token]\n  (case tab\n    \"Kubernets - Bash\" [:div\n                        [logs/container\n                         {:status :success\n                          :logs (utilities/script-agent :kubernets-bash configs secret-path \"\" agent-token)} \"\"]]\n    \"Kubernets - Helm\" [:div\n                        [logs/container\n                         {:status :success\n                          :logs (utilities/script-agent :kubernets-heml configs secret-path \"\" agent-token)} \"\"]]\n    \"Localhost - Docker/Bash\" [:div\n                               [logs/container\n                                {:status :success\n                                 :logs (utilities/script-agent :localhost-docker-bash configs secret-path \"\" agent-token)} \"\"]]))\n\n(defn main\n  [_]\n  (let [script-view (r/atom \"Kubernets - Helm\")]\n    (fn\n      [{:keys [on-change->secrets-host-ui\n               on-change->secret-provider\n               on-change->secret-path\n               on-change->config-key\n               on-change->config-value\n               on-click->add-more\n               secrets-host-ui\n               secret-provider\n               secret-provider-disabled?\n               secret-path\n               secret-path-disabled?\n               config-key\n               config-value\n               configs\n               component->config-inputs\n               agent-token]}]\n      [:<>\n       [:div.grid.grid-cols-2.gap-regular.mb-regular\n        [radio \"runops-hosted\" :hosted :runops #(on-change->secrets-host-ui (-> % .-target .-value)) (= secrets-host-ui \"runops\")]\n        [radio \"self-hosted\" :hosted :self #(on-change->secrets-host-ui (-> % .-target .-value)) (= secrets-host-ui \"self\")]]\n\n       (if (= secrets-host-ui \"self\")\n         [:<>\n          [:div.grid.grid-cols-2.gap-regular\n           (forms/select {:label \"Secret provider\"\n                          :on-change #(on-change->secret-provider (-> % .-target .-value))\n                          :selected secret-provider\n                          :options [{:value \"aws\" :text \"aws\"}\n                                    {:value \"env-var\" :text \"env-var\"}\n                                    {:value \"hashicorp/db\" :text \"hashicorp/db\"}\n                                    {:value \"hashicorp/kv\" :text \"hashicorp/kv\"}]\n                          :disabled secret-provider-disabled?})\n           [forms/input {:label \"Secret path\"\n                         :on-change #(on-change->secret-path (-> % .-target .-value))\n                         :placeholder \"Name of path to your secret\"\n                         :disabled secret-path-disabled?\n                         :value secret-path}]]\n\n          (when (= secret-provider \"env-var\")\n            [:div\n             [:small\n              \"Add a set of credentials to your runops agent, using:\"]\n\n             [tabs/tabs {:on-change #(reset! script-view %)\n                         :tabs [\"Kubernets - Helm\" \"Kubernets - Bash\" \"Localhost - Docker/Bash\"]}]\n             [tab-view @script-view configs secret-path agent-token]])]\n\n         [:<>\n          [:div.grid.grid-cols-2.gap-regular\n           [:label {:class \"block text-sm font-medium text-gray-700\"} \"Key\"]\n           [:label {:class \"block text-sm font-medium text-gray-700\"} \"Value\"]\n\n           (component->config-inputs)\n\n           [forms/input {:on-change #(on-change->config-key (-> % .-target .-value))\n                         :classes \"whitespace-pre overflow-x\"\n                         :placeholder \"Insert key env\"\n                         :value config-key}]\n           [forms/input {:on-change #(on-change->config-value (-> % .-target .-value))\n                         :classes \"whitespace-pre overflow-x\"\n                         :placeholder \"Insert value env\"\n                         :type \"password\"\n                         :value config-value}]]\n\n          [:div.grid.grid-cols-1.justify-items-end.mb-4\n           (button/secondary {:text \"+ add more\"\n                              :on-click #(on-click->add-more)\n                              :variant :small})]])])))\n"]}