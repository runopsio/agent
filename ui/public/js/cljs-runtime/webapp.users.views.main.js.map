{"version":3,"sources":["webapp/users/views/main.cljs"],"mappings":";AAYA,oCAAA,pCAAMA,gFACHC;AADH,AAEE,mCAAA,mFAAA,sFAAA,mFAAA,uFAAA,mFAAA,yEAAA,sHAAA,mFAAA,mJAAA,2CAAA,wDAAA,wCAAA,mFAAA,mFAAA,mFAAA,2NAAA,mFAAA,kNAAA,mFAAA,mHAAA,mFAAA,gPAAA,mFAAA,yMAAA,mFAAA,oGAAA,mFAAA,sGAAA,2CAAA,qDAAA,IAAA,6DAAA,jiGAACC,8lBAIIC,2KAAkB,AAAA,gFAAKF,4gBAEkB,AAAA,mFAAOA,gMACrB,AAAA,qFAAQA,0ZAGpC,AAACG,uCAAgC,AAAA,uFAASH,qMACb,AAAA,wFAASA;AAX1C,AAgBiB,8BAAA,mFAAA,gEAAA,1KAACI,6PAA0BC,yCAAiBL;WAhB7D,uCAAA,2CAAA,oDAiBO,AAAA,gFAAKA;;AAEd,qCAAA,rCAAMM,kFACHC;AADH,AAAA,0FAAA,mDAGG,+BAAA,mFAAA,sFAAA,mFAAA,uFAAA,mFAAA,6EAAA,aAAA,mFAAA,6EAAA,uBAAA,mFAAA,mHAAA,mFAAA,uDAAA,iBAAA,mFAAA,uDAAA,iBAAA,mFAAA,uDAAA,2BAAA,v3CAACC,63CAWD,AAACC,6BAAW,AAACC,8CAAM,AAACC,4CAAIZ,kCAAUQ;;AAErC,yCAAA,zCAAMK,0FACHL;AADH,AAAA,0FAAA,iIAAA,4PAAA,mFAAA,wGAAA,mFAAA,vbAGIM,8BAAY,qEAAA,xBAAK,AAACC,gBAAMP,kBAAiB,kCAAA,GAAA,nCAAI,0BAAA,zBAAG,AAACO,gBAAMP,0WAGvD,iCAAA,2CAAA,sDAAA,cAAA,6DAAA,7MAACQ;AAAD,AAC4B,8BAAA,mFAAA,gEAAA,1KAACX,6PAA0BY;;;AAE3D;;;sCAAA,tCAAMC;AAAN,AAGE,YAAA,AAAAC,RAAMX,wBAAO,sDAAA,mFAAA,zIAACY;AAAd,AACE,uBAAA,mFAAA,1GAACf;;AADH,0FAAA,yGAAA,mFAAA,jIAGG,AAACQ,uCAAeL,6IACV,AAACD,mCAAWC","names":["webapp.users.views.main/list-item","item","webapp.components.table/row","webapp.components.typography/small","webapp.formatters/list-to-comma-string","re-frame.core/dispatch","webapp.users.views.update-user-form/form","webapp.users.views.main/users-list","users","webapp.components.table/header","webapp.components.table/rows","cljs.core.doall","cljs.core.map","webapp.users.views.main/section-header","webapp.components.headings/h2","cljs.core/count","webapp.components.button/primary","webapp.users.views.create-user-form/form","webapp.users.views.main/users-panel","cljs.core/deref","re_frame.core.subscribe"],"sourcesContent":["(ns webapp.users.views.main\n  (:require [re-frame.core :as rf]\n            [webapp.components.typography :as typo]\n            [webapp.users.events :as events]\n            [webapp.subs :as subs]\n            [webapp.formatters :as formatters]\n            [webapp.components.headings :as headings]\n            [webapp.components.button :as button]\n            [webapp.components.table :as table]\n            [webapp.users.views.create-user-form :as create-user]\n            [webapp.users.views.update-user-form :as update-user]))\n\n(defn list-item\n  [item]\n  (table/row\n   [:div.grid.grid-cols-2\n    [:div.grid.grid-cols-10\n     [:div.col-span-1\n      [typo/small [:span (:id item)] {:class \"text-gray-400\"}]]\n     [:div.grid.col-span-9\n      [:small.font-semibold.text-gray-700.block (:name item)]\n      [:small.block.text-gray-500 (:email item)]]]\n    [:div.grid.grid-cols-4.content-center\n     [:small.text-xs.text-gray-500\n      (formatters/list-to-comma-string (:groups item))]\n     [:small.text-xs.text-gray-500 (:status item)]\n\n     [:div.settings.justify-self-end\n      [:a.block.text-sm.text-blue-500\n       {:href \"#\"\n        :on-click #(rf/dispatch [:open-modal [update-user/form item]])} \"Edit\"]]]]\n   {:key (:id item)}))\n\n(defn users-list\n  [users]\n  [:div\n   (table/header\n    [:div.grid.grid-cols-2\n     [:div.grid.grid-cols-10\n      [:small.col-span-1 \"ID\"]\n      [:small.col-span-9 \"Name\"]]\n     [:div.grid.grid-cols-4.content-center\n      [:small \"Groups\"]\n      [:small \"Status\"]\n      [:small \"\"]]]\n    nil)\n\n   (table/rows (doall (map list-item users)))])\n\n(defn section-header\n  [users]\n  [:div.grid.grid-cols-4.items-center.mb-large\n   [headings/h2 (str (count users) \" Member\" (if (< (count users) 2) \"\" \"s\"))]\n   [:div.search-bar.col-span-2]\n   [:div\n    (button/primary {:text \"Create user\"\n                     :on-click #(rf/dispatch [:open-modal [create-user/form]])})]])\n\n(defn users-panel\n  \"Entry-point for user panel view\"\n  []\n  (let [users @(rf/subscribe [::subs/users])]\n    (rf/dispatch [::events/get-users])\n    [:section\n     (section-header users)\n     [:div (users-list users)]]))\n"]}