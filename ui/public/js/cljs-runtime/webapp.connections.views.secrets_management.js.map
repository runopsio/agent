{"version":3,"sources":["webapp/connections/views/secrets_management.cljs"],"mappings":"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","names":["webapp.connections.views.secrets-management/radio","label","name","value","on-change","checked?","webapp.connections.views.secrets-management/main","_","script-view","reagent.core.atom","p__30300","map__30301","cljs.core/--destructure-map","cljs.core.get","p1__30290#","p1__30291#","on-change->secrets-host-ui","on-change->secret-provider","on-change->secret-path","on-change->config-key","on-change->config-value","on-click->add-more","secrets-host-ui","secret-provider","secret-provider-disabled?","secret-path","secret-path-disabled?","config-key","config-value","configs","component->config-inputs","agent-token","agent-tag","webapp.components.headings/h4","G__30308","cljs.core._EQ_","G__30309","p1__30294#","p1__30297#","p1__30298#","p1__30292#","webapp.components.forms/select","G__30310","webapp.components.forms/input","G__30311","p1__30295#","cljs.core/deref","webapp.components.tabs/tabs","cljs.core/reset!","webapp.connections.views.agent-scripts-tab-view/main","G__30312","G__30313","webapp.components.button/secondary"],"sourcesContent":["(ns webapp.connections.views.secrets-management\n  (:require [reagent.core :as r]\n            [webapp.components.button :as button]\n            [webapp.components.forms :as forms]\n            [webapp.components.headings :as h]\n            [webapp.components.tabs :as tabs]\n            [webapp.connections.views.agent-scripts-tab-view :as agent-scripts-tab-view]))\n\n(defn radio [label name value on-change checked?]\n  [:div\n   [:label.flex.items-center\n    [:input.mr-small {:type :radio :name name :value value :on-change on-change :default-checked checked?}]\n    label]])\n\n(defn main\n  [_]\n  (let [script-view (r/atom \"Kubernetes - Helm\")]\n    (fn\n      [{:keys [on-change->secrets-host-ui\n               on-change->secret-provider\n               on-change->secret-path\n               on-change->config-key\n               on-change->config-value\n               on-click->add-more\n               secrets-host-ui\n               secret-provider\n               secret-provider-disabled?\n               secret-path\n               secret-path-disabled?\n               config-key\n               config-value\n               configs\n               component->config-inputs\n               agent-token\n               agent-tag]}]\n      [:<>\n       [:header {:class \"col-span-2 mb-regular\"}\n        [h/h4 \"Who hosts your secrets\"]]\n       [:div {:class \"flex gap-regular mb-large\"}\n        [radio \"self-hosted\" :hosted :self #(on-change->secrets-host-ui (-> % .-target .-value)) (= secrets-host-ui \"self\")]\n        [radio \"runops\" :hosted :runops #(on-change->secrets-host-ui (-> % .-target .-value)) (= secrets-host-ui \"runops\")]]\n\n       (if (= secrets-host-ui \"self\")\n         [:<>\n          [:div.grid.grid-cols-2.gap-regular\n           (forms/select {:label \"Secret provider\"\n                          :on-change #(on-change->secret-provider (-> % .-target .-value))\n                          :selected secret-provider\n                          :options [{:value \"aws\" :text \"aws\"}\n                                    {:value \"env-var\" :text \"env-var\"}\n                                    {:value \"hashicorp/db\" :text \"hashicorp/db\"}\n                                    {:value \"hashicorp/kv\" :text \"hashicorp/kv\"}]\n                          :disabled secret-provider-disabled?})\n           [forms/input {:label \"Secret path\"\n                         :on-change #(on-change->secret-path (-> % .-target .-value))\n                         :placeholder \"Name of path to your secret\"\n                         :disabled secret-path-disabled?\n                         :value secret-path}]]\n\n          (when (= secret-provider \"env-var\")\n            [:div\n             [:small\n              \"Add a set of credentials to your runops agent, using:\"]\n\n             [tabs/tabs {:on-change #(reset! script-view %)\n                         :tabs [\"Kubernetes - Helm\" \"Kubernetes - Bash\" \"Localhost - Docker/Bash\"]}]\n             [agent-scripts-tab-view/main @script-view configs secret-path agent-tag agent-token]])]\n\n         [:<>\n          [:div.grid.grid-cols-2.gap-regular\n           [:label {:class \"block text-sm font-medium text-gray-700\"} \"Key\"]\n           [:label {:class \"block text-sm font-medium text-gray-700\"} \"Value\"]\n\n           (component->config-inputs)\n\n           [forms/input {:on-change #(on-change->config-key (-> % .-target .-value))\n                         :classes \"whitespace-pre overflow-x\"\n                         :placeholder \"Insert key env\"\n                         :value config-key}]\n           [forms/input {:on-change #(on-change->config-value (-> % .-target .-value))\n                         :classes \"whitespace-pre overflow-x\"\n                         :placeholder \"Insert value env\"\n                         :type \"password\"\n                         :value config-value}]]\n\n          [:div.grid.grid-cols-1.justify-items-end.mb-4\n           (button/secondary {:text \"+ add more\"\n                              :on-click #(on-click->add-more)\n                              :variant :small})]])])))\n"]}