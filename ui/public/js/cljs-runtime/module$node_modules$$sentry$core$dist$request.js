shadow$provide.module$node_modules$$sentry$core$dist$request=function(global,require,module,exports){function getSdkMetadataForEnvelopeHeader(api){if(api.metadata&&api.metadata.sdk)return api=api.metadata.sdk,{name:api.name,version:api.version}}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$tslib$tslib");exports.sessionToSentryRequest=function(session,api){var sdkInfo=getSdkMetadataForEnvelopeHeader(api);sdkInfo=JSON.stringify(tslib_1.__assign(tslib_1.__assign({sent_at:(new Date).toISOString()},
sdkInfo&&{sdk:sdkInfo}),api.forceEnvelope()&&{dsn:api.getDsn().toString()}));var type="aggregates"in session?"sessions":"session",itemHeaders=JSON.stringify({type});return{body:sdkInfo+"\n"+itemHeaders+"\n"+JSON.stringify(session),type,url:api.getEnvelopeEndpointWithUrlEncodedAuth()}};exports.eventToSentryRequest=function(event,api){var sdkInfo=getSdkMetadataForEnvelopeHeader(api),eventType=event.type||"event",useEnvelope="transaction"===eventType||api.forceEnvelope(),_a=event.debug_meta||{},transactionSampling=
_a.transactionSampling,metadata=tslib_1.__rest(_a,["transactionSampling"]);_a=transactionSampling||{};transactionSampling=_a.method;_a=_a.rate;0===Object.keys(metadata).length?delete event.debug_meta:event.debug_meta=metadata;metadata=JSON;var JSCompiler_temp_const=metadata.stringify,JSCompiler_temp;if(sdkInfo){if(JSCompiler_temp=api.metadata.sdk)event.sdk=event.sdk||{},event.sdk.name=event.sdk.name||JSCompiler_temp.name,event.sdk.version=event.sdk.version||JSCompiler_temp.version,event.sdk.integrations=
tslib_1.__spread(event.sdk.integrations||[],JSCompiler_temp.integrations||[]),event.sdk.packages=tslib_1.__spread(event.sdk.packages||[],JSCompiler_temp.packages||[]);JSCompiler_temp=event}else JSCompiler_temp=event;metadata={body:JSCompiler_temp_const.call(metadata,JSCompiler_temp),type:eventType,url:useEnvelope?api.getEnvelopeEndpointWithUrlEncodedAuth():api.getStoreEndpointWithUrlEncodedAuth()};useEnvelope&&(event=JSON.stringify(tslib_1.__assign(tslib_1.__assign({event_id:event.event_id,sent_at:(new Date).toISOString()},
sdkInfo&&{sdk:sdkInfo}),api.forceEnvelope()&&{dsn:api.getDsn().toString()})),eventType=JSON.stringify({type:eventType,sample_rates:[{id:transactionSampling,rate:_a}]}),metadata.body=event+"\n"+eventType+"\n"+metadata.body);return metadata}}
//# sourceMappingURL=module$node_modules$$sentry$core$dist$request.js.map
