shadow$provide.module$node_modules$$sentry$utils$dist$instrument=function(global,require,module,exports){function triggerHandlers(type,data){var _a;if(type&&handlers[type])try{for(var _b=tslib_1.__values(handlers[type]||[]),_c=_b.next();!_c.done;_c=_b.next()){var handler=_c.value;try{handler(data)}catch(e){logger_1.logger.error("Error while triggering instrumentation handler.\nType: "+type+"\nName: "+stacktrace_1.getFunctionName(handler)+"\nError: "+e)}}}catch(e_1_1){var e_1={error:e_1_1}}finally{try{_c&&
!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error;}}}function instrumentConsole(){"console"in global&&"debug info warn error log assert".split(" ").forEach(function(level){level in global.console&&object_1.fill(global.console,level,function(originalConsoleLevel){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];triggerHandlers("console",{args,level});originalConsoleLevel&&Function.prototype.apply.call(originalConsoleLevel,global.console,args)}})})}
function instrumentFetch(){supports_1.supportsNativeFetch()&&object_1.fill(global,"fetch",function(originalFetch){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var handlerData={args,fetchData:{method:getFetchMethod(args),url:getFetchUrl(args)},startTimestamp:Date.now()};triggerHandlers("fetch",tslib_1.__assign({},handlerData));return originalFetch.apply(global,args).then(function(response){triggerHandlers("fetch",tslib_1.__assign(tslib_1.__assign({},handlerData),
{endTimestamp:Date.now(),response}));return response},function(error){triggerHandlers("fetch",tslib_1.__assign(tslib_1.__assign({},handlerData),{endTimestamp:Date.now(),error}));throw error;})}})}function getFetchMethod(fetchArgs){void 0===fetchArgs&&(fetchArgs=[]);return"Request"in global&&is_1.isInstanceOf(fetchArgs[0],Request)&&fetchArgs[0].method?String(fetchArgs[0].method).toUpperCase():fetchArgs[1]&&fetchArgs[1].method?String(fetchArgs[1].method).toUpperCase():"GET"}function getFetchUrl(fetchArgs){void 0===
fetchArgs&&(fetchArgs=[]);return"string"===typeof fetchArgs[0]?fetchArgs[0]:"Request"in global&&is_1.isInstanceOf(fetchArgs[0],Request)?fetchArgs[0].url:String(fetchArgs[0])}function instrumentXHR(){if("XMLHttpRequest"in global){var requestKeys=[],requestValues=[],xhrproto=XMLHttpRequest.prototype;object_1.fill(xhrproto,"open",function(originalOpen){return function(){for(var args=[],_i$jscomp$0=0;_i$jscomp$0<arguments.length;_i$jscomp$0++)args[_i$jscomp$0]=arguments[_i$jscomp$0];var xhr=this;_i$jscomp$0=
args[1];xhr.__sentry_xhr__={method:is_1.isString(args[0])?args[0].toUpperCase():args[0],url:args[1]};is_1.isString(_i$jscomp$0)&&"POST"===xhr.__sentry_xhr__.method&&_i$jscomp$0.match(/sentry_key/)&&(xhr.__sentry_own_request__=!0);var onreadystatechangeHandler=function(){if(4===xhr.readyState){try{xhr.__sentry_xhr__&&(xhr.__sentry_xhr__.status_code=xhr.status)}catch(e){}try{var requestPos=requestKeys.indexOf(xhr);if(-1!==requestPos){requestKeys.splice(requestPos);var args_1=requestValues.splice(requestPos)[0];
xhr.__sentry_xhr__&&void 0!==args_1[0]&&(xhr.__sentry_xhr__.body=args_1[0])}}catch(e){}triggerHandlers("xhr",{args,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr})}};"onreadystatechange"in xhr&&"function"===typeof xhr.onreadystatechange?object_1.fill(xhr,"onreadystatechange",function(original){return function(){for(var readyStateArgs=[],_i=0;_i<arguments.length;_i++)readyStateArgs[_i]=arguments[_i];onreadystatechangeHandler();return original.apply(xhr,readyStateArgs)}}):xhr.addEventListener("readystatechange",
onreadystatechangeHandler);return originalOpen.apply(xhr,args)}});object_1.fill(xhrproto,"send",function(originalSend){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];requestKeys.push(this);requestValues.push(args);triggerHandlers("xhr",{args,startTimestamp:Date.now(),xhr:this});return originalSend.apply(this,args)}})}}function instrumentHistory(){function historyReplacementFunction(originalHistoryFunction){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=
arguments[_i];var url=2<args.length?args[2]:void 0;url&&(_i=lastHref,lastHref=url=String(url),triggerHandlers("history",{from:_i,to:url}));return originalHistoryFunction.apply(this,args)}}if(supports_1.supportsHistory()){var oldOnPopState=global.onpopstate;global.onpopstate=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];_i=global.location.href;var from=lastHref;lastHref=_i;triggerHandlers("history",{from,to:_i});if(oldOnPopState)try{return oldOnPopState.apply(this,
args)}catch(_oO){}};object_1.fill(global.history,"pushState",historyReplacementFunction);object_1.fill(global.history,"replaceState",historyReplacementFunction)}}function shouldSkipDOMEvent(event){if("keypress"!==event.type)return!1;try{var target=event.target;if(!target||!target.tagName)return!0;if("INPUT"===target.tagName||"TEXTAREA"===target.tagName||target.isContentEditable)return!1}catch(e){}return!0}function makeDOMEventHandler(handler,globalListener){void 0===globalListener&&(globalListener=
!1);return function(event){if(event&&lastCapturedEvent!==event&&!shouldSkipDOMEvent(event)){var name="keypress"===event.type?"input":event.type;if(void 0===debounceTimerID)handler({event,name,global:globalListener}),lastCapturedEvent=event;else{a:if(lastCapturedEvent&&lastCapturedEvent.type===event.type){try{if(lastCapturedEvent.target!==event.target){var JSCompiler_inline_result=!0;break a}}catch(e){}JSCompiler_inline_result=!1}else JSCompiler_inline_result=!0;JSCompiler_inline_result&&(handler({event,
name,global:globalListener}),lastCapturedEvent=event)}clearTimeout(debounceTimerID);debounceTimerID=global.setTimeout(function(){debounceTimerID=void 0},debounceDuration)}}}function instrumentDOM(){if("document"in global){var triggerDOMHandler=triggerHandlers.bind(null,"dom"),globalDOMEventHandler=makeDOMEventHandler(triggerDOMHandler,!0);global.document.addEventListener("click",globalDOMEventHandler,!1);global.document.addEventListener("keypress",globalDOMEventHandler,!1);["EventTarget","Node"].forEach(function(target){(target=
global[target]&&global[target].prototype)&&target.hasOwnProperty&&target.hasOwnProperty("addEventListener")&&(object_1.fill(target,"addEventListener",function(originalAddEventListener){return function(type,listener,options){if("click"===type||"keypress"==type)try{var handlers_1=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},handlerForType=handlers_1[type]=handlers_1[type]||{refCount:0};if(!handlerForType.handler){var handler=makeDOMEventHandler(triggerDOMHandler);
handlerForType.handler=handler;originalAddEventListener.call(this,type,handler,options)}handlerForType.refCount+=1}catch(e){}return originalAddEventListener.call(this,type,listener,options)}}),object_1.fill(target,"removeEventListener",function(originalRemoveEventListener){return function(type,listener,options){if("click"===type||"keypress"==type)try{var handlers_2=this.__sentry_instrumentation_handlers__||{},handlerForType=handlers_2[type];handlerForType&&(--handlerForType.refCount,0>=handlerForType.refCount&&
(originalRemoveEventListener.call(this,type,handlerForType.handler,options),handlerForType.handler=void 0,delete handlers_2[type]),0===Object.keys(handlers_2).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return originalRemoveEventListener.call(this,type,listener,options)}}))})}}function instrumentError(){_oldOnErrorHandler=global.onerror;global.onerror=function(msg,url,line,column,error){triggerHandlers("error",{column,error,line,msg,url});return _oldOnErrorHandler?_oldOnErrorHandler.apply(this,
arguments):!1}}function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=global.onunhandledrejection;global.onunhandledrejection=function(e){triggerHandlers("unhandledrejection",e);return _oldOnUnhandledRejectionHandler?_oldOnUnhandledRejectionHandler.apply(this,arguments):!0}}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$tslib$tslib");module=require("module$node_modules$$sentry$utils$dist$global");var is_1=require("module$node_modules$$sentry$utils$dist$is"),
logger_1=require("module$node_modules$$sentry$utils$dist$logger"),object_1=require("module$node_modules$$sentry$utils$dist$object"),stacktrace_1=require("module$node_modules$$sentry$utils$dist$stacktrace"),supports_1=require("module$node_modules$$sentry$utils$dist$supports");global=module.getGlobalObject();var handlers={},instrumented={};exports.addInstrumentationHandler=function(handler){if(handler&&"string"===typeof handler.type&&"function"===typeof handler.callback&&(handlers[handler.type]=handlers[handler.type]||
[],handlers[handler.type].push(handler.callback),handler=handler.type,!instrumented[handler]))switch(instrumented[handler]=!0,handler){case "console":instrumentConsole();break;case "dom":instrumentDOM();break;case "xhr":instrumentXHR();break;case "fetch":instrumentFetch();break;case "history":instrumentHistory();break;case "error":instrumentError();break;case "unhandledrejection":instrumentUnhandledRejection();break;default:logger_1.logger.warn("unknown instrumentation type:",handler)}};var lastHref,
debounceDuration=1E3,debounceTimerID,lastCapturedEvent,_oldOnErrorHandler=null,_oldOnUnhandledRejectionHandler=null}
//# sourceMappingURL=module$node_modules$$sentry$utils$dist$instrument.js.map
