shadow$provide.module$node_modules$$codemirror$matchbrackets$dist$index_cjs=function(global,require,module,exports){function matchingNodes(node,dir,brackets){let byProp=node.prop(0>dir?common.NodeProp.openedBy:common.NodeProp.closedBy);return byProp?byProp:1==node.name.length&&(node=brackets.indexOf(node.name),-1<node&&node%2==(0>dir?1:0))?[brackets[node+dir]]:null}function matchBrackets(state,pos$jscomp$0,dir,config={}){var maxScanDistance=config.maxScanDistance||1E4;config=config.brackets||"()[]{}";
var tree=language.syntaxTree(state),node=tree.resolveInner(pos$jscomp$0,dir);for(var cur=node;cur;cur=cur.parent){var matches=matchingNodes(cur.type,dir,config);if(matches&&cur.from<cur.to){a:{pos$jscomp$0=dir;dir=cur;maxScanDistance=matches;cur=dir.parent;tree={from:dir.from,to:dir.to};matches=0;if((cur=null===cur||void 0===cur?void 0:cur.cursor)&&(0>pos$jscomp$0?cur.childBefore(dir.from):cur.childAfter(dir.to))){do if(0>pos$jscomp$0?cur.to<=dir.from:cur.from>=dir.to)if(0==matches&&-1<maxScanDistance.indexOf(cur.type.name)&&
cur.from<cur.to){config={start:tree,end:{from:cur.from,to:cur.to},matched:!0};break a}else if(matchingNodes(cur.type,pos$jscomp$0,config))matches++;else if(matchingNodes(cur.type,-pos$jscomp$0,config)&&(matches--,0==matches)){config={start:tree,end:cur.from==cur.to?void 0:{from:cur.from,to:cur.to},matched:!1};break a}while(0>pos$jscomp$0?cur.prevSibling():cur.nextSibling())}config={start:tree,matched:!1}}return config}}a:if(matches=node.type,cur=0>dir?state.sliceDoc(pos$jscomp$0-1,pos$jscomp$0):state.sliceDoc(pos$jscomp$0,
pos$jscomp$0+1),node=config.indexOf(cur),0>node||0==node%2!=0<dir)config=null;else{cur={from:0>dir?pos$jscomp$0-1:pos$jscomp$0,to:0<dir?pos$jscomp$0+1:pos$jscomp$0};state=state.doc.iterRange(pos$jscomp$0,0<dir?state.doc.length:0);var depth=0;for(let distance=0;!state.next().done&&distance<=maxScanDistance;){let text=state.value;0>dir&&(distance+=text.length);let basePos=pos$jscomp$0+distance*dir;for(let pos=0<dir?0:text.length-1,end=0<dir?text.length:-1;pos!=end;pos+=dir){let found=config.indexOf(text[pos]);
if(!(0>found||tree.resolve(basePos+pos,1).type!=matches))if(0==found%2==0<dir)depth++;else if(1==depth){config={start:cur,end:{from:basePos+pos,to:basePos+pos+1},matched:found>>1==node>>1};break a}else depth--}0<dir&&(distance+=text.length)}config=state.done?{start:cur,matched:!1}:null}return config}Object.defineProperty(exports,"__esModule",{value:!0});var state$jscomp$0=require("module$node_modules$$codemirror$state$dist$index_cjs"),language=require("module$node_modules$$codemirror$language$dist$index_cjs"),
view=require("module$node_modules$$codemirror$view$dist$index_cjs"),common=require("module$node_modules$$lezer$common$dist$index_cjs");global=view.EditorView.baseTheme({".cm-matchingBracket":{backgroundColor:"#328c8252"},".cm-nonmatchingBracket":{backgroundColor:"#bb555544"}});const bracketMatchingConfig=state$jscomp$0.Facet.define({combine(configs){return state$jscomp$0.combineConfig(configs,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1E4})}}),matchingMark=view.Decoration.mark({class:"cm-matchingBracket"}),
nonmatchingMark=view.Decoration.mark({class:"cm-nonmatchingBracket"}),bracketMatchingUnique=[state$jscomp$0.StateField.define({create(){return view.Decoration.none},update(deco,tr){if(!tr.docChanged&&!tr.selection)return deco;deco=[];let config=tr.state.facet(bracketMatchingConfig);for(let range of tr.state.selection.ranges){if(!range.empty)continue;let match=matchBrackets(tr.state,range.head,-1,config)||0<range.head&&matchBrackets(tr.state,range.head-1,1,config)||config.afterCursor&&(matchBrackets(tr.state,
range.head,1,config)||range.head<tr.state.doc.length&&matchBrackets(tr.state,range.head+1,-1,config));if(!match)continue;let mark=match.matched?matchingMark:nonmatchingMark;deco.push(mark.range(match.start.from,match.start.to));match.end&&deco.push(mark.range(match.end.from,match.end.to))}return view.Decoration.set(deco,!0)},provide:f=>view.EditorView.decorations.from(f)}),global];exports.bracketMatching=function(config={}){return[bracketMatchingConfig.of(config),bracketMatchingUnique]};exports.matchBrackets=
matchBrackets}
//# sourceMappingURL=module$node_modules$$codemirror$matchbrackets$dist$index_cjs.js.map
