{
"version":3,
"file":"module$node_modules$$sentry$core$dist$integrations$inboundfilters.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@sentry/core/dist/integrations/inboundfilters.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$core$dist$integrations$inboundfilters\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar hub_1 = require(\"@sentry/hub\");\nvar utils_1 = require(\"@sentry/utils\");\n// \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\nvar DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n/** Inbound filters configurable by the user */\nvar InboundFilters = /** @class */ (function () {\n    function InboundFilters(_options) {\n        if (_options === void 0) { _options = {}; }\n        this._options = _options;\n        /**\n         * @inheritDoc\n         */\n        this.name = InboundFilters.id;\n    }\n    /**\n     * @inheritDoc\n     */\n    InboundFilters.prototype.setupOnce = function () {\n        hub_1.addGlobalEventProcessor(function (event) {\n            var hub = hub_1.getCurrentHub();\n            if (!hub) {\n                return event;\n            }\n            var self = hub.getIntegration(InboundFilters);\n            if (self) {\n                var client = hub.getClient();\n                var clientOptions = client ? client.getOptions() : {};\n                // This checks prevents most of the occurrences of the bug linked below:\n                // https://github.com/getsentry/sentry-javascript/issues/2622\n                // The bug is caused by multiple SDK instances, where one is minified and one is using non-mangled code.\n                // Unfortunatelly we cannot fix it reliably (thus reserved property in rollup's terser config),\n                // as we cannot force people using multiple instances in their apps to sync SDK versions.\n                var options = typeof self._mergeOptions === 'function' ? self._mergeOptions(clientOptions) : {};\n                if (typeof self._shouldDropEvent !== 'function') {\n                    return event;\n                }\n                return self._shouldDropEvent(event, options) ? null : event;\n            }\n            return event;\n        });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._shouldDropEvent = function (event, options) {\n        if (this._isSentryError(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to being internal Sentry Error.\\nEvent: \" + utils_1.getEventDescription(event));\n            return true;\n        }\n        if (this._isIgnoredError(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to being matched by `ignoreErrors` option.\\nEvent: \" + utils_1.getEventDescription(event));\n            return true;\n        }\n        if (this._isDeniedUrl(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to being matched by `denyUrls` option.\\nEvent: \" + utils_1.getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n            return true;\n        }\n        if (!this._isAllowedUrl(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to not being matched by `allowUrls` option.\\nEvent: \" + utils_1.getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n            return true;\n        }\n        return false;\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isSentryError = function (event, options) {\n        if (!options.ignoreInternal) {\n            return false;\n        }\n        try {\n            return ((event &&\n                event.exception &&\n                event.exception.values &&\n                event.exception.values[0] &&\n                event.exception.values[0].type === 'SentryError') ||\n                false);\n        }\n        catch (_oO) {\n            return false;\n        }\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isIgnoredError = function (event, options) {\n        if (!options.ignoreErrors || !options.ignoreErrors.length) {\n            return false;\n        }\n        return this._getPossibleEventMessages(event).some(function (message) {\n            // Not sure why TypeScript complains here...\n            return options.ignoreErrors.some(function (pattern) { return utils_1.isMatchingPattern(message, pattern); });\n        });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isDeniedUrl = function (event, options) {\n        // TODO: Use Glob instead?\n        if (!options.denyUrls || !options.denyUrls.length) {\n            return false;\n        }\n        var url = this._getEventFilterUrl(event);\n        return !url ? false : options.denyUrls.some(function (pattern) { return utils_1.isMatchingPattern(url, pattern); });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isAllowedUrl = function (event, options) {\n        // TODO: Use Glob instead?\n        if (!options.allowUrls || !options.allowUrls.length) {\n            return true;\n        }\n        var url = this._getEventFilterUrl(event);\n        return !url ? true : options.allowUrls.some(function (pattern) { return utils_1.isMatchingPattern(url, pattern); });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._mergeOptions = function (clientOptions) {\n        if (clientOptions === void 0) { clientOptions = {}; }\n        return {\n            allowUrls: tslib_1.__spread((this._options.whitelistUrls || []), (this._options.allowUrls || []), (clientOptions.whitelistUrls || []), (clientOptions.allowUrls || [])),\n            denyUrls: tslib_1.__spread((this._options.blacklistUrls || []), (this._options.denyUrls || []), (clientOptions.blacklistUrls || []), (clientOptions.denyUrls || [])),\n            ignoreErrors: tslib_1.__spread((this._options.ignoreErrors || []), (clientOptions.ignoreErrors || []), DEFAULT_IGNORE_ERRORS),\n            ignoreInternal: typeof this._options.ignoreInternal !== 'undefined' ? this._options.ignoreInternal : true,\n        };\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getPossibleEventMessages = function (event) {\n        if (event.message) {\n            return [event.message];\n        }\n        if (event.exception) {\n            try {\n                var _a = (event.exception.values && event.exception.values[0]) || {}, _b = _a.type, type = _b === void 0 ? '' : _b, _c = _a.value, value = _c === void 0 ? '' : _c;\n                return [\"\" + value, type + \": \" + value];\n            }\n            catch (oO) {\n                utils_1.logger.error(\"Cannot extract message for event \" + utils_1.getEventDescription(event));\n                return [];\n            }\n        }\n        return [];\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getLastValidUrl = function (frames) {\n        if (frames === void 0) { frames = []; }\n        var _a, _b;\n        for (var i = frames.length - 1; i >= 0; i--) {\n            var frame = frames[i];\n            if (((_a = frame) === null || _a === void 0 ? void 0 : _a.filename) !== '<anonymous>' && ((_b = frame) === null || _b === void 0 ? void 0 : _b.filename) !== '[native code]') {\n                return frame.filename || null;\n            }\n        }\n        return null;\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getEventFilterUrl = function (event) {\n        try {\n            if (event.stacktrace) {\n                var frames_1 = event.stacktrace.frames;\n                return this._getLastValidUrl(frames_1);\n            }\n            if (event.exception) {\n                var frames_2 = event.exception.values && event.exception.values[0].stacktrace && event.exception.values[0].stacktrace.frames;\n                return this._getLastValidUrl(frames_2);\n            }\n            return null;\n        }\n        catch (oO) {\n            utils_1.logger.error(\"Cannot extract url for event \" + utils_1.getEventDescription(event));\n            return null;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    InboundFilters.id = 'InboundFilters';\n    return InboundFilters;\n}());\nexports.InboundFilters = InboundFilters;\n//# sourceMappingURL=inboundfilters.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","hub_1","utils_1","DEFAULT_IGNORE_ERRORS","InboundFilters","_options","name","id","prototype","setupOnce","InboundFilters.prototype.setupOnce","addGlobalEventProcessor","event","hub","getCurrentHub","self","getIntegration","clientOptions","client","getClient","getOptions","options","_mergeOptions","_shouldDropEvent","InboundFilters.prototype._shouldDropEvent","_isSentryError","logger","warn","getEventDescription","_isIgnoredError","_isDeniedUrl","_getEventFilterUrl","_isAllowedUrl","InboundFilters.prototype._isSentryError","ignoreInternal","exception","values","type","_oO","InboundFilters.prototype._isIgnoredError","ignoreErrors","length","_getPossibleEventMessages","some","message","pattern","isMatchingPattern","InboundFilters.prototype._isDeniedUrl","denyUrls","url","InboundFilters.prototype._isAllowedUrl","allowUrls","InboundFilters.prototype._mergeOptions","__spread","whitelistUrls","blacklistUrls","InboundFilters.prototype._getPossibleEventMessages","_a","_b","_c","oO","error","_getLastValidUrl","InboundFilters.prototype._getLastValidUrl","frames","i","frame","filename","InboundFilters.prototype._getEventFilterUrl","stacktrace"]
}
