shadow$provide.module$node_modules$readable_stream$lib$_stream_transform=function(global,require,module,exports){function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",Error("write callback called multiple times"));ts.writechunk=null;ts.writecb=null;null!=data&&this.push(data);cb(er);er=this._readableState;er.reading=!1;(er.needReadable||er.length<er.highWaterMark)&&this._read(er.highWaterMark)}function Transform(options){if(!(this instanceof
Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;options&&("function"===typeof options.transform&&(this._transform=options.transform),"function"===typeof options.flush&&(this._flush=options.flush));this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"===
typeof this._flush?this._flush(function(er,data){done(_this,er,data)}):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);null!=data&&stream.push(data);if(stream._writableState.length)throw Error("Calling transform done when ws.length !\x3d 0");if(stream._transformState.transforming)throw Error("Calling transform done when still transforming");return stream.push(null)}module.exports=Transform;var Duplex=require("module$node_modules$readable_stream$lib$_stream_duplex");
global=Object.create(require("module$node_modules$util$util"));global.inherits=require("module$node_modules$inherits$inherits_browser");global.inherits(Transform,Duplex);Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=!1;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw Error("_transform() is not implemented");};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;
ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;ts.transforming||(chunk=this._readableState,(ts.needTransform||chunk.needReadable||chunk.length<chunk.highWaterMark)&&this._read(chunk.highWaterMark))};Transform.prototype._read=function(n){n=this._transformState;null!==n.writechunk&&n.writecb&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,
err,function(err2){cb(err2);_this2.emit("close")})}}
//# sourceMappingURL=module$node_modules$readable_stream$lib$_stream_transform.js.map
