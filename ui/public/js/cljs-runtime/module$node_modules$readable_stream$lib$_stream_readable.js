shadow$provide.module$node_modules$readable_stream$lib$_stream_readable=function(global,require,module,exports){function prependListener(emitter,event,fn){if("function"===typeof emitter.prependListener)return emitter.prependListener(event,fn);if(emitter._events&&emitter._events[event])isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]];else emitter.on(event,fn)}function ReadableState(options,stream){Duplex=Duplex||require("module$node_modules$readable_stream$lib$_stream_duplex");
options=options||{};stream=stream instanceof Duplex;this.objectMode=!!options.objectMode;stream&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:stream&&(readableHwm||0===readableHwm)?readableHwm:defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=options.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;options.encoding&&(StringDecoder||(StringDecoder=require("module$node_modules$readable_stream$node_modules$string_decoder$lib$string_decoder").StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=
options.encoding)}function Readable(options){Duplex=Duplex||require("module$node_modules$readable_stream$lib$_stream_duplex");if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=!0;options&&("function"===typeof options.read&&(this._read=options.read),"function"===typeof options.destroy&&(this._destroy=options.destroy));Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;
if(null===chunk)state.reading=!1,state.ended||(state.decoder&&(chunk=state.decoder.end())&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length),state.ended=!0,emitReadable(stream));else{if(!skipChunkCheck){skipChunkCheck=chunk;var er;Buffer.isBuffer(skipChunkCheck)||skipChunkCheck instanceof OurUint8Array||"string"===typeof skipChunkCheck||void 0===skipChunkCheck||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));var er$jscomp$0=er}er$jscomp$0?
stream.emit("error",er$jscomp$0):state.objectMode||chunk&&0<chunk.length?("string"===typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=Buffer.from(chunk)),addToFront?state.endEmitted?stream.emit("error",Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,
state,chunk,!1):state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1)}return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),
state.needReadable&&emitReadable(stream));state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function howMuchToRead(n$jscomp$0,state){if(0>=n$jscomp$0||0===state.length&&state.ended)return 0;if(state.objectMode)return 1;if(n$jscomp$0!==n$jscomp$0)return state.flowing&&state.length?state.buffer.head.data.length:state.length;if(n$jscomp$0>state.highWaterMark){var n=n$jscomp$0;8388608<=n?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++);state.highWaterMark=
n}return n$jscomp$0<=state.length?n$jscomp$0:state.ended?state.length:(state.needReadable=!0,0)}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1;state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&
!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);state.awaitDrain&&state.awaitDrain--;0===state.awaitDrain&&src.listeners("data").length&&(state.flowing=!0,flow(src))}}function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}function resume_(stream,
state){state.reading||(debug("resume read 0"),stream.read(0));state.resumeScheduled=!1;state.awaitDrain=0;stream.emit("resume");flow(stream);state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){if(0===state.length)return null;if(state.objectMode)var ret=state.buffer.shift();else if(!n||n>=state.length)ret=state.decoder?state.buffer.join(""):1===state.buffer.length?
state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear();else{ret=state.buffer;state=state.decoder;if(n<ret.head.data.length)state=ret.head.data.slice(0,n),ret.head.data=ret.head.data.slice(n);else{if(n===ret.head.data.length)ret=ret.shift();else if(state){state=ret.head;var c=1,ret$jscomp$0=state.data;for(n-=ret$jscomp$0.length;state=state.next;){var str=state.data,nb=n>str.length?str.length:n;ret$jscomp$0=nb===str.length?ret$jscomp$0+str:ret$jscomp$0+str.slice(0,n);n-=nb;if(0===
n){nb===str.length?(++c,ret.head=state.next?state.next:ret.tail=null):(ret.head=state,state.data=str.slice(nb));break}++c}ret.length-=c;ret=ret$jscomp$0}else{state=Buffer.allocUnsafe(n);c=ret.head;ret$jscomp$0=1;c.data.copy(state);for(n-=c.data.length;c=c.next;){str=c.data;nb=n>str.length?str.length:n;str.copy(state,state.length-n,0,nb);n-=nb;if(0===n){nb===str.length?(++ret$jscomp$0,ret.head=c.next?c.next:ret.tail=null):(ret.head=c,c.data=str.slice(nb));break}++ret$jscomp$0}ret.length-=ret$jscomp$0;
ret=state}state=ret}ret=state}return ret}function endReadable(stream){var state=stream._readableState;if(0<state.length)throw Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}var process=require("module$node_modules$process$browser");
"use strict";var pna=require("module$node_modules$process_nextick_args$index");module.exports=Readable;var isArray=require("module$node_modules$isarray$index"),Duplex;Readable.ReadableState=ReadableState;require("module$node_modules$events$events");var Stream=require("module$node_modules$readable_stream$lib$internal$streams$stream_browser"),Buffer=require("module$node_modules$readable_stream$node_modules$safe_buffer$index").Buffer,OurUint8Array=global.Uint8Array||function(){};global=Object.create(require("module$node_modules$util$util"));
global.inherits=require("module$node_modules$inherits$inherits_browser");module=require("shadow$empty");var debug=void 0;debug=module&&module.debuglog?module.debuglog("stream"):function(){};var BufferList=require("module$node_modules$readable_stream$lib$internal$streams$BufferList");module=require("module$node_modules$readable_stream$lib$internal$streams$destroy");var StringDecoder;global.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];Object.defineProperty(Readable.prototype,
"destroyed",{get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}});Readable.prototype.destroy=module.destroy;Readable.prototype._undestroy=module.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(state.objectMode)var skipChunkCheck=!0;else"string"===typeof chunk&&(encoding=encoding||
state.defaultEncoding,encoding!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0);return readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)};Readable.prototype.isPaused=function(){return!1===this._readableState.flowing};Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=require("module$node_modules$readable_stream$node_modules$string_decoder$lib$string_decoder").StringDecoder);
this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState,nOrig=n;0!==n&&(state.emittedReadable=!1);if(0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;n=howMuchToRead(n,state);if(0===n&&state.ended)return 0===
state.length&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead);if(0===state.length||state.length-n<state.highWaterMark)doRead=!0,debug("length less than watermark",doRead);state.ended||state.reading?debug("reading or ended",!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state)));doRead=0<n?fromList(n,state):null;null===doRead?
(state.needReadable=!0,n=0):state.length-=n;0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this));null!==doRead&&this.emit("data",doRead);return doRead};Readable.prototype._read=function(n){this.emit("error",Error("_read() is not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable,unpipeInfo){debug("onunpipe");readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",
onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain())}function onend(){debug("onend");dest.end()}function ondata(chunk){debug("ondata");increasedAwaitDrain=!1;!1!==dest.write(chunk)||increasedAwaitDrain||
((1===state.pipesCount&&state.pipes===dest||1<state.pipesCount&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);0===dest.listeners("error").length&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish);unpipe()}function onfinish(){debug("onfinish");dest.removeListener("close",
onclose);unpipe()}function unpipe(){debug("unpipe");src.unpipe(dest)}var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1;debug("pipe count\x3d%d opts\x3d%j",state.pipesCount,pipeOpts);pipeOpts=pipeOpts&&!1===pipeOpts.end||dest===process.stdout||dest===process.stderr?unpipe:onend;if(state.endEmitted)pna.nextTick(pipeOpts);else src.once("end",pipeOpts);dest.on("unpipe",
onunpipe);var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1,increasedAwaitDrain=!1;src.on("data",ondata);prependListener(dest,"error",onerror);dest.once("close",onclose);dest.once("finish",onfinish);dest.emit("pipe",src);state.flowing||(debug("pipe resume"),src.resume());return dest};Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount){if(dest&&dest!==state.pipes)return this;
dest||(dest=state.pipes);state.pipes=null;state.pipesCount=0;state.flowing=!1;dest&&dest.emit("unpipe",this,unpipeInfo);return this}if(!dest){dest=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=!1;for(state=0;state<len;state++)dest[state].emit("unpipe",this,unpipeInfo);return this}len=indexOf(state.pipes,dest);if(-1===len)return this;state.pipes.splice(len,1);--state.pipesCount;1===state.pipesCount&&(state.pipes=state.pipes[0]);dest.emit("unpipe",this,unpipeInfo);
return this};Readable.prototype.on=function(ev,fn){fn=Stream.prototype.on.call(this,ev,fn);"data"===ev?!1!==this._readableState.flowing&&this.resume():"readable"===ev&&(ev=this._readableState,ev.endEmitted||ev.readableListening||(ev.readableListening=ev.needReadable=!0,ev.emittedReadable=!1,ev.reading?ev.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this)));return fn};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.resume=function(){var state=this._readableState;
state.flowing||(debug("resume"),state.flowing=!0,state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,this,state)));return this};Readable.prototype.pause=function(){debug("call pause flowing\x3d%j",this._readableState.flowing);!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;stream.on("end",function(){debug("wrapped end");if(state.decoder&&
!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)});stream.on("data",function(chunk){debug("wrapped data");state.decoder&&(chunk=state.decoder.write(chunk));state.objectMode&&(null===chunk||void 0===chunk)||!(state.objectMode||chunk&&chunk.length)||_this.push(chunk)||(paused=!0,stream.pause())});for(var i in stream)void 0===this[i]&&"function"===typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));
for(i=0;i<kProxyEvents.length;i++)stream.on(kProxyEvents[i],this.emit.bind(this,kProxyEvents[i]));this._read=function(n){debug("wrapped _read",n);paused&&(paused=!1,stream.resume())};return this};Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Readable._fromList=fromList}
//# sourceMappingURL=module$node_modules$readable_stream$lib$_stream_readable.js.map
