{"version":3,"sources":["webapp/quickstarts/views/environment_step.cljs"],"mappings":"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","names":["webapp.quickstarts.views.environment-step/main","component->config-inputs","request-agent-list","script-view","reagent.core.atom","p__31522","map__31523","cljs.core/--destructure-map","cljs.core.get","p1__31513#","cljs.core/deref","p1__31515#","p1__31516#","_","config-values","secret-path-env","agent-tag","connection-name","connection-type","fx-get-current-step-infos","agent-token","secrets-host","e","webapp.components.forms/input","cljs.core/reset!","webapp.formatters/replace-empty-space->dash","cljs.core/seq","fexpr__31524","cljs.core.keyword","webapp.connections.constants/connection-config-help-link","webapp.components.radio-button/main","cljs.core._EQ_","p1__31518#","p1__31519#","p1__31520#","webapp.components.headings/h4","webapp.components.tabs/tabs","webapp.shared-ui.agent-scripts-tab-view/main","webapp.components.divider/main","webapp.components.button/primary"],"sourcesContent":["(ns webapp.quickstarts.views.environment-step\n  (:require [reagent.core :as r]\n            [webapp.components.button :as button]\n            [webapp.components.divider :as divider]\n            [webapp.components.forms :as forms]\n            [webapp.components.headings :as headings]\n            [webapp.components.radio-button :as radio-button]\n            [webapp.components.tabs :as tabs]\n            [webapp.connections.constants :as connections-consts]\n            [webapp.formatters :as f]\n            [webapp.shared-ui.agent-scripts-tab-view :as agent-scripts-tab-view]))\n\n(defn main\n  [component->config-inputs request-agent-list]\n  (let [script-view (r/atom \"Kubernets - Helm\")]\n    (fn [_ _ {:keys [config-values secret-path-env agent-tag connection-name connection-type fx-get-current-step-infos agent-token secrets-host]}]\n      [:form\n       {:on-submit (fn [e]\n                     (.preventDefault e)\n                     (request-agent-list))}\n       [:section {:class \"my-regular\"}\n        [:div {:class \"grid grid-cols-2 gap-x-regular\"}\n         [forms/input {:label \"Give a nickname for your connection\"\n                       :placeholder \"my-mysql-test\"\n                       :on-change #(reset! connection-name (f/replace-empty-space->dash (-> % .-target .-value)))\n                       :required true\n                       :value @connection-name}]]\n\n        (when (seq (component->config-inputs))\n          [:div {:class \"my-regular\"}\n           [:div {:class \"mb-small\"}\n            [:label {:class \"block text-sm font-medium text-gray-700\"}\n             \"Complete the configurations of your connection:\"]\n            [:label {:class \"text-xs text-gray-700\"}\n             \"For more details about this connection's configurations access \"]\n            [:a {:class \"text-xs text-gray-700 underline\"\n                 :href ((keyword @connection-type) connections-consts/connection-config-help-link)\n                 :target \"_blank\"\n                 :rel \"noopener noreferrer\"}\n             \"this link.\"]]\n           [:div {:class \"grid grid-cols-2 gap-x-regular\"}\n            (component->config-inputs)]])\n\n        [:div {:class \"mb-large\"}\n         [:label {:class \"mb-small block text-sm font-medium text-gray-700\"}\n          \"Who will be the host of your configurations?\"]\n         [:div {:class \"grid grid-cols-2 gap-regular mb-regular\"}\n          [radio-button/main {:label \"runops-hosted\"\n                              :name :hosted\n                              :value :runops\n                              :on-change #(reset! secrets-host (-> % .-target .-value))\n                              :checked? (= @secrets-host \"runops\")}]\n          [radio-button/main {:label \"self-hosted\"\n                              :name :hosted\n                              :value :self\n                              :on-change #(reset! secrets-host (-> % .-target .-value))\n                              :checked? (= @secrets-host \"self\")}]]]]\n\n       (when (= @secrets-host \"self\")\n         [:section\n          [headings/h4 \"Environment's configurations\"]\n          [:small {:class \"block mb-regular text-gray-600\"}\n           \"Here we will configure the environment which will run your connection. We named this environment Agent.\"]\n\n          [:div {:class \"grid grid-cols-2 gap-x-regular\"}\n\n           [forms/input {:label \"Environment variable for your connection\"\n                         :on-change #(reset! secret-path-env (-> % .-target .-value))\n                         :required true\n                         :value @secret-path-env}]\n           [forms/input {:label \"Agent nickname\"\n                         :placeholder \"(empty allowed)\"\n                         :on-change #(reset! agent-tag (-> % .-target .-value))\n                         :required false\n                         :value @agent-tag}]]\n\n          [:div {:class \"my-regular\"}\n           [headings/h4 \"Run Script\"]\n           [:small {:class \"block text-gray-600\"}\n            \"Here's everything you need to get the environment (Agent) up and running.\"]\n\n           [tabs/tabs {:on-change #(reset! script-view %)\n                       :tabs [\"Kubernets - Helm\" \"Kubernets - Bash\" \"Localhost - Docker/Bash\"]}]\n           [agent-scripts-tab-view/main @script-view config-values @secret-path-env @agent-tag agent-token]]])\n\n       (divider/main)\n       [:div {:class \"grid grid-cols-4 gap-regular items-center my-regular\"}\n        [:div.col-span-3\n         [:small {:class \"block text-gray-600\"}\n          \"After configuring your agent, verify here if everything is ok and go to the next step. If everything is ok it will create your connection too!\"]]\n        [:div.col-span-1\n         (button/primary {:text \"Verify and Create\"\n                          :disabled (= (:status (fx-get-current-step-infos)) \"complete\")\n                          :type \"submit\"})]]])))\n"]}