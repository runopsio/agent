shadow$provide.module$node_modules$$sentry$tracing$dist$span=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$tslib$tslib"),utils_1=require("module$node_modules$$sentry$utils$dist$index"),spanstatus_1=require("module$node_modules$$sentry$tracing$dist$spanstatus");global=function(){function SpanRecorder(maxlen){void 0===maxlen&&(maxlen=1E3);this.spans=[];this._maxlen=maxlen}SpanRecorder.prototype.add=function(span){this.spans.length>
this._maxlen?span.spanRecorder=void 0:this.spans.push(span)};return SpanRecorder}();exports.SpanRecorder=global;global=function(){function Span(spanContext){this.traceId=utils_1.uuid4();this.spanId=utils_1.uuid4().substring(16);this.startTimestamp=utils_1.timestampWithMs();this.tags={};this.data={};if(!spanContext)return this;spanContext.traceId&&(this.traceId=spanContext.traceId);spanContext.spanId&&(this.spanId=spanContext.spanId);spanContext.parentSpanId&&(this.parentSpanId=spanContext.parentSpanId);
"sampled"in spanContext&&(this.sampled=spanContext.sampled);spanContext.op&&(this.op=spanContext.op);spanContext.description&&(this.description=spanContext.description);spanContext.data&&(this.data=spanContext.data);spanContext.tags&&(this.tags=spanContext.tags);spanContext.status&&(this.status=spanContext.status);spanContext.startTimestamp&&(this.startTimestamp=spanContext.startTimestamp);spanContext.endTimestamp&&(this.endTimestamp=spanContext.endTimestamp)}Span.prototype.child=function(spanContext){return this.startChild(spanContext)};
Span.prototype.startChild=function(spanContext){spanContext=new Span(tslib_1.__assign(tslib_1.__assign({},spanContext),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));spanContext.spanRecorder=this.spanRecorder;spanContext.spanRecorder&&spanContext.spanRecorder.add(spanContext);spanContext.transaction=this.transaction;return spanContext};Span.prototype.setTag=function(key,value){var _a;this.tags=tslib_1.__assign(tslib_1.__assign({},this.tags),(_a={},_a[key]=value,_a));return this};
Span.prototype.setData=function(key,value){var _a;this.data=tslib_1.__assign(tslib_1.__assign({},this.data),(_a={},_a[key]=value,_a));return this};Span.prototype.setStatus=function(value){this.status=value;return this};Span.prototype.setHttpStatus=function(httpStatus){this.setTag("http.status_code",String(httpStatus));httpStatus=spanstatus_1.SpanStatus.fromHttpCode(httpStatus);httpStatus!==spanstatus_1.SpanStatus.UnknownError&&this.setStatus(httpStatus);return this};Span.prototype.isSuccess=function(){return this.status===
spanstatus_1.SpanStatus.Ok};Span.prototype.finish=function(endTimestamp){this.endTimestamp="number"===typeof endTimestamp?endTimestamp:utils_1.timestampWithMs()};Span.prototype.toTraceparent=function(){var sampledString="";void 0!==this.sampled&&(sampledString=this.sampled?"-1":"-0");return this.traceId+"-"+this.spanId+sampledString};Span.prototype.toContext=function(){return utils_1.dropUndefinedKeys({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,
sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})};Span.prototype.updateWithContext=function(spanContext){var _a,_b,_c,_d,_e;this.data=(_a=spanContext.data,null!==_a&&void 0!==_a?_a:{});this.description=spanContext.description;this.endTimestamp=spanContext.endTimestamp;this.op=spanContext.op;this.parentSpanId=spanContext.parentSpanId;this.sampled=spanContext.sampled;this.spanId=(_b=spanContext.spanId,null!==_b&&void 0!==
_b?_b:this.spanId);this.startTimestamp=(_c=spanContext.startTimestamp,null!==_c&&void 0!==_c?_c:this.startTimestamp);this.status=spanContext.status;this.tags=(_d=spanContext.tags,null!==_d&&void 0!==_d?_d:{});this.traceId=(_e=spanContext.traceId,null!==_e&&void 0!==_e?_e:this.traceId);return this};Span.prototype.getTraceContext=function(){return utils_1.dropUndefinedKeys({data:0<Object.keys(this.data).length?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,
span_id:this.spanId,status:this.status,tags:0<Object.keys(this.tags).length?this.tags:void 0,trace_id:this.traceId})};Span.prototype.toJSON=function(){return utils_1.dropUndefinedKeys({data:0<Object.keys(this.data).length?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:0<Object.keys(this.tags).length?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})};return Span}();
exports.Span=global}
//# sourceMappingURL=module$node_modules$$sentry$tracing$dist$span.js.map
