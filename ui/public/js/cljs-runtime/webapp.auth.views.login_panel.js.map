{"version":3,"sources":["webapp/auth/views/login_panel.cljs"],"mappings":";AASA,uCAAA,vCAAMA,sFAAQC;AAAd,AACE,qBAAA,rBAAUC,wCAAmCD;;AAC7C,8BAAA,mFAAA,1GAACE,oNAAoCF;;AAEvC,AAAKG,sCAAM,AAACC,gDAAO,iBAAAC,mBAAI,qBAAA,rBAAUJ;AAAd,AAAA,oBAAAI;AAAAA;;AAAA;;;AACnB,AAAKC,wCAAQ,gDAAA,hDAACF;AAEd,sCAAA,tCAAMG;AAAN,AACE,IAAMG,iBAAe,qBAAA,rBAAUT;AAA/B,AAAA,0FAAA,gGAAA,mFAAA,2HAAA,mFAAA,oFAAA,mFAAA,mDAAA,2CAAA,oDAAA,wDAAA,iHAAA,0CAAA,mFAAA,yJAAA,mFAAA,sDAAA,2CAAA,xeAKKU,uiBAGY,WAAKC;AAAL,AACE,AAAiBA;;AACjB,AAACC,sBAAOP,sCAAQ,cAAA,AAAAG,dAACK,8BAAKR;;AACtB,4CAAA,AAAAG,rCAACV,qDAAQI;WAX5B,mFAAA,mDAAA,iHAAA,2CAAA,uDAAA,QAAA,+DAAA,WAAAK,lNAaOO;AAbP,AAcgC,OAACF,sBAAOV,oCAAM,AAAA,AAAAK;GAd9C,qDAAA,QAAA,mEAAA,kBAAA,sDAAA,AAAAC,qDAAA,6DAAA,mrBAAA,mFAAA,siBAAA,mFAAA,+FAAA,mFAAA,4FAAA,2CAAA,qDAAA,kBAAA,j2DAiB4BN,+HAEvB,kCAAA,AAAA,mFAAA,mDAAA,2CAAA,wDAAA,mBAAA,mFAAA,qDAAA,2CAAA,wDAAA,+BAAA,wGAAA,9nBAAMO,yxBAKL,iCAAA,2CAAA,sDAAA,QAAA,qMAAA,iEAAA,KAAA,qDAAA,1cAACM,oMACwB,kBAAA,AAAAP,wDAAA,AAAA,2DAAA,nGAAOH","names":["webapp.auth.views.login-panel/submit","email","js/localStorage","re-frame.core/dispatch","webapp.auth.views.login-panel/email","reagent.core.atom","or__4253__auto__","webapp.auth.views.login-panel/loading","webapp.auth.views.login-panel/panel","p1__52163#","cljs.core/deref","email-mismatch","webapp.components.headings/h2","e","cljs.core/reset!","cljs.core/not","webapp.components.forms/input","webapp.components.button/primary"],"sourcesContent":["(ns webapp.auth.views.login-panel\n  (:require\n   [reagent.core :as r]\n   [re-frame.core :as rf]\n   [webapp.auth.events :as events]\n   [webapp.components.button :as button]\n   [webapp.components.forms :as forms]\n   [webapp.components.headings :as h]))\n\n(defn submit [email]\n  (.setItem js/localStorage \"user_email_login\" email)\n  (rf/dispatch [::events/get-auth-link email]))\n\n(def email (r/atom (or (.getItem js/localStorage \"user_email_login\") \"\")))\n(def loading (r/atom false))\n\n(defn panel []\n  (let [email-mismatch (.getItem js/localStorage \"email_mismatch\")]\n    [:div.md:w-96.w-full.m-auto\n     [:header.grid.place-items-center.mb-large\n      [:figure.w-16.mb-large\n       [:img {:src \"/images/runops-icon-black.svg\"}]]\n      [h/h2 \"Sign in to your account\"]]\n     [:section.px-regular.py-large.rounded-lg.bg-white.border\n      [:form\n       {:on-submit (fn [e]\n                     (.preventDefault e)\n                     (reset! loading (not @loading))\n                     (submit @email))}\n       [:div\n        [forms/input {:label \"Email\"\n                      :on-change #(reset! email (-> % .-target .-value))\n                      :type \"email\"\n                      :placeholder \"Type your email\"\n                      :value @email\n                      :required true}]]\n       (when email-mismatch\n         [:div {:class \"pb-small\"}\n          [:span {:class \"text-xs text-red-500\"}\n           \"This email is different from the one you selected from your provider sign-in provider\"]])\n       [:div.w-full\n        (button/primary {:text \"Login\"\n                         :status (when @loading :loading)\n                         :full-width true\n                         :type \"submit\"})]\n       [:div.pt-regular.text-right\n        [:a.text-blue-500.text-sm\n         {:href \"/signup\"}\n         \"I do not have an account\"]]]]]))\n"]}