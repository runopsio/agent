{"version":3,"sources":["webapp/secrets/views/grid_view.cljs"],"mappings":"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","names":["js/webapp","js/webapp.secrets","js/webapp.secrets.views","js/webapp.secrets.views.grid-view","js/webapp.secrets.views.grid-view.item-state","webapp.secrets.views.grid-view/item-state","reagent.core.atom","webapp.secrets.views.grid-view/close-modal-dialog","dialog-text","on-success-dialog","re-frame.core/dispatch","open-dialog","webapp.secrets.views.grid-view/toggle-dropdown-status","item","cljs.core.swap_BANG_","cljs.core/assoc-in","cljs.core/not","cljs.core/deref","cljs.core.get_in","webapp.secrets.views.grid-view/confirm-delete-secret","secret-key","webapp.components.headings/h2","webapp.components.divider/main","webapp.components.button/secondary","webapp.components.button/primary","webapp.secrets.views.grid-view/delete-secret","webapp.secrets.views.grid-view/item-dropdown","webapp.secrets.views.grid-view/secret-card-popover","secret","webapp.components.popover/right","webapp.secrets.views.grid-view/secret-card","webapp.secrets.views.secret-form-modal-update/form","webapp.secrets.views.grid-view/main","_","secrets","iter__4652__auto__","s__31061","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__31063","cljs.core/chunk-buffer","i__31062","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__31060","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","cljs.core/keys","cljs.core/chunk-first"],"sourcesContent":["(ns webapp.secrets.views.grid-view\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [webapp.components.button :as button]\n            [webapp.components.divider :as divider]\n            [webapp.components.headings :as headings]\n            [webapp.components.popover :as popover]\n            [webapp.secrets.views.secret-form-modal-update :as secret-form-modal-update]))\n\n(defonce item-state (r/atom {}))\n\n(defn close-modal-dialog []\n  (let [dialog-text (str \"Are you sure you want to discard this update secret?\")\n        on-success-dialog #(rf/dispatch [:close-modal])\n        open-dialog #(rf/dispatch [:open-dialog {:text dialog-text\n                                                 :on-success on-success-dialog}])]\n    (open-dialog)))\n\n(defn toggle-dropdown-status [item]\n  (swap! item-state assoc-in\n         [item :dropdown-status]\n         (not (get-in @item-state [item :dropdown-status]))))\n\n(defn confirm-delete-secret [secret-key]\n  [:div\n   [headings/h2 \"Secret deletion\" {:class \"mb-regular\"}]\n   (divider/main)\n   [:p.mb-regular\n    \"Do you really want to delete \"\n    [:b secret-key]\n    \" secret?\"]\n   (divider/main)\n   [:div.grid.grid-cols-2.gap-regular\n    (button/secondary {:text \"Cancel\"\n                       :on-click #(rf/dispatch [:close-modal])})\n    (button/primary {:text \"Confirm deactivation\"\n                     :on-click (fn []\n                                 (rf/dispatch [:secrets->delete-secret secret-key])\n                                 (rf/dispatch [:close-modal]))})]])\n\n\n(defn delete-secret [item]\n  (toggle-dropdown-status item)\n  (rf/dispatch [:open-modal [confirm-delete-secret item]]))\n\n(defn item-dropdown [item]\n  [:ul.text-right\n   [:li.py-small.px-regular\n    [:a.text-red-600.text-sm\n     {:href \"#\"\n      :on-click #(delete-secret item)}\n     \"Delete\"]]])\n\n(defn- secret-card-popover [secret]\n  [:div\n   {:class \"absolute right-small top-regular\"}\n   [:figure\n    {:class \"w-5 cursor-pointer\"\n     :on-click #(swap! item-state assoc-in\n                       [secret :dropdown-status]\n                       (not (get-in @item-state [secret :dropdown-status])))}\n    [:img {:src \"/icons/icon-dots-vertical.svg\"}]]\n   (popover/right {:open (get-in @item-state [secret :dropdown-status])\n                   :component (item-dropdown secret)\n                   :on-click-outside #(swap! item-state assoc-in\n                                             [secret :dropdown-status]\n                                             false)})])\n\n(defn- secret-card [secret]\n  [:div {:class \"relative\"}\n   [:a {:class (str \"group flex flex-col relative p-regular bg-white rounded-lg\"\n                    \" border shadow-0 hover:shadow transition h-full\")\n        :href \"#\"\n        :on-click #(rf/dispatch [:open-modal [secret-form-modal-update/form secret] :large close-modal-dialog])}\n    [:div\n     {:class (str \"text-sm text-gray-900 mb-large\")}\n     secret]\n\n    [:div {:class \"flex flex-grow justify-end items-end\"}\n     [:span {:class \"flex items-center gap-x-small text-xs text-blue-500\"}\n      [:span \"Open\"]\n      [:figure {:class \"w-3 transform group-hover:translate-x-0.5 transition\"}\n       [:img {:src \"/icons/icon-arrow-right-blue.svg\"}]]]]]\n   [secret-card-popover secret]])\n\n(defn main [_]\n  (fn [secrets]\n    [:section\n     {:class (str \"grid grid-cols-3 gap-regular \"\n                  \"2xl:grid-cols-4\")}\n     (for [secret (keys secrets)]\n       ^{:key secret}\n       [secret-card secret])]))\n"]}