{"version":3,"sources":["webapp/dashboard/queries/longer_time.cljs"],"mappings":"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","names":["webapp.dashboard.queries.longer-time/queries-list-empty","webapp.dashboard.queries.longer-time/query-item","item","re-frame.core/dispatch","webapp.tasks.views.task-details/main","webapp.formatters/time-elapsed","webapp.dashboard.queries.longer-time/queries-list","queries","iter__4652__auto__","s__31066","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__31068","cljs.core/chunk-buffer","i__31067","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__31065","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","webapp.dashboard.queries.longer-time/main","state","re_frame.core.subscribe","dates-options","switch-dates","date","_","cljs.core._EQ_","cljs.core/deref","webapp.components.headings/h3","cljs.core.doall","s__31096","b__31098","i__31097","iter__31095","cljs.core/empty?","cljs.core/chunk-first"],"sourcesContent":["(ns webapp.dashboard.queries.longer-time\n  (:require\n   [re-frame.core :as rf]\n   [webapp.formatters :as formatters]\n   [webapp.tasks.views.task-details :as task-details]\n   [webapp.components.headings :as h]))\n\n(defn- queries-list-empty []\n  [:div {:class (str \"flex flex-grow items-center justify-center h-full \"\n                     \"text-xs text-gray-500 font-italic\")}\n   [:span \"No tasks for the selected date\"]])\n\n(defn- query-item [item]\n  [:li {:class (str \"flex gap-small items-center p-small border-b border-gray-200 text-xs \"\n                     \"hover:bg-gray-50 cursor-pointer\")\n         :on-click (fn []\n                     (rf/dispatch [:get-task-by-id item])\n                     (rf/dispatch [:open-modal\n                                   [task-details/main {:copy-to-new-script? true}] :large]))}\n   [:span {:class \"text-xxs font-bold text-gray-500\"}\n    (:id item)]\n   [:span {:class \"text-gray-700\"}\n    (:user_email item)]\n   [:span {:class \"flex items-center text-gray-800\"}\n    [:span {:class \"font-bold\"}\n     (:target item)]\n    [:i {:class \"ml-0.5 text-gray-700\"} [:small (str \"(\" (:type item) \")\")]]]\n   [:span {:class \"text-xxs text-gray-500 flex-grow text-right\"}\n    (str \"Took \" (formatters/time-elapsed (:elapsed_time_ms item)))]])\n\n(defn- queries-list [queries]\n  [:ul {:class \"overflow-auto h-56\"}\n   (for [item (:data queries)]\n     ^{:key (:id item)}\n     [query-item item])])\n\n(defn main []\n  (let [state (rf/subscribe [:dashboard->slower-queries])\n        dates-options [\"30 days\" \"15 days\" \"7 days\" \"Today\"]\n        switch-dates (fn [date]\n                       (rf/dispatch [:dashboard->get-slower-queries\n                                     {:last-x-days date}]))\n        _ (switch-dates \"7 days\")]\n    (fn []\n      [:div {:class (when (= (:status @state) :loading)\n                      \"opacity-50 pointer-events-none \")}\n       [:header {:class \"flex gap-small items-center mb-small px-small\"}\n        [h/h3 \"Slower queries\" {:class \"flex-grow\"}]\n        [:div {:class (str \"flex gap-regular flex-shrink \"\n                           \"text-xs text-gray-600 \")}\n         (doall\n          (for [date dates-options]\n            ^{:key date}\n            [:span {:class (str \"cursor-pointer hover:text-blue-500 \"\n                                (when (= date (:selected-days @state))\n                                  \"text-blue-500\"))\n                    :on-click (fn []\n                                (switch-dates date))}\n             date]))]]\n       [:div\n        (if (empty? (-> @state :results :data))\n          [queries-list-empty]\n          [queries-list (:results @state)])]])))\n\n"]}